!function o(n,i,a){function s(t,e){if(!i[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},n[t][0].call(r.exports,function(e){return s(n[t][1][e]||e)},r,r.exports,o,n,i,a)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){t.exports=e("./lib/axios")},{"./lib/axios":3}],2:[function(e,t,r){"use strict";var f=e("./../utils"),g=e("./../core/settle"),p=e("./../helpers/cookies"),m=e("./../helpers/buildURL"),E=e("../core/buildFullPath"),h=e("./../helpers/parseHeaders"),v=e("./../helpers/isURLSameOrigin"),S=e("../core/createError"),b=e("../defaults"),y=e("../cancel/Cancel");t.exports=function(c){return new Promise(function(t,r){var e,o=c.data,n=c.headers,i=c.responseType;function a(){c.cancelToken&&c.cancelToken.unsubscribe(e),c.signal&&c.signal.removeEventListener("abort",e)}f.isFormData(o)&&delete n["Content-Type"];var s,l=new XMLHttpRequest;c.auth&&(s=c.auth.username||"",d=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"",n.Authorization="Basic "+btoa(s+":"+d));var d=E(c.baseURL,c.url);function u(){var e;l&&(e="getAllResponseHeaders"in l?h(l.getAllResponseHeaders()):null,e={data:i&&"text"!==i&&"json"!==i?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:e,config:c,request:l},g(function(e){t(e),a()},function(e){r(e),a()},e),l=null)}l.open(c.method.toUpperCase(),m(d,c.params,c.paramsSerializer),!0),l.timeout=c.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(r(S("Request aborted",c,"ECONNABORTED",l)),l=null)},l.onerror=function(){r(S("Network Error",c,null,l)),l=null},l.ontimeout=function(){var e=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",t=c.transitional||b.transitional;c.timeoutErrorMessage&&(e=c.timeoutErrorMessage),r(S(e,c,t.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},!f.isStandardBrowserEnv()||(d=(c.withCredentials||v(d))&&c.xsrfCookieName?p.read(c.xsrfCookieName):void 0)&&(n[c.xsrfHeaderName]=d),"setRequestHeader"in l&&f.forEach(n,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete n[t]:l.setRequestHeader(t,e)}),f.isUndefined(c.withCredentials)||(l.withCredentials=!!c.withCredentials),i&&"json"!==i&&(l.responseType=c.responseType),"function"==typeof c.onDownloadProgress&&l.addEventListener("progress",c.onDownloadProgress),"function"==typeof c.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",c.onUploadProgress),(c.cancelToken||c.signal)&&(e=function(e){l&&(r(!e||e&&e.type?new y("canceled"):e),l.abort(),l=null)},c.cancelToken&&c.cancelToken.subscribe(e),c.signal&&(c.signal.aborted?e():c.signal.addEventListener("abort",e))),l.send(o=o||null)})}},{"../cancel/Cancel":4,"../core/buildFullPath":9,"../core/createError":10,"../defaults":16,"./../core/settle":14,"./../helpers/buildURL":19,"./../helpers/cookies":21,"./../helpers/isURLSameOrigin":24,"./../helpers/parseHeaders":26,"./../utils":29}],3:[function(e,t,r){"use strict";var n=e("./utils"),i=e("./helpers/bind"),a=e("./core/Axios"),s=e("./core/mergeConfig");var o=function t(r){var e=new a(r),o=i(a.prototype.request,e);return n.extend(o,a.prototype,e),n.extend(o,e),o.create=function(e){return t(s(r,e))},o}(e("./defaults"));o.Axios=a,o.Cancel=e("./cancel/Cancel"),o.CancelToken=e("./cancel/CancelToken"),o.isCancel=e("./cancel/isCancel"),o.VERSION=e("./env/data").version,o.all=function(e){return Promise.all(e)},o.spread=e("./helpers/spread"),o.isAxiosError=e("./helpers/isAxiosError"),t.exports=o,t.exports.default=o},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./core/mergeConfig":13,"./defaults":16,"./env/data":17,"./helpers/bind":18,"./helpers/isAxiosError":23,"./helpers/spread":27,"./utils":29}],4:[function(e,t,r){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,t.exports=o},{}],5:[function(e,t,r){"use strict";var n=e("./Cancel");function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var o=this;this.promise.then(function(e){if(o._listeners){for(var t=o._listeners.length,r=0;r<t;r++)o._listeners[r](e);o._listeners=null}}),this.promise.then=function(e){var t,e=new Promise(function(e){o.subscribe(e),t=e}).then(e);return e.cancel=function(){o.unsubscribe(t)},e},e(function(e){o.reason||(o.reason=new n(e),t(o.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){!this._listeners||-1!==(e=this._listeners.indexOf(e))&&this._listeners.splice(e,1)},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},{"./Cancel":4}],6:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],7:[function(e,t,r){"use strict";var o=e("./../utils"),n=e("../helpers/buildURL"),i=e("./InterceptorManager"),u=e("./dispatchRequest"),c=e("./mergeConfig"),f=e("../helpers/validator"),g=f.validators;function a(e){this.defaults=e,this.interceptors={request:new i,response:new i}}a.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=c(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&f.assertOptions(e,{silentJSONParsing:g.transitional(g.boolean),forcedJSONParsing:g.transitional(g.boolean),clarifyTimeoutError:g.transitional(g.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))});var n,i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!o){var a=[u,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(i),n=Promise.resolve(t);a.length;)n=n.then(a.shift(),a.shift());return n}for(var s=t;r.length;){var l=r.shift(),d=r.shift();try{s=l(s)}catch(e){d(e);break}}try{n=u(s)}catch(e){return Promise.reject(e)}for(;i.length;)n=n.then(i.shift(),i.shift());return n},a.prototype.getUri=function(e){return e=c(this.defaults,e),n(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(r){a.prototype[r]=function(e,t){return this.request(c(t||{},{method:r,url:e,data:(t||{}).data}))}}),o.forEach(["post","put","patch"],function(o){a.prototype[o]=function(e,t,r){return this.request(c(r||{},{method:o,url:e,data:t}))}}),t.exports=a},{"../helpers/buildURL":19,"../helpers/validator":28,"./../utils":29,"./InterceptorManager":8,"./dispatchRequest":11,"./mergeConfig":13}],8:[function(e,t,r){"use strict";var o=e("./../utils");function n(){this.handlers=[]}n.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(t){o.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},{"./../utils":29}],9:[function(e,t,r){"use strict";var o=e("../helpers/isAbsoluteURL"),n=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!o(t)?n(e,t):t}},{"../helpers/combineURLs":20,"../helpers/isAbsoluteURL":22}],10:[function(e,t,r){"use strict";var i=e("./enhanceError");t.exports=function(e,t,r,o,n){e=new Error(e);return i(e,t,r,o,n)}},{"./enhanceError":12}],11:[function(e,t,r){"use strict";var o=e("./../utils"),n=e("./transformData"),i=e("../cancel/isCancel"),a=e("../defaults"),s=e("../cancel/Cancel");function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}t.exports=function(t){return l(t),t.headers=t.headers||{},t.data=n.call(t,t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),o.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return l(t),e.data=n.call(t,e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(l(t),e&&e.response&&(e.response.data=n.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},{"../cancel/Cancel":4,"../cancel/isCancel":6,"../defaults":16,"./../utils":29,"./transformData":15}],12:[function(e,t,r){"use strict";t.exports=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},{}],13:[function(e,t,r){"use strict";var d=e("../utils");t.exports=function(t,r){r=r||{};var o={};function n(e,t){return d.isPlainObject(e)&&d.isPlainObject(t)?d.merge(e,t):d.isPlainObject(t)?d.merge({},t):d.isArray(t)?t.slice():t}function i(e){return d.isUndefined(r[e])?d.isUndefined(t[e])?void 0:n(void 0,t[e]):n(t[e],r[e])}function e(e){if(!d.isUndefined(r[e]))return n(void 0,r[e])}function a(e){return d.isUndefined(r[e])?d.isUndefined(t[e])?void 0:n(void 0,t[e]):n(void 0,r[e])}function s(e){return e in r?n(t[e],r[e]):e in t?n(void 0,t[e]):void 0}var l={url:e,method:e,data:e,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return d.forEach(Object.keys(t).concat(Object.keys(r)),function(e){var t=l[e]||i,r=t(e);d.isUndefined(r)&&t!==s||(o[e]=r)}),o}},{"../utils":29}],14:[function(e,t,r){"use strict";var n=e("./createError");t.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},{"./createError":10}],15:[function(e,t,r){"use strict";var n=e("./../utils"),i=e("./../defaults");t.exports=function(t,r,e){var o=this||i;return n.forEach(e,function(e){t=e.call(o,t,r)}),t}},{"./../defaults":16,"./../utils":29}],16:[function(l,d,e){!function(s){!function(){"use strict";var o=l("./utils"),r=l("./helpers/normalizeHeaderName"),n=l("./core/enhanceError"),t={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var e,a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?e=l("./adapters/xhr"):void 0!==s&&"[object process]"===Object.prototype.toString.call(s)&&(e=l("./adapters/http")),e),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)||t&&"application/json"===t["Content-Type"]?(i(t,"application/json"),function(e,t,r){if(o.isString(e))try{return(t||JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||a.transitional,r=t&&t.silentJSONParsing,t=t&&t.forcedJSONParsing,r=!r&&"json"===this.responseType;if(r||t&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw n(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],function(e){a.headers[e]={}}),o.forEach(["post","put","patch"],function(e){a.headers[e]=o.merge(t)}),d.exports=a}.call(this)}.call(this,l("_process"))},{"./adapters/http":2,"./adapters/xhr":2,"./core/enhanceError":12,"./helpers/normalizeHeaderName":25,"./utils":29,_process:31}],17:[function(e,t,r){t.exports={version:"0.24.0"}},{}],18:[function(e,t,r){"use strict";t.exports=function(r,o){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return r.apply(o,e)}}},{}],19:[function(e,t,r){"use strict";var n=e("./../utils");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,r){if(!t)return e;var o,r=r?r(t):n.isURLSearchParams(t)?t.toString():(o=[],n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))}))}),o.join("&"));return r&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r),e}},{"./../utils":29}],20:[function(e,t,r){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],21:[function(e,t,r){"use strict";var s=e("./../utils");t.exports=s.isStandardBrowserEnv()?{write:function(e,t,r,o,n,i){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),s.isString(o)&&a.push("path="+o),s.isString(n)&&a.push("domain="+n),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":29}],22:[function(e,t,r){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],23:[function(e,t,r){"use strict";t.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},{}],24:[function(e,t,r){"use strict";var o,n,i,a=e("./../utils");function s(e){return n&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}t.exports=a.isStandardBrowserEnv()?(n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),o=s(window.location.href),function(e){e=a.isString(e)?s(e):e;return e.protocol===o.protocol&&e.host===o.host}):function(){return!0}},{"./../utils":29}],25:[function(e,t,r){"use strict";var n=e("../utils");t.exports=function(r,o){n.forEach(r,function(e,t){t!==o&&t.toUpperCase()===o.toUpperCase()&&(r[o]=e,delete r[t])})}},{"../utils":29}],26:[function(e,t,r){"use strict";var n=e("./../utils"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,r,o={};return e&&n.forEach(e.split("\n"),function(e){r=e.indexOf(":"),t=n.trim(e.substr(0,r)).toLowerCase(),r=n.trim(e.substr(r+1)),t&&(o[t]&&0<=i.indexOf(t)||(o[t]="set-cookie"===t?(o[t]||[]).concat([r]):o[t]?o[t]+", "+r:r))}),o}},{"./../utils":29}],27:[function(e,t,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},{}],28:[function(e,t,r){"use strict";var a=e("../env/data").version,o={};["object","boolean","number","function","string","symbol"].forEach(function(t,r){o[t]=function(e){return typeof e===t||"a"+(r<1?"n ":" ")+t}});var s={};o.transitional=function(o,n,r){function i(e,t){return"[Axios v"+a+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(e,t,r){if(!1===o)throw new Error(i(t," has been removed"+(n?" in "+n:"")));return n&&!s[t]&&(s[t]=!0,console.warn(i(t," has been deprecated since v"+n+" and will be removed in the near future"))),!o||o(e,t,r)}},t.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new TypeError("options must be an object");for(var o=Object.keys(e),n=o.length;0<n--;){var i=o[n],a=t[i];if(a){var s=e[i],s=void 0===s||a(s,i,e);if(!0!==s)throw new TypeError("option "+i+" must be "+s)}else if(!0!==r)throw Error("Unknown option "+i)}},validators:o}},{"../env/data":17}],29:[function(e,t,r){"use strict";var n=e("./helpers/bind"),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==o.call(e))return!1;e=Object.getPrototypeOf(e);return null===e||e===Object.prototype}function d(e){return"[object Function]"===o.call(e)}function u(e,t){if(null!=e)if(i(e="object"!=typeof e?[e]:e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}t.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:d,isStream:function(e){return s(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function r(){var o={};function e(e,t){l(o[t])&&l(e)?o[t]=r(o[t],e):l(e)?o[t]=r({},e):i(e)?o[t]=e.slice():o[t]=e}for(var t=0,n=arguments.length;t<n;t++)u(arguments[t],e);return o},extend:function(r,e,o){return u(e,function(e,t){r[t]=o&&"function"==typeof e?n(e,o):e}),r},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return e=65279===e.charCodeAt(0)?e.slice(1):e}}},{"./helpers/bind":18}],30:[function(e,r,t){!function(e,t){"use strict";"object"==typeof r&&"object"==typeof r.exports?r.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(O,e){"use strict";function m(e){return null!=e&&e===e.window}var t=[],r=Object.getPrototypeOf,s=t.slice,E=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},l=t.push,n=t.indexOf,o={},i=o.toString,h=o.hasOwnProperty,a=h.toString,d=a.call(Object),v={},S=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},C=O.document,u={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,r){var o,n,i=(r=r||C).createElement("script");if(i.text=e,t)for(o in u)(n=t[o]||t.getAttribute&&t.getAttribute(o))&&i.setAttribute(o,n);r.head.appendChild(i).parentNode.removeChild(i)}function p(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?o[i.call(e)]||"object":typeof e}var A=function(e,t){return new A.fn.init(e,t)};function c(e){var t=!!e&&"length"in e&&e.length,r=p(e);return!S(e)&&!m(e)&&("array"===r||0===t||"number"==typeof t&&0<t&&t-1 in e)}A.fn=A.prototype={jquery:"3.6.0",constructor:A,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=A.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return A.each(this,e)},map:function(r){return this.pushStack(A.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(A.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(A.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},A.extend=A.fn.extend=function(){var e,t,r,o,n,i=arguments[0]||{},a=1,s=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[a]||{},a++),"object"==typeof i||S(i)||(i={}),a===s&&(i=this,a--);a<s;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&i!==r&&(l&&r&&(A.isPlainObject(r)||(o=Array.isArray(r)))?(n=i[t],n=o&&!Array.isArray(n)?[]:o||A.isPlainObject(n)?n:{},o=!1,i[t]=A.extend(l,n,r)):void 0!==r&&(i[t]=r));return i},A.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==i.call(e))&&(!(e=r(e))||"function"==typeof(e=h.call(e,"constructor")&&e.constructor)&&a.call(e)===d)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,r){b(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,o=0;if(c(e))for(r=e.length;o<r&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(c(Object(e))?A.merge(t,"string"==typeof e?[e]:e):l.call(t,e)),t},inArray:function(e,t,r){return null==t?-1:n.call(t,e,r)},merge:function(e,t){for(var r=+t.length,o=0,n=e.length;o<r;o++)e[n++]=t[o];return e.length=n,e},grep:function(e,t,r){for(var o=[],n=0,i=e.length,a=!r;n<i;n++)!t(e[n],n)!=a&&o.push(e[n]);return o},map:function(e,t,r){var o,n,i=0,a=[];if(c(e))for(o=e.length;i<o;i++)null!=(n=t(e[i],i,r))&&a.push(n);else for(i in e)null!=(n=t(e[i],i,r))&&a.push(n);return E(a)},guid:1,support:v}),"function"==typeof Symbol&&(A.fn[Symbol.iterator]=t[Symbol.iterator]),A.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){o["[object "+t+"]"]=t.toLowerCase()});var f=function(r){function c(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function o(){O()}var e,f,b,i,n,g,p,m,y,l,d,O,C,a,A,E,s,u,h,_="sizzle"+ +new Date,v=r.document,N=0,S=0,M=le(),T=le(),w=le(),R=le(),P=function(e,t){return e===t&&(d=!0),0},L={}.hasOwnProperty,t=[],I=t.pop,x=t.push,k=t.push,G=t.slice,D=function(e,t){for(var r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1},U="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",V="[\\x20\\t\\r\\n\\f]",F="(?:\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+V+"*("+F+")(?:"+V+"*([*^$|!~]?=)"+V+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+V+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",q=new RegExp(V+"+","g"),W=new RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g"),H=new RegExp("^"+V+"*,"+V+"*"),Y=new RegExp("^"+V+"*([>+~]|"+V+")"+V+"*"),z=new RegExp(V+"|>"),X=new RegExp(B),K=new RegExp("^"+F+"$"),Q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),bool:new RegExp("^(?:"+U+")$","i"),needsContext:new RegExp("^"+V+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,ee=/^[^{]+\{\s*\[native \w/,te=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,re=/[+~]/,oe=new RegExp("\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\([^\\r\\n\\f])","g"),ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=ve(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{k.apply(t=G.call(v.childNodes),v.childNodes),t[v.childNodes.length].nodeType}catch(e){k={apply:t.length?function(e,t){x.apply(e,G.call(t))}:function(e,t){for(var r=e.length,o=0;e[r++]=t[o++];);e.length=r-1}}}function se(t,e,r,o){var n,i,a,s,l,d,u=e&&e.ownerDocument,c=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==c&&9!==c&&11!==c)return r;if(!o&&(O(e),e=e||C,A)){if(11!==c&&(s=te.exec(t)))if(d=s[1]){if(9===c){if(!(i=e.getElementById(d)))return r;if(i.id===d)return r.push(i),r}else if(u&&(i=u.getElementById(d))&&h(e,i)&&i.id===d)return r.push(i),r}else{if(s[2])return k.apply(r,e.getElementsByTagName(t)),r;if((d=s[3])&&f.getElementsByClassName&&e.getElementsByClassName)return k.apply(r,e.getElementsByClassName(d)),r}if(f.qsa&&!R[t+" "]&&(!E||!E.test(t))&&(1!==c||"object"!==e.nodeName.toLowerCase())){if(d=t,u=e,1===c&&(z.test(t)||Y.test(t))){for((u=re.test(t)&&me(e.parentNode)||e)===e&&f.scope||((a=e.getAttribute("id"))?a=a.replace(ne,ie):e.setAttribute("id",a=_)),n=(l=g(t)).length;n--;)l[n]=(a?"#"+a:":scope")+" "+he(l[n]);d=l.join(",")}try{return k.apply(r,u.querySelectorAll(d)),r}catch(e){R(t,!0)}finally{a===_&&e.removeAttribute("id")}}}return m(t.replace(W,"$1"),e,r,o)}function le(){var r=[];function o(e,t){return r.push(e+" ")>b.cacheLength&&delete o[r.shift()],o[e+" "]=t}return o}function de(e){return e[_]=!0,e}function ue(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var r=e.split("|"),o=r.length;o--;)b.attrHandle[r[o]]=t}function fe(e,t){var r=t&&e,o=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(o)return o;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pe(a){return de(function(i){return i=+i,de(function(e,t){for(var r,o=a([],e.length,i),n=o.length;n--;)e[r=o[n]]&&(e[r]=!(t[r]=e[r]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=se.support={},n=se.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!J.test(t||e&&e.nodeName||"HTML")},O=se.setDocument=function(e){var t,e=e?e.ownerDocument||e:v;return e!=C&&9===e.nodeType&&e.documentElement&&(a=(C=e).documentElement,A=!n(C),v!=C&&(t=C.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",o,!1):t.attachEvent&&t.attachEvent("onunload",o)),f.scope=ue(function(e){return a.appendChild(e).appendChild(C.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),f.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=ue(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=ee.test(C.getElementsByClassName),f.getById=ue(function(e){return a.appendChild(e).id=_,!C.getElementsByName||!C.getElementsByName(_).length}),f.getById?(b.filter.ID=function(e){var t=e.replace(oe,c);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&A){e=t.getElementById(e);return e?[e]:[]}}):(b.filter.ID=function(e){var t=e.replace(oe,c);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&A){var r,o,n,i=t.getElementById(e);if(i){if((r=i.getAttributeNode("id"))&&r.value===e)return[i];for(n=t.getElementsByName(e),o=0;i=n[o++];)if((r=i.getAttributeNode("id"))&&r.value===e)return[i]}return[]}}),b.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,o=[],n=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;r=i[n++];)1===r.nodeType&&o.push(r);return o},b.find.CLASS=f.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&A)return t.getElementsByClassName(e)},s=[],E=[],(f.qsa=ee.test(C.querySelectorAll))&&(ue(function(e){var t;a.appendChild(e).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&E.push("[*^$]="+V+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||E.push("\\["+V+"*(?:value|"+U+")"),e.querySelectorAll("[id~="+_+"-]").length||E.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||E.push("\\["+V+"*name"+V+"*="+V+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||E.push(":checked"),e.querySelectorAll("a#"+_+"+*").length||E.push(".#.+[+~]"),e.querySelectorAll("\\\f"),E.push("[\\r\\n\\f]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&E.push("name"+V+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&E.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&E.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),E.push(",.*:")})),(f.matchesSelector=ee.test(u=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ue(function(e){f.disconnectedMatch=u.call(e,"*"),u.call(e,"[s!='']:x"),s.push("!=",B)}),E=E.length&&new RegExp(E.join("|")),s=s.length&&new RegExp(s.join("|")),t=ee.test(a.compareDocumentPosition),h=t||ee.test(a.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(r.contains?r.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},P=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===r?e==C||e.ownerDocument==v&&h(v,e)?-1:t==C||t.ownerDocument==v&&h(v,t)?1:l?D(l,e)-D(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var r,o=0,n=e.parentNode,i=t.parentNode,a=[e],s=[t];if(!n||!i)return e==C?-1:t==C?1:n?-1:i?1:l?D(l,e)-D(l,t):0;if(n===i)return fe(e,t);for(r=e;r=r.parentNode;)a.unshift(r);for(r=t;r=r.parentNode;)s.unshift(r);for(;a[o]===s[o];)o++;return o?fe(a[o],s[o]):a[o]==v?-1:s[o]==v?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(O(e),f.matchesSelector&&A&&!R[t+" "]&&(!s||!s.test(t))&&(!E||!E.test(t)))try{var r=u.call(e,t);if(r||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){R(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&O(e),h(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&O(e);var r=b.attrHandle[t.toLowerCase()],r=r&&L.call(b.attrHandle,t.toLowerCase())?r(e,t,!A):void 0;return void 0!==r?r:f.attributes||!A?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(ne,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],o=0,n=0;if(d=!f.detectDuplicates,l=!f.sortStable&&e.slice(0),e.sort(P),d){for(;t=e[n++];)t===e[n]&&(o=r.push(n));for(;o--;)e.splice(r[o],1)}return l=null,e},i=se.getText=function(e){var t,r="",o=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[o++];)r+=i(t);return r},(b=se.selectors={cacheLength:50,createPseudo:de,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(oe,c),e[3]=(e[3]||e[4]||e[5]||"").replace(oe,c),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&X.test(r)&&(t=g(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(oe,c).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=M[e+" "];return t||(t=new RegExp("(^|"+V+")"+e+"("+V+"|$)"))&&M(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,r,o){return function(e){e=se.attr(e,t);return null==e?"!="===r:!r||(e+="","="===r?e===o:"!="===r?e!==o:"^="===r?o&&0===e.indexOf(o):"*="===r?o&&-1<e.indexOf(o):"$="===r?o&&e.slice(-o.length)===o:"~="===r?-1<(" "+e.replace(q," ")+" ").indexOf(o):"|="===r&&(e===o||e.slice(0,o.length+1)===o+"-"))}},CHILD:function(p,e,t,m,E){var h="nth"!==p.slice(0,3),v="last"!==p.slice(-4),S="of-type"===e;return 1===m&&0===E?function(e){return!!e.parentNode}:function(e,t,r){var o,n,i,a,s,l,d=h!=v?"nextSibling":"previousSibling",u=e.parentNode,c=S&&e.nodeName.toLowerCase(),f=!r&&!S,g=!1;if(u){if(h){for(;d;){for(a=e;a=a[d];)if(S?a.nodeName.toLowerCase()===c:1===a.nodeType)return!1;l=d="only"===p&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&f){for(g=(s=(o=(n=(i=(a=u)[_]||(a[_]={}))[a.uniqueID]||(i[a.uniqueID]={}))[p]||[])[0]===N&&o[1])&&o[2],a=s&&u.childNodes[s];a=++s&&a&&a[d]||(g=s=0)||l.pop();)if(1===a.nodeType&&++g&&a===e){n[p]=[N,s,g];break}}else if(!1===(g=f?s=(o=(n=(i=(a=e)[_]||(a[_]={}))[a.uniqueID]||(i[a.uniqueID]={}))[p]||[])[0]===N&&o[1]:g))for(;(a=++s&&a&&a[d]||(g=s=0)||l.pop())&&((S?a.nodeName.toLowerCase()!==c:1!==a.nodeType)||!++g||(f&&((n=(i=a[_]||(a[_]={}))[a.uniqueID]||(i[a.uniqueID]={}))[p]=[N,g]),a!==e)););return(g-=E)===m||g%m==0&&0<=g/m}}},PSEUDO:function(e,i){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[_]?a(i):1<a.length?(t=[e,e,"",i],b.setFilters.hasOwnProperty(e.toLowerCase())?de(function(e,t){for(var r,o=a(e,i),n=o.length;n--;)e[r=D(e,o[n])]=!(t[r]=o[n])}):function(e){return a(e,0,t)}):a}},pseudos:{not:de(function(e){var o=[],n=[],s=p(e.replace(W,"$1"));return s[_]?de(function(e,t,r,o){for(var n,i=s(e,null,o,[]),a=e.length;a--;)(n=i[a])&&(e[a]=!(t[a]=n))}):function(e,t,r){return o[0]=e,s(o,null,r,n),o[0]=null,!n.pop()}}),has:de(function(t){return function(e){return 0<se(t,e).length}}),contains:de(function(t){return t=t.replace(oe,c),function(e){return-1<(e.textContent||i(e)).indexOf(t)}}),lang:de(function(r){return K.test(r||"")||se.error("unsupported lang: "+r),r=r.replace(oe,c).toLowerCase(),function(e){var t;do{if(t=A?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===r||0===t.indexOf(r+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,r){return[r<0?r+t:r]}),even:pe(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:pe(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:pe(function(e,t,r){for(var o=r<0?r+t:t<r?t:r;0<=--o;)e.push(o);return e}),gt:pe(function(e,t,r){for(var o=r<0?r+t:r;++o<t;)e.push(o);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(r){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===r}}(e);function Ee(){}function he(e){for(var t=0,r=e.length,o="";t<r;t++)o+=e[t].value;return o}function ve(a,e,t){var s=e.dir,l=e.next,d=l||s,u=t&&"parentNode"===d,c=S++;return e.first?function(e,t,r){for(;e=e[s];)if(1===e.nodeType||u)return a(e,t,r);return!1}:function(e,t,r){var o,n,i=[N,c];if(r){for(;e=e[s];)if((1===e.nodeType||u)&&a(e,t,r))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(o=(n=e[_]||(e[_]={}))[e.uniqueID]||(n[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[s]||e;else{if((n=o[d])&&n[0]===N&&n[1]===c)return i[2]=n[2];if((o[d]=i)[2]=a(e,t,r))return!0}return!1}}function Se(n){return 1<n.length?function(e,t,r){for(var o=n.length;o--;)if(!n[o](e,t,r))return!1;return!0}:n[0]}function be(e,t,r,o,n){for(var i,a=[],s=0,l=e.length,d=null!=t;s<l;s++)(i=e[s])&&(r&&!r(i,o,n)||(a.push(i),d&&t.push(s)));return a}function ye(g,p,m,E,h,e){return E&&!E[_]&&(E=ye(E)),h&&!h[_]&&(h=ye(h,e)),de(function(e,t,r,o){var n,i,a,s=[],l=[],d=t.length,u=e||function(e,t,r){for(var o=0,n=t.length;o<n;o++)se(e,t[o],r);return r}(p||"*",r.nodeType?[r]:r,[]),c=!g||!e&&p?u:be(u,s,g,r,o),f=m?h||(e?g:d||E)?[]:t:c;if(m&&m(c,f,r,o),E)for(n=be(f,l),E(n,[],r,o),i=n.length;i--;)(a=n[i])&&(f[l[i]]=!(c[l[i]]=a));if(e){if(h||g){if(h){for(n=[],i=f.length;i--;)(a=f[i])&&n.push(c[i]=a);h(null,f=[],n,o)}for(i=f.length;i--;)(a=f[i])&&-1<(n=h?D(e,a):s[i])&&(e[n]=!(t[n]=a))}}else f=be(f===t?f.splice(d,f.length):f),h?h(null,t,f,o):k.apply(t,f)})}function Oe(E,h){function e(e,t,r,o,n){var i,a,s,l=0,d="0",u=e&&[],c=[],f=y,g=e||S&&b.find.TAG("*",n),p=N+=null==f?1:Math.random()||.1,m=g.length;for(n&&(y=t==C||t||n);d!==m&&null!=(i=g[d]);d++){if(S&&i){for(a=0,t||i.ownerDocument==C||(O(i),r=!A);s=E[a++];)if(s(i,t||C,r)){o.push(i);break}n&&(N=p)}v&&((i=!s&&i)&&l--,e&&u.push(i))}if(l+=d,v&&d!==l){for(a=0;s=h[a++];)s(u,c,t,r);if(e){if(0<l)for(;d--;)u[d]||c[d]||(c[d]=I.call(o));c=be(c)}k.apply(o,c),n&&!e&&0<c.length&&1<l+h.length&&se.uniqueSort(o)}return n&&(N=p,y=f),u}var v=0<h.length,S=0<E.length;return v?de(e):e}return Ee.prototype=b.filters=b.pseudos,b.setFilters=new Ee,g=se.tokenize=function(e,t){var r,o,n,i,a,s,l,d=T[e+" "];if(d)return t?0:d.slice(0);for(a=e,s=[],l=b.preFilter;a;){for(i in r&&!(o=H.exec(a))||(o&&(a=a.slice(o[0].length)||a),s.push(n=[])),r=!1,(o=Y.exec(a))&&(r=o.shift(),n.push({value:r,type:o[0].replace(W," ")}),a=a.slice(r.length)),b.filter)!(o=Q[i].exec(a))||l[i]&&!(o=l[i](o))||(r=o.shift(),n.push({value:r,type:i,matches:o}),a=a.slice(r.length));if(!r)break}return t?a.length:a?se.error(e):T(e,s).slice(0)},p=se.compile=function(e,t){var r,o=[],n=[],i=w[e+" "];if(!i){for(r=(t=t||g(e)).length;r--;)((i=function e(t){for(var o,r,n,i=t.length,a=b.relative[t[0].type],s=a||b.relative[" "],l=a?1:0,d=ve(function(e){return e===o},s,!0),u=ve(function(e){return-1<D(o,e)},s,!0),c=[function(e,t,r){return r=!a&&(r||t!==y)||((o=t).nodeType?d:u)(e,t,r),o=null,r}];l<i;l++)if(r=b.relative[t[l].type])c=[ve(Se(c),r)];else{if((r=b.filter[t[l].type].apply(null,t[l].matches))[_]){for(n=++l;n<i&&!b.relative[t[n].type];n++);return ye(1<l&&Se(c),1<l&&he(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(W,"$1"),r,l<n&&e(t.slice(l,n)),n<i&&e(t=t.slice(n)),n<i&&he(t))}c.push(r)}return Se(c)}(t[r]))[_]?o:n).push(i);(i=w(e,Oe(n,o))).selector=e}return i},m=se.select=function(e,t,r,o){var n,i,a,s,l,d="function"==typeof e&&e,u=!o&&g(e=d.selector||e);if(r=r||[],1===u.length){if(2<(i=u[0]=u[0].slice(0)).length&&"ID"===(a=i[0]).type&&9===t.nodeType&&A&&b.relative[i[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(oe,c),t)||[])[0]))return r;d&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(n=Q.needsContext.test(e)?0:i.length;n--&&(a=i[n],!b.relative[s=a.type]);)if((l=b.find[s])&&(o=l(a.matches[0].replace(oe,c),re.test(i[0].type)&&me(t.parentNode)||t))){if(i.splice(n,1),!(e=o.length&&he(i)))return k.apply(r,o),r;break}}return(d||p(e,u))(o,t,!A,r,!t||re.test(e)&&me(t.parentNode)||t),r},f.sortStable=_.split("").sort(P).join("")===_,f.detectDuplicates=!!d,O(),f.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||ce(U,function(e,t,r){if(!r)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),se}(O);A.find=f,A.expr=f.selectors,A.expr[":"]=A.expr.pseudos,A.uniqueSort=A.unique=f.uniqueSort,A.text=f.getText,A.isXMLDoc=f.isXML,A.contains=f.contains,A.escapeSelector=f.escape;function g(e,t,r){for(var o=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&A(e).is(r))break;o.push(e)}return o}function y(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}var _=A.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function T(e,r,o){return S(r)?A.grep(e,function(e,t){return!!r.call(e,t,e)!==o}):r.nodeType?A.grep(e,function(e){return e===r!==o}):"string"!=typeof r?A.grep(e,function(e){return-1<n.call(r,e)!==o}):A.filter(r,e,o)}A.filter=function(e,t,r){var o=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===o.nodeType?A.find.matchesSelector(o,e)?[o]:[]:A.find.matches(e,A.grep(t,function(e){return 1===e.nodeType}))},A.fn.extend({find:function(e){var t,r,o=this.length,n=this;if("string"!=typeof e)return this.pushStack(A(e).filter(function(){for(t=0;t<o;t++)if(A.contains(n[t],this))return!0}));for(r=this.pushStack([]),t=0;t<o;t++)A.find(e,n[t],r);return 1<o?A.uniqueSort(r):r},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&_.test(e)?A(e):e||[],!1).length}});var w=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(A.fn.init=function(e,t,r){if(!e)return this;if(r=r||R,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):S(e)?void 0!==r.ready?r.ready(e):e(A):A.makeArray(e,this);if(!(o="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:w.exec(e))||!o[1]&&t)return(!t||t.jquery?t||r:this.constructor(t)).find(e);if(o[1]){if(t=t instanceof A?t[0]:t,A.merge(this,A.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),M.test(o[1])&&A.isPlainObject(t))for(var o in t)S(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}return(e=C.getElementById(o[2]))&&(this[0]=e,this.length=1),this}).prototype=A.fn;var R=A(C),P=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}A.fn.extend({has:function(e){var t=A(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(A.contains(this,t[e]))return!0})},closest:function(e,t){var r,o=0,n=this.length,i=[],a="string"!=typeof e&&A(e);if(!_.test(e))for(;o<n;o++)for(r=this[o];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?-1<a.index(r):1===r.nodeType&&A.find.matchesSelector(r,e))){i.push(r);break}return this.pushStack(1<i.length?A.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?n.call(A(e),this[0]):n.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(A.uniqueSort(A.merge(this.get(),A(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),A.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return g(e,"parentNode")},parentsUntil:function(e,t,r){return g(e,"parentNode",r)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return g(e,"nextSibling")},prevAll:function(e){return g(e,"previousSibling")},nextUntil:function(e,t,r){return g(e,"nextSibling",r)},prevUntil:function(e,t,r){return g(e,"previousSibling",r)},siblings:function(e){return y((e.parentNode||{}).firstChild,e)},children:function(e){return y(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(N(e,"template")&&(e=e.content||e),A.merge([],e.childNodes))}},function(o,n){A.fn[o]=function(e,t){var r=A.map(this,n,e);return(t="Until"!==o.slice(-5)?e:t)&&"string"==typeof t&&(r=A.filter(t,r)),1<this.length&&(L[o]||A.uniqueSort(r),P.test(o)&&r.reverse()),this.pushStack(r)}});var x=/[^\x20\t\r\n\f]+/g;function k(e){return e}function G(e){throw e}function D(e,t,r,o){var n;try{e&&S(n=e.promise)?n.call(e).done(t).fail(r):e&&S(n=e.then)?n.call(e,t,r):t.apply(void 0,[e].slice(o))}catch(e){r.apply(void 0,[e])}}A.Callbacks=function(o){var e,r;o="string"==typeof o?(e=o,r={},A.each(e.match(x)||[],function(e,t){r[t]=!0}),r):A.extend({},o);function n(){for(s=s||o.once,a=i=!0;d.length;u=-1)for(t=d.shift();++u<l.length;)!1===l[u].apply(t[0],t[1])&&o.stopOnFalse&&(u=l.length,t=!1);o.memory||(t=!1),i=!1,s&&(l=t?[]:"")}var i,t,a,s,l=[],d=[],u=-1,c={add:function(){return l&&(t&&!i&&(u=l.length-1,d.push(t)),function r(e){A.each(e,function(e,t){S(t)?o.unique&&c.has(t)||l.push(t):t&&t.length&&"string"!==p(t)&&r(t)})}(arguments),t&&!i&&n()),this},remove:function(){return A.each(arguments,function(e,t){for(var r;-1<(r=A.inArray(t,l,r));)l.splice(r,1),r<=u&&u--}),this},has:function(e){return e?-1<A.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return s=d=[],l=t="",this},disabled:function(){return!l},lock:function(){return s=d=[],t||i||(l=t=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],d.push(t),i||n()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!a}};return c},A.extend({Deferred:function(e){var i=[["notify","progress",A.Callbacks("memory"),A.Callbacks("memory"),2],["resolve","done",A.Callbacks("once memory"),A.Callbacks("once memory"),0,"resolved"],["reject","fail",A.Callbacks("once memory"),A.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var n=arguments;return A.Deferred(function(o){A.each(i,function(e,t){var r=S(n[t[4]])&&n[t[4]];s[t[1]](function(){var e=r&&r.apply(this,arguments);e&&S(e.promise)?e.promise().progress(o.notify).done(o.resolve).fail(o.reject):o[t[0]+"With"](this,r?[e]:arguments)})}),n=null}).promise()},then:function(t,r,o){var l=0;function d(n,i,a,s){return function(){function e(){var e,t;if(!(n<l)){if((e=a.apply(r,o))===i.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,S(t)?s?t.call(e,d(l,i,k,s),d(l,i,G,s)):(l++,t.call(e,d(l,i,k,s),d(l,i,G,s),d(l,i,k,i.notifyWith))):(a!==k&&(r=void 0,o=[e]),(s||i.resolveWith)(r,o))}}var r=this,o=arguments,t=s?e:function(){try{e()}catch(e){A.Deferred.exceptionHook&&A.Deferred.exceptionHook(e,t.stackTrace),l<=n+1&&(a!==G&&(r=void 0,o=[e]),i.rejectWith(r,o))}};n?t():(A.Deferred.getStackHook&&(t.stackTrace=A.Deferred.getStackHook()),O.setTimeout(t))}}return A.Deferred(function(e){i[0][3].add(d(0,e,S(o)?o:k,e.notifyWith)),i[1][3].add(d(0,e,S(t)?t:k)),i[2][3].add(d(0,e,S(r)?r:G))}).promise()},promise:function(e){return null!=e?A.extend(e,a):a}},s={};return A.each(i,function(e,t){var r=t[2],o=t[5];a[t[1]]=r.add,o&&r.add(function(){n=o},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),r.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=r.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){function t(t){return function(e){n[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--r||a.resolveWith(n,i)}}var r=arguments.length,o=r,n=Array(o),i=s.call(arguments),a=A.Deferred();if(r<=1&&(D(e,a.done(t(o)).resolve,a.reject,!r),"pending"===a.state()||S(i[o]&&i[o].then)))return a.then();for(;o--;)D(i[o],t(o),a.reject);return a.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;A.Deferred.exceptionHook=function(e,t){O.console&&O.console.warn&&e&&U.test(e.name)&&O.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},A.readyException=function(e){O.setTimeout(function(){throw e})};var V=A.Deferred();function F(){C.removeEventListener("DOMContentLoaded",F),O.removeEventListener("load",F),A.ready()}A.fn.ready=function(e){return V.then(e).catch(function(e){A.readyException(e)}),this},A.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--A.readyWait:A.isReady)||(A.isReady=!0)!==e&&0<--A.readyWait||V.resolveWith(C,[A])}}),A.ready.then=V.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?O.setTimeout(A.ready):(C.addEventListener("DOMContentLoaded",F),O.addEventListener("load",F));var j=function(e,t,r,o,n,i,a){var s=0,l=e.length,d=null==r;if("object"===p(r))for(s in n=!0,r)j(e,t,s,r[s],!0,i,a);else if(void 0!==o&&(n=!0,S(o)||(a=!0),t=d?a?(t.call(e,o),null):(d=t,function(e,t,r){return d.call(A(e),r)}):t))for(;s<l;s++)t(e[s],r,a?o:o.call(e[s],s,t(e[s],r)));return n?e:d?t.call(e):l?t(e[0],r):i},B=/^-ms-/,q=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function H(e){return e.replace(B,"ms-").replace(q,W)}function Y(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function z(){this.expando=A.expando+z.uid++}z.uid=1,z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var o,n=this.cache(e);if("string"==typeof t)n[H(t)]=r;else for(o in t)n[H(o)]=t[o];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][H(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,o=e[this.expando];if(void 0!==o){if(void 0!==t){r=(t=Array.isArray(t)?t.map(H):(t=H(t))in o?[t]:t.match(x)||[]).length;for(;r--;)delete o[t[r]]}void 0!==t&&!A.isEmptyObject(o)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!A.isEmptyObject(e)}};var X=new z,K=new z,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function $(e,t,r){var o,n;if(void 0===r&&1===e.nodeType)if(o="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(o))){try{r="true"===(n=r)||"false"!==n&&("null"===n?null:n===+n+""?+n:Q.test(n)?JSON.parse(n):n)}catch(e){}K.set(e,t,r)}else r=void 0;return r}A.extend({hasData:function(e){return K.hasData(e)||X.hasData(e)},data:function(e,t,r){return K.access(e,t,r)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,r){return X.access(e,t,r)},_removeData:function(e,t){X.remove(e,t)}}),A.fn.extend({data:function(r,e){var t,o,n,i=this[0],a=i&&i.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){K.set(this,r)}):j(this,function(e){var t;return i&&void 0===e?void 0!==(t=K.get(i,r))||void 0!==(t=$(i,r))?t:void 0:void this.each(function(){K.set(this,r,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(n=K.get(i),1===i.nodeType&&!X.get(i,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(o=a[t].name).indexOf("data-")&&(o=H(o.slice(5)),$(i,o,n[o]));X.set(i,"hasDataAttrs",!0)}return n},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),A.extend({queue:function(e,t,r){var o;if(e)return o=X.get(e,t=(t||"fx")+"queue"),r&&(!o||Array.isArray(r)?o=X.access(e,t,A.makeArray(r)):o.push(r)),o||[]},dequeue:function(e,t){var r=A.queue(e,t=t||"fx"),o=r.length,n=r.shift(),i=A._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),o--),n&&("fx"===t&&r.unshift("inprogress"),delete i.stop,n.call(e,function(){A.dequeue(e,t)},i)),!o&&i&&i.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return X.get(e,r)||X.access(e,r,{empty:A.Callbacks("once memory").add(function(){X.remove(e,[t+"queue",r])})})}}),A.fn.extend({queue:function(t,r){var e=2;return"string"!=typeof t&&(r=t,t="fx",e--),arguments.length<e?A.queue(this[0],t):void 0===r?this:this.each(function(){var e=A.queue(this,t,r);A._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&A.dequeue(this,t)})},dequeue:function(e){return this.each(function(){A.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function r(){--n||i.resolveWith(a,[a])}var o,n=1,i=A.Deferred(),a=this,s=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(o=X.get(a[s],e+"queueHooks"))&&o.empty&&(n++,o.empty.add(r));return r(),i.promise(t)}});var Z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],re=C.documentElement,oe=function(e){return A.contains(e.ownerDocument,e)},ne={composed:!0};re.getRootNode&&(oe=function(e){return A.contains(e.ownerDocument,e)||e.getRootNode(ne)===e.ownerDocument});var ie=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===A.css(e,"display")};function ae(e,t,r,o){var n,i,a=20,s=o?function(){return o.cur()}:function(){return A.css(e,t,"")},l=s(),d=r&&r[3]||(A.cssNumber[t]?"":"px"),u=e.nodeType&&(A.cssNumber[t]||"px"!==d&&+l)&&ee.exec(A.css(e,t));if(u&&u[3]!==d){for(d=d||u[3],u=+(l/=2)||1;a--;)A.style(e,t,u+d),(1-i)*(1-(i=s()/l||.5))<=0&&(a=0),u/=i;A.style(e,t,(u*=2)+d),r=r||[]}return r&&(u=+u||+l||0,n=r[1]?u+(r[1]+1)*r[2]:+r[2],o&&(o.unit=d,o.start=u,o.end=n)),n}var se={};function le(e,t){for(var r,o,n,i,a,s=[],l=0,d=e.length;l<d;l++)(o=e[l]).style&&(r=o.style.display,t?("none"===r&&(s[l]=X.get(o,"display")||null,s[l]||(o.style.display="")),""===o.style.display&&ie(o)&&(s[l]=(a=i=void 0,i=(n=o).ownerDocument,a=n.nodeName,(n=se[a])||(i=i.body.appendChild(i.createElement(a)),n=A.css(i,"display"),i.parentNode.removeChild(i),se[a]=n="none"===n?"block":n)))):"none"!==r&&(s[l]="none",X.set(o,"display",r)));for(l=0;l<d;l++)null!=s[l]&&(e[l].style.display=s[l]);return e}A.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ie(this)?A(this).show():A(this).hide()})}});var de=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ce=/^$|^module$|\/(?:java|ecma)script/i;zt=C.createDocumentFragment().appendChild(C.createElement("div")),(f=C.createElement("input")).setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),zt.appendChild(f),v.checkClone=zt.cloneNode(!0).cloneNode(!0).lastChild.checked,zt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!zt.cloneNode(!0).lastChild.defaultValue,zt.innerHTML="<option></option>",v.option=!!zt.lastChild;var fe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&N(e,t)?A.merge([e],r):r}function pe(e,t){for(var r=0,o=e.length;r<o;r++)X.set(e[r],"globalEval",!t||X.get(t[r],"globalEval"))}fe.tbody=fe.tfoot=fe.colgroup=fe.caption=fe.thead,fe.th=fe.td,v.option||(fe.optgroup=fe.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function Ee(e,t,r,o,n){for(var i,a,s,l,d,u=t.createDocumentFragment(),c=[],f=0,g=e.length;f<g;f++)if((i=e[f])||0===i)if("object"===p(i))A.merge(c,i.nodeType?[i]:i);else if(me.test(i)){for(a=a||u.appendChild(t.createElement("div")),s=(ue.exec(i)||["",""])[1].toLowerCase(),s=fe[s]||fe._default,a.innerHTML=s[1]+A.htmlPrefilter(i)+s[2],d=s[0];d--;)a=a.lastChild;A.merge(c,a.childNodes),(a=u.firstChild).textContent=""}else c.push(t.createTextNode(i));for(u.textContent="",f=0;i=c[f++];)if(o&&-1<A.inArray(i,o))n&&n.push(i);else if(l=oe(i),a=ge(u.appendChild(i),"script"),l&&pe(a),r)for(d=0;i=a[d++];)ce.test(i.type||"")&&r.push(i);return u}var he=/^([^.]*)(?:\.(.+)|)/;function ve(){return!0}function Se(){return!1}function be(e,t){return e===function(){try{return C.activeElement}catch(e){}}()==("focus"===t)}function ye(e,t,r,o,n,i){var a,s;if("object"==typeof t){for(s in"string"!=typeof r&&(o=o||r,r=void 0),t)ye(e,s,r,o,t[s],i);return e}if(null==o&&null==n?(n=r,o=r=void 0):null==n&&("string"==typeof r?(n=o,o=void 0):(n=o,o=r,r=void 0)),!1===n)n=Se;else if(!n)return e;return 1===i&&(a=n,(n=function(e){return A().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=A.guid++)),e.each(function(){A.event.add(this,t,n,o,r)})}function Oe(e,n,i){i?(X.set(e,n,!1),A.event.add(e,n,{namespace:!1,handler:function(e){var t,r,o=X.get(this,n);if(1&e.isTrigger&&this[n]){if(o.length)(A.event.special[n]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),X.set(this,n,o),t=i(this,n),this[n](),o!==(r=X.get(this,n))||t?X.set(this,n,!1):r={},o!==r)return e.stopImmediatePropagation(),e.preventDefault(),r&&r.value}else o.length&&(X.set(this,n,{value:A.event.trigger(A.extend(o[0],A.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,n)&&A.event.add(e,n,ve)}A.event={global:{},add:function(t,e,r,o,n){var i,a,s,l,d,u,c,f,g,p=X.get(t);if(Y(t))for(r.handler&&(r=(i=r).handler,n=i.selector),n&&A.find.matchesSelector(re,n),r.guid||(r.guid=A.guid++),(s=p.events)||(s=p.events=Object.create(null)),(a=p.handle)||(a=p.handle=function(e){return void 0!==A&&A.event.triggered!==e.type?A.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(x)||[""]).length;l--;)c=g=(d=he.exec(e[l])||[])[1],f=(d[2]||"").split(".").sort(),c&&(u=A.event.special[c]||{},c=(n?u.delegateType:u.bindType)||c,u=A.event.special[c]||{},d=A.extend({type:c,origType:g,data:o,handler:r,guid:r.guid,selector:n,needsContext:n&&A.expr.match.needsContext.test(n),namespace:f.join(".")},i),(g=s[c])||((g=s[c]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,o,f,a)||t.addEventListener&&t.addEventListener(c,a)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=r.guid)),n?g.splice(g.delegateCount++,0,d):g.push(d),A.event.global[c]=!0)},remove:function(e,t,r,o,n){var i,a,s,l,d,u,c,f,g,p,m,E=X.hasData(e)&&X.get(e);if(E&&(l=E.events)){for(d=(t=(t||"").match(x)||[""]).length;d--;)if(g=m=(s=he.exec(t[d])||[])[1],p=(s[2]||"").split(".").sort(),g){for(c=A.event.special[g]||{},f=l[g=(o?c.delegateType:c.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=f.length;i--;)u=f[i],!n&&m!==u.origType||r&&r.guid!==u.guid||s&&!s.test(u.namespace)||o&&o!==u.selector&&("**"!==o||!u.selector)||(f.splice(i,1),u.selector&&f.delegateCount--,c.remove&&c.remove.call(e,u));a&&!f.length&&(c.teardown&&!1!==c.teardown.call(e,p,E.handle)||A.removeEvent(e,g,E.handle),delete l[g])}else for(g in l)A.event.remove(e,g+t[d],r,o,!0);A.isEmptyObject(l)&&X.remove(e,"handle events")}},dispatch:function(e){var t,r,o,n,i,a=new Array(arguments.length),s=A.event.fix(e),l=(X.get(this,"events")||Object.create(null))[s.type]||[],e=A.event.special[s.type]||{};for(a[0]=s,t=1;t<arguments.length;t++)a[t]=arguments[t];if(s.delegateTarget=this,!e.preDispatch||!1!==e.preDispatch.call(this,s)){for(i=A.event.handlers.call(this,s,l),t=0;(o=i[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,r=0;(n=o.handlers[r++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==n.namespace&&!s.rnamespace.test(n.namespace)||(s.handleObj=n,s.data=n.data,void 0!==(n=((A.event.special[n.origType]||{}).handle||n.handler).apply(o.elem,a))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,s),s.result}},handlers:function(e,t){var r,o,n,i,a,s=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&1<=e.button))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(i=[],a={},r=0;r<l;r++)void 0===a[n=(o=t[r]).selector+" "]&&(a[n]=o.needsContext?-1<A(n,this).index(d):A.find(n,this,null,[d]).length),a[n]&&i.push(o);i.length&&s.push({elem:d,handlers:i})}return d=this,l<t.length&&s.push({elem:d,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(A.Event.prototype,t,{enumerable:!0,configurable:!0,get:S(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[A.expando]?e:new A.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return de.test(e.type)&&e.click&&N(e,"input")&&Oe(e,"click",ve),!1},trigger:function(e){e=this||e;return de.test(e.type)&&e.click&&N(e,"input")&&Oe(e,"click"),!0},_default:function(e){e=e.target;return de.test(e.type)&&e.click&&N(e,"input")&&X.get(e,"click")||N(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},A.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},A.Event=function(e,t){if(!(this instanceof A.Event))return new A.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ve:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&A.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[A.expando]=!0},A.Event.prototype={constructor:A.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ve,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ve,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ve,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},A.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},A.event.addProp),A.each({focus:"focusin",blur:"focusout"},function(e,t){A.event.special[e]={setup:function(){return Oe(this,e,be),!1},trigger:function(){return Oe(this,e),!0},_default:function(){return!0},delegateType:t}}),A.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){A.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,r=e.relatedTarget,o=e.handleObj;return r&&(r===this||A.contains(this,r))||(e.type=o.origType,t=o.handler.apply(this,arguments),e.type=n),t}}}),A.fn.extend({on:function(e,t,r,o){return ye(this,e,t,r,o)},one:function(e,t,r,o){return ye(this,e,t,r,o,1)},off:function(e,t,r){var o,n;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,A(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Se),this.each(function(){A.event.remove(this,e,r,t)});for(n in e)this.off(n,t,e[n]);return this}});var Ce=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&A(e).children("tbody")[0]||e}function Me(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Te(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function we(e,t){var r,o,n,i;if(1===t.nodeType){if(X.hasData(e)&&(i=X.get(e).events))for(n in X.remove(t,"handle events"),i)for(r=0,o=i[n].length;r<o;r++)A.event.add(t,n,i[n][r]);K.hasData(e)&&(e=K.access(e),e=A.extend({},e),K.set(t,e))}}function Re(r,o,n,i){o=E(o);var e,t,a,s,l,d,u=0,c=r.length,f=c-1,g=o[0],p=S(g);if(p||1<c&&"string"==typeof g&&!v.checkClone&&Ae.test(g))return r.each(function(e){var t=r.eq(e);p&&(o[0]=g.call(this,e,t.html())),Re(t,o,n,i)});if(c&&(t=(e=Ee(o,r[0].ownerDocument,!1,r,i)).firstChild,1===e.childNodes.length&&(e=t),t||i)){for(s=(a=A.map(ge(e,"script"),Me)).length;u<c;u++)l=e,u!==f&&(l=A.clone(l,!0,!0),s&&A.merge(a,ge(l,"script"))),n.call(r[u],l,u);if(s)for(d=a[a.length-1].ownerDocument,A.map(a,Te),u=0;u<s;u++)l=a[u],ce.test(l.type||"")&&!X.access(l,"globalEval")&&A.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?A._evalUrl&&!l.noModule&&A._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},d):b(l.textContent.replace(_e,""),l,d))}return r}function Pe(e,t,r){for(var o,n=t?A.filter(t,e):e,i=0;null!=(o=n[i]);i++)r||1!==o.nodeType||A.cleanData(ge(o)),o.parentNode&&(r&&oe(o)&&pe(ge(o,"script")),o.parentNode.removeChild(o));return e}A.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var o,n,i,a,s,l,d,u=e.cloneNode(!0),c=oe(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||A.isXMLDoc(e)))for(a=ge(u),o=0,n=(i=ge(e)).length;o<n;o++)s=i[o],l=a[o],d=void 0,"input"===(d=l.nodeName.toLowerCase())&&de.test(s.type)?l.checked=s.checked:"input"!==d&&"textarea"!==d||(l.defaultValue=s.defaultValue);if(t)if(r)for(i=i||ge(e),a=a||ge(u),o=0,n=i.length;o<n;o++)we(i[o],a[o]);else we(e,u);return 0<(a=ge(u,"script")).length&&pe(a,!c&&ge(e,"script")),u},cleanData:function(e){for(var t,r,o,n=A.event.special,i=0;void 0!==(r=e[i]);i++)if(Y(r)){if(t=r[X.expando]){if(t.events)for(o in t.events)n[o]?A.event.remove(r,o):A.removeEvent(r,o,t.handle);r[X.expando]=void 0}r[K.expando]&&(r[K.expando]=void 0)}}}),A.fn.extend({detach:function(e){return Pe(this,e,!0)},remove:function(e){return Pe(this,e)},text:function(e){return j(this,function(e){return void 0===e?A.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Re(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return Re(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Ne(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Re(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(A.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return A.clone(this,e,t)})},html:function(e){return j(this,function(e){var t=this[0]||{},r=0,o=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ce.test(e)&&!fe[(ue.exec(e)||["",""])[1].toLowerCase()]){e=A.htmlPrefilter(e);try{for(;r<o;r++)1===(t=this[r]||{}).nodeType&&(A.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var r=[];return Re(this,arguments,function(e){var t=this.parentNode;A.inArray(this,r)<0&&(A.cleanData(ge(this)),t&&t.replaceChild(e,this))},r)}}),A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){A.fn[e]=function(e){for(var t,r=[],o=A(e),n=o.length-1,i=0;i<=n;i++)t=i===n?this:this.clone(!0),A(o[i])[a](t),l.apply(r,t.get());return this.pushStack(r)}});function Le(e,t,r){var o,n={};for(o in t)n[o]=e.style[o],e.style[o]=t[o];for(o in r=r.call(e),t)e.style[o]=n[o];return r}var Ie,xe,ke,Ge,De,Ue,Ve,Fe,je=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),Be=function(e){var t=e.ownerDocument.defaultView;return(t=!t||!t.opener?O:t).getComputedStyle(e)},qe=new RegExp(te.join("|"),"i");function We(){var e;Fe&&(Ve.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Fe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(Ve).appendChild(Fe),e=O.getComputedStyle(Fe),Ie="1%"!==e.top,Ue=12===He(e.marginLeft),Fe.style.right="60%",Ge=36===He(e.right),xe=36===He(e.width),Fe.style.position="absolute",ke=12===He(Fe.offsetWidth/3),re.removeChild(Ve),Fe=null)}function He(e){return Math.round(parseFloat(e))}function Ye(e,t,r){var o,n,i=e.style;return(r=r||Be(e))&&(""!==(n=r.getPropertyValue(t)||r[t])||oe(e)||(n=A.style(e,t)),!v.pixelBoxStyles()&&je.test(n)&&qe.test(t)&&(o=i.width,e=i.minWidth,t=i.maxWidth,i.minWidth=i.maxWidth=i.width=n,n=r.width,i.width=o,i.minWidth=e,i.maxWidth=t)),void 0!==n?n+"":n}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ve=C.createElement("div"),(Fe=C.createElement("div")).style&&(Fe.style.backgroundClip="content-box",Fe.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Fe.style.backgroundClip,A.extend(v,{boxSizingReliable:function(){return We(),xe},pixelBoxStyles:function(){return We(),Ge},pixelPosition:function(){return We(),Ie},reliableMarginLeft:function(){return We(),Ue},scrollboxSize:function(){return We(),ke},reliableTrDimensions:function(){var e,t,r;return null==De&&(e=C.createElement("table"),t=C.createElement("tr"),r=C.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",re.appendChild(e).appendChild(t).appendChild(r),r=O.getComputedStyle(t),De=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),De}}));var Xe=["Webkit","Moz","ms"],Ke=C.createElement("div").style,Qe={};function Je(e){var t=A.cssProps[e]||Qe[e];return t||(e in Ke?e:Qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=Xe.length;r--;)if((e=Xe[r]+t)in Ke)return e}(e)||e)}var $e=/^(none|table(?!-c[ea]).+)/,Ze=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,r){var o=ee.exec(t);return o?Math.max(0,o[2]-(r||0))+(o[3]||"px"):t}function ot(e,t,r,o,n,i){var a="width"===t?1:0,s=0,l=0;if(r===(o?"border":"content"))return 0;for(;a<4;a+=2)"margin"===r&&(l+=A.css(e,r+te[a],!0,n)),o?("content"===r&&(l-=A.css(e,"padding"+te[a],!0,n)),"margin"!==r&&(l-=A.css(e,"border"+te[a]+"Width",!0,n))):(l+=A.css(e,"padding"+te[a],!0,n),"padding"!==r?l+=A.css(e,"border"+te[a]+"Width",!0,n):s+=A.css(e,"border"+te[a]+"Width",!0,n));return!o&&0<=i&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-l-s-.5))||0),l}function nt(e,t,r){var o=Be(e),n=(!v.boxSizingReliable()||r)&&"border-box"===A.css(e,"boxSizing",!1,o),i=n,a=Ye(e,t,o),s="offset"+t[0].toUpperCase()+t.slice(1);if(je.test(a)){if(!r)return a;a="auto"}return(!v.boxSizingReliable()&&n||!v.reliableTrDimensions()&&N(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===A.css(e,"display",!1,o))&&e.getClientRects().length&&(n="border-box"===A.css(e,"boxSizing",!1,o),(i=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+ot(e,t,r||(n?"border":"content"),i,o,a)+"px"}function it(e,t,r,o,n){return new it.prototype.init(e,t,r,o,n)}A.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=Ye(e,"opacity");return""===e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,i,a,s=H(t),l=Ze.test(t),d=e.style;if(l||(t=Je(s)),a=A.cssHooks[t]||A.cssHooks[s],void 0===r)return a&&"get"in a&&void 0!==(n=a.get(e,!1,o))?n:d[t];"string"===(i=typeof r)&&(n=ee.exec(r))&&n[1]&&(r=ae(e,t,n),i="number"),null!=r&&r==r&&("number"!==i||l||(r+=n&&n[3]||(A.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==r||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&void 0===(r=a.set(e,r,o))||(l?d.setProperty(t,r):d[t]=r))}},css:function(e,t,r,o){var n,i=H(t);return Ze.test(t)||(t=Je(i)),"normal"===(n=void 0===(n=(i=A.cssHooks[t]||A.cssHooks[i])&&"get"in i?i.get(e,!0,r):n)?Ye(e,t,o):n)&&t in tt&&(n=tt[t]),""===r||r?(t=parseFloat(n),!0===r||isFinite(t)?t||0:n):n}}),A.each(["height","width"],function(e,s){A.cssHooks[s]={get:function(e,t,r){if(t)return!$e.test(A.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,s,r):Le(e,et,function(){return nt(e,s,r)})},set:function(e,t,r){var o,n=Be(e),i=!v.scrollboxSize()&&"absolute"===n.position,a=(i||r)&&"border-box"===A.css(e,"boxSizing",!1,n),r=r?ot(e,s,r,a,n):0;return a&&i&&(r-=Math.ceil(e["offset"+s[0].toUpperCase()+s.slice(1)]-parseFloat(n[s])-ot(e,s,"border",!1,n)-.5)),r&&(o=ee.exec(t))&&"px"!==(o[3]||"px")&&(e.style[s]=t,t=A.css(e,s)),rt(0,t,r)}}}),A.cssHooks.marginLeft=ze(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ye(e,"marginLeft"))||e.getBoundingClientRect().left-Le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),A.each({margin:"",padding:"",border:"Width"},function(n,i){A.cssHooks[n+i]={expand:function(e){for(var t=0,r={},o="string"==typeof e?e.split(" "):[e];t<4;t++)r[n+te[t]+i]=o[t]||o[t-2]||o[0];return r}},"margin"!==n&&(A.cssHooks[n+i].set=rt)}),A.fn.extend({css:function(e,t){return j(this,function(e,t,r){var o,n,i={},a=0;if(Array.isArray(t)){for(o=Be(e),n=t.length;a<n;a++)i[t[a]]=A.css(e,t[a],!1,o);return i}return void 0!==r?A.style(e,t,r):A.css(e,t)},e,t,1<arguments.length)}}),(A.Tween=it).prototype={constructor:it,init:function(e,t,r,o,n,i){this.elem=e,this.prop=r,this.easing=n||A.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=o,this.unit=i||(A.cssNumber[r]?"":"px")},cur:function(){var e=it.propHooks[this.prop];return(e&&e.get?e:it.propHooks._default).get(this)},run:function(e){var t,r=it.propHooks[this.prop];return this.options.duration?this.pos=t=A.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(r&&r.set?r:it.propHooks._default).set(this),this}},it.prototype.init.prototype=it.prototype,it.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=A.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){A.fx.step[e.prop]?A.fx.step[e.prop](e):1!==e.elem.nodeType||!A.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:A.style(e.elem,e.prop,e.now+e.unit)}}},it.propHooks.scrollTop=it.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},A.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},A.fx=it.prototype.init,A.fx.step={};var at,st,lt=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function ut(){st&&(!1===C.hidden&&O.requestAnimationFrame?O.requestAnimationFrame(ut):O.setTimeout(ut,A.fx.interval),A.fx.tick())}function ct(){return O.setTimeout(function(){at=void 0}),at=Date.now()}function ft(e,t){var r,o=0,n={height:e};for(t=t?1:0;o<4;o+=2-t)n["margin"+(r=te[o])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function gt(e,t,r){for(var o,n=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),i=0,a=n.length;i<a;i++)if(o=n[i].call(r,t,e))return o}function pt(n,e,t){var r,i,o=0,a=pt.prefilters.length,s=A.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=at||ct(),e=Math.max(0,d.startTime+d.duration-e),t=1-(e/d.duration||0),r=0,o=d.tweens.length;r<o;r++)d.tweens[r].run(t);return s.notifyWith(n,[d,t,e]),t<1&&o?e:(o||s.notifyWith(n,[d,1,0]),s.resolveWith(n,[d]),!1)},d=s.promise({elem:n,props:A.extend({},e),opts:A.extend(!0,{specialEasing:{},easing:A.easing._default},t),originalProperties:e,originalOptions:t,startTime:at||ct(),duration:t.duration,tweens:[],createTween:function(e,t){e=A.Tween(n,d.opts,e,t,d.opts.specialEasing[e]||d.opts.easing);return d.tweens.push(e),e},stop:function(e){var t=0,r=e?d.tweens.length:0;if(i)return this;for(i=!0;t<r;t++)d.tweens[t].run(1);return e?(s.notifyWith(n,[d,1,0]),s.resolveWith(n,[d,e])):s.rejectWith(n,[d,e]),this}}),u=d.props;for(!function(e,t){var r,o,n,i,a;for(r in e)if(n=t[o=H(r)],i=e[r],Array.isArray(i)&&(n=i[1],i=e[r]=i[0]),r!==o&&(e[o]=i,delete e[r]),(a=A.cssHooks[o])&&"expand"in a)for(r in i=a.expand(i),delete e[o],i)r in e||(e[r]=i[r],t[r]=n);else t[o]=n}(u,d.opts.specialEasing);o<a;o++)if(r=pt.prefilters[o].call(d,n,u,d.opts))return S(r.stop)&&(A._queueHooks(d.elem,d.opts.queue).stop=r.stop.bind(r)),r;return A.map(u,gt,d),S(d.opts.start)&&d.opts.start.call(n,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),A.fx.timer(A.extend(l,{elem:n,anim:d,queue:d.opts.queue})),d}A.Animation=A.extend(pt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return ae(r.elem,e,ee.exec(t),r),r}]},tweener:function(e,t){for(var r,o=0,n=(e=S(e)?(t=e,["*"]):e.match(x)).length;o<n;o++)r=e[o],pt.tweeners[r]=pt.tweeners[r]||[],pt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var o,n,i,a,s,l,d,u="width"in t||"height"in t,c=this,f={},g=e.style,p=e.nodeType&&ie(e),m=X.get(e,"fxshow");for(o in r.queue||(null==(a=A._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,A.queue(e,"fx").length||a.empty.fire()})})),t)if(n=t[o],lt.test(n)){if(delete t[o],i=i||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!m||void 0===m[o])continue;p=!0}f[o]=m&&m[o]||A.style(e,o)}if((l=!A.isEmptyObject(t))||!A.isEmptyObject(f))for(o in u&&1===e.nodeType&&(r.overflow=[g.overflow,g.overflowX,g.overflowY],null==(d=m&&m.display)&&(d=X.get(e,"display")),"none"===(u=A.css(e,"display"))&&(d?u=d:(le([e],!0),d=e.style.display||d,u=A.css(e,"display"),le([e]))),("inline"===u||"inline-block"===u&&null!=d)&&"none"===A.css(e,"float")&&(l||(c.done(function(){g.display=d}),null==d&&(u=g.display,d="none"===u?"":u)),g.display="inline-block")),r.overflow&&(g.overflow="hidden",c.always(function(){g.overflow=r.overflow[0],g.overflowX=r.overflow[1],g.overflowY=r.overflow[2]})),l=!1,f)l||(m?"hidden"in m&&(p=m.hidden):m=X.access(e,"fxshow",{display:d}),i&&(m.hidden=!p),p&&le([e],!0),c.done(function(){for(o in p||le([e]),X.remove(e,"fxshow"),f)A.style(e,o,f[o])})),l=gt(p?m[o]:0,o,c),o in m||(m[o]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),A.speed=function(e,t,r){var o=e&&"object"==typeof e?A.extend({},e):{complete:r||!r&&t||S(e)&&e,duration:e,easing:r&&t||t&&!S(t)&&t};return A.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in A.fx.speeds?o.duration=A.fx.speeds[o.duration]:o.duration=A.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){S(o.old)&&o.old.call(this),o.queue&&A.dequeue(this,o.queue)},o},A.fn.extend({fadeTo:function(e,t,r,o){return this.filter(ie).css("opacity",0).show().end().animate({opacity:t},e,r,o)},animate:function(t,e,r,o){var n=A.isEmptyObject(t),i=A.speed(e,r,o),o=function(){var e=pt(this,A.extend({},t),i);(n||X.get(this,"finish"))&&e.stop(!0)};return o.finish=o,n||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(n,e,i){function a(e){var t=e.stop;delete e.stop,t(i)}return"string"!=typeof n&&(i=e,e=n,n=void 0),e&&this.queue(n||"fx",[]),this.each(function(){var e=!0,t=null!=n&&n+"queueHooks",r=A.timers,o=X.get(this);if(t)o[t]&&o[t].stop&&a(o[t]);else for(t in o)o[t]&&o[t].stop&&dt.test(t)&&a(o[t]);for(t=r.length;t--;)r[t].elem!==this||null!=n&&r[t].queue!==n||(r[t].anim.stop(i),e=!1,r.splice(t,1));!e&&i||A.dequeue(this,n)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=X.get(this),r=t[a+"queue"],o=t[a+"queueHooks"],n=A.timers,i=r?r.length:0;for(t.finish=!0,A.queue(this,a,[]),o&&o.stop&&o.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===a&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<i;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete t.finish})}}),A.each(["toggle","show","hide"],function(e,o){var n=A.fn[o];A.fn[o]=function(e,t,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ft(o,!0),e,t,r)}}),A.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,o){A.fn[e]=function(e,t,r){return this.animate(o,e,t,r)}}),A.timers=[],A.fx.tick=function(){var e,t=0,r=A.timers;for(at=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||A.fx.stop(),at=void 0},A.fx.timer=function(e){A.timers.push(e),A.fx.start()},A.fx.interval=13,A.fx.start=function(){st||(st=!0,ut())},A.fx.stop=function(){st=null},A.fx.speeds={slow:600,fast:200,_default:400},A.fn.delay=function(o,e){return o=A.fx&&A.fx.speeds[o]||o,this.queue(e=e||"fx",function(e,t){var r=O.setTimeout(e,o);t.stop=function(){O.clearTimeout(r)}})},zt=C.createElement("input"),Z=C.createElement("select").appendChild(C.createElement("option")),zt.type="checkbox",v.checkOn=""!==zt.value,v.optSelected=Z.selected,(zt=C.createElement("input")).value="t",zt.type="radio",v.radioValue="t"===zt.value;var mt,Et=A.expr.attrHandle;A.fn.extend({attr:function(e,t){return j(this,A.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){A.removeAttr(this,e)})}}),A.extend({attr:function(e,t,r){var o,n,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?A.prop(e,t,r):(1===i&&A.isXMLDoc(e)||(n=A.attrHooks[t.toLowerCase()]||(A.expr.match.bool.test(t)?mt:void 0)),void 0!==r?null===r?void A.removeAttr(e,t):n&&"set"in n&&void 0!==(o=n.set(e,r,t))?o:(e.setAttribute(t,r+""),r):!(n&&"get"in n&&null!==(o=n.get(e,t)))&&null==(o=A.find.attr(e,t))?void 0:o)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&N(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,o=0,n=t&&t.match(x);if(n&&1===e.nodeType)for(;r=n[o++];)e.removeAttribute(r)}}),mt={set:function(e,t,r){return!1===t?A.removeAttr(e,r):e.setAttribute(r,r),r}},A.each(A.expr.match.bool.source.match(/\w+/g),function(e,t){var a=Et[t]||A.find.attr;Et[t]=function(e,t,r){var o,n,i=t.toLowerCase();return r||(n=Et[i],Et[i]=o,o=null!=a(e,t,r)?i:null,Et[i]=n),o}});var ht=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function St(e){return(e.match(x)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(x)||[]}A.fn.extend({prop:function(e,t){return j(this,A.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[A.propFix[e]||e]})}}),A.extend({prop:function(e,t,r){var o,n,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&A.isXMLDoc(e)||(t=A.propFix[t]||t,n=A.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(o=n.set(e,r,t))?o:e[t]=r:n&&"get"in n&&null!==(o=n.get(e,t))?o:e[t]},propHooks:{tabIndex:{get:function(e){var t=A.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(A.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),A.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){A.propFix[this.toLowerCase()]=this}),A.fn.extend({addClass:function(t){var e,r,o,n,i,a,s=0;if(S(t))return this.each(function(e){A(this).addClass(t.call(this,e,bt(this)))});if((e=yt(t)).length)for(;r=this[s++];)if(a=bt(r),o=1===r.nodeType&&" "+St(a)+" "){for(i=0;n=e[i++];)o.indexOf(" "+n+" ")<0&&(o+=n+" ");a!==(a=St(o))&&r.setAttribute("class",a)}return this},removeClass:function(t){var e,r,o,n,i,a,s=0;if(S(t))return this.each(function(e){A(this).removeClass(t.call(this,e,bt(this)))});if(!arguments.length)return this.attr("class","");if((e=yt(t)).length)for(;r=this[s++];)if(a=bt(r),o=1===r.nodeType&&" "+St(a)+" "){for(i=0;n=e[i++];)for(;-1<o.indexOf(" "+n+" ");)o=o.replace(" "+n+" "," ");a!==(a=St(o))&&r.setAttribute("class",a)}return this},toggleClass:function(n,t){var i=typeof n,a="string"==i||Array.isArray(n);return"boolean"==typeof t&&a?t?this.addClass(n):this.removeClass(n):S(n)?this.each(function(e){A(this).toggleClass(n.call(this,e,bt(this),t),t)}):this.each(function(){var e,t,r,o;if(a)for(t=0,r=A(this),o=yt(n);e=o[t++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==n&&"boolean"!=i||((e=bt(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==n&&X.get(this,"__className__")||""))})},hasClass:function(e){for(var t,r=0,o=" "+e+" ";t=this[r++];)if(1===t.nodeType&&-1<(" "+St(bt(t))+" ").indexOf(o))return!0;return!1}});var Ot=/\r/g;A.fn.extend({val:function(t){var r,e,o,n=this[0];return arguments.length?(o=S(t),this.each(function(e){1===this.nodeType&&(null==(e=o?t.call(this,e,A(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=A.map(e,function(e){return null==e?"":e+""})),(r=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value")||(this.value=e))})):n?(r=A.valHooks[n.type]||A.valHooks[n.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(n,"value"))?e:"string"==typeof(e=n.value)?e.replace(Ot,""):null==e?"":e:void 0}}),A.extend({valHooks:{option:{get:function(e){var t=A.find.attr(e,"value");return null!=t?t:St(A.text(e))}},select:{get:function(e){for(var t,r=e.options,o=e.selectedIndex,n="select-one"===e.type,i=n?null:[],a=n?o+1:r.length,s=o<0?a:n?o:0;s<a;s++)if(((t=r[s]).selected||s===o)&&!t.disabled&&(!t.parentNode.disabled||!N(t.parentNode,"optgroup"))){if(t=A(t).val(),n)return t;i.push(t)}return i},set:function(e,t){for(var r,o,n=e.options,i=A.makeArray(t),a=n.length;a--;)((o=n[a]).selected=-1<A.inArray(A.valHooks.option.get(o),i))&&(r=!0);return r||(e.selectedIndex=-1),i}}}}),A.each(["radio","checkbox"],function(){A.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<A.inArray(A(e).val(),t)}},v.checkOn||(A.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in O;function Ct(e){e.stopPropagation()}var At=/^(?:focusinfocus|focusoutblur)$/;A.extend(A.event,{trigger:function(e,t,r,o){var n,i,a,s,l,d,u,c=[r||C],f=h.call(e,"type")?e.type:e,g=h.call(e,"namespace")?e.namespace.split("."):[],p=u=i=r=r||C;if(3!==r.nodeType&&8!==r.nodeType&&!At.test(f+A.event.triggered)&&(-1<f.indexOf(".")&&(f=(g=f.split(".")).shift(),g.sort()),s=f.indexOf(":")<0&&"on"+f,(e=e[A.expando]?e:new A.Event(f,"object"==typeof e&&e)).isTrigger=o?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:A.makeArray(t,[e]),d=A.event.special[f]||{},o||!d.trigger||!1!==d.trigger.apply(r,t))){if(!o&&!d.noBubble&&!m(r)){for(a=d.delegateType||f,At.test(a+f)||(p=p.parentNode);p;p=p.parentNode)c.push(p),i=p;i===(r.ownerDocument||C)&&c.push(i.defaultView||i.parentWindow||O)}for(n=0;(p=c[n++])&&!e.isPropagationStopped();)u=p,e.type=1<n?a:d.bindType||f,(l=(X.get(p,"events")||Object.create(null))[e.type]&&X.get(p,"handle"))&&l.apply(p,t),(l=s&&p[s])&&l.apply&&Y(p)&&(e.result=l.apply(p,t),!1===e.result&&e.preventDefault());return e.type=f,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(c.pop(),t)||!Y(r)||s&&S(r[f])&&!m(r)&&((i=r[s])&&(r[s]=null),A.event.triggered=f,e.isPropagationStopped()&&u.addEventListener(f,Ct),r[f](),e.isPropagationStopped()&&u.removeEventListener(f,Ct),A.event.triggered=void 0,i&&(r[s]=i)),e.result}},simulate:function(e,t,r){e=A.extend(new A.Event,r,{type:e,isSimulated:!0});A.event.trigger(e,null,t)}}),A.fn.extend({trigger:function(e,t){return this.each(function(){A.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return A.event.trigger(e,t,r,!0)}}),v.focusin||A.each({focus:"focusin",blur:"focusout"},function(r,o){function n(e){A.event.simulate(o,e.target,A.event.fix(e))}A.event.special[o]={setup:function(){var e=this.ownerDocument||this.document||this,t=X.access(e,o);t||e.addEventListener(r,n,!0),X.access(e,o,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=X.access(e,o)-1;t?X.access(e,o,t):(e.removeEventListener(r,n,!0),X.remove(e,o))}}});var _t=O.location,Nt={guid:Date.now()},Mt=/\?/;A.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new O.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||A.error("Invalid XML: "+(r?A.map(r.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Tt=/\[\]$/,wt=/\r?\n/g,Rt=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;A.param=function(e,t){function r(e,t){t=S(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var o,n=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!A.isPlainObject(e))A.each(e,function(){r(this.name,this.value)});else for(o in e)!function r(o,e,n,i){if(Array.isArray(e))A.each(e,function(e,t){n||Tt.test(o)?i(o,t):r(o+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,i)});else if(n||"object"!==p(e))i(o,e);else for(var t in e)r(o+"["+t+"]",e[t],n,i)}(o,e[o],t,r);return n.join("&")},A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=A.prop(this,"elements");return e?A.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!A(this).is(":disabled")&&Pt.test(this.nodeName)&&!Rt.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var r=A(this).val();return null==r?null:Array.isArray(r)?A.map(r,function(e){return{name:t.name,value:e.replace(wt,"\r\n")}}):{name:t.name,value:r.replace(wt,"\r\n")}}).get()}});var Lt=/%20/g,It=/#.*$/,xt=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Gt=/^(?:GET|HEAD)$/,Dt=/^\/\//,Ut={},Vt={},Ft="*/".concat("*"),jt=C.createElement("a");function Bt(i){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,o=0,n=e.toLowerCase().match(x)||[];if(S(t))for(;r=n[o++];)"+"===r[0]?(r=r.slice(1)||"*",(i[r]=i[r]||[]).unshift(t)):(i[r]=i[r]||[]).push(t)}}function qt(t,o,n,i){var a={},s=t===Vt;function l(e){var r;return a[e]=!0,A.each(t[e]||[],function(e,t){t=t(o,n,i);return"string"!=typeof t||s||a[t]?s?!(r=t):void 0:(o.dataTypes.unshift(t),l(t),!1)}),r}return l(o.dataTypes[0])||!a["*"]&&l("*")}function Wt(e,t){var r,o,n=A.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:o=o||{})[r]=t[r]);return o&&A.extend(!0,e,o),e}jt.href=_t.href,A.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ft,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":A.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Wt(Wt(e,A.ajaxSettings),t):Wt(A.ajaxSettings,e)},ajaxPrefilter:Bt(Ut),ajaxTransport:Bt(Vt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var l,d,u,r,c,f,g,o,n,p=A.ajaxSetup({},t=t||{}),m=p.context||p,E=p.context&&(m.nodeType||m.jquery)?A(m):A.event,h=A.Deferred(),v=A.Callbacks("once memory"),S=p.statusCode||{},i={},a={},s="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(f){if(!r)for(r={};t=kt.exec(u);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return f?u:null},setRequestHeader:function(e,t){return null==f&&(e=a[e.toLowerCase()]=a[e.toLowerCase()]||e,i[e]=t),this},overrideMimeType:function(e){return null==f&&(p.mimeType=e),this},statusCode:function(e){if(e)if(f)b.always(e[b.status]);else for(var t in e)S[t]=[S[t],e[t]];return this},abort:function(e){e=e||s;return l&&l.abort(e),y(0,e),this}};if(h.promise(b),p.url=((e||p.url||_t.href)+"").replace(Dt,_t.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(x)||[""],null==p.crossDomain){n=C.createElement("a");try{n.href=p.url,n.href=n.href,p.crossDomain=jt.protocol+"//"+jt.host!=n.protocol+"//"+n.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=A.param(p.data,p.traditional)),qt(Ut,p,t,b),f)return b;for(o in(g=A.event&&p.global)&&0==A.active++&&A.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Gt.test(p.type),d=p.url.replace(It,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Lt,"+")):(n=p.url.slice(d.length),p.data&&(p.processData||"string"==typeof p.data)&&(d+=(Mt.test(d)?"&":"?")+p.data,delete p.data),!1===p.cache&&(d=d.replace(xt,"$1"),n=(Mt.test(d)?"&":"?")+"_="+Nt.guid+++n),p.url=d+n),p.ifModified&&(A.lastModified[d]&&b.setRequestHeader("If-Modified-Since",A.lastModified[d]),A.etag[d]&&b.setRequestHeader("If-None-Match",A.etag[d])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&b.setRequestHeader("Content-Type",p.contentType),b.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ft+"; q=0.01":""):p.accepts["*"]),p.headers)b.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(!1===p.beforeSend.call(m,b,p)||f))return b.abort();if(s="abort",v.add(p.complete),b.done(p.success),b.fail(p.error),l=qt(Vt,p,t,b)){if(b.readyState=1,g&&E.trigger("ajaxSend",[b,p]),f)return b;p.async&&0<p.timeout&&(c=O.setTimeout(function(){b.abort("timeout")},p.timeout));try{f=!1,l.send(i,y)}catch(e){if(f)throw e;y(-1,e)}}else y(-1,"No Transport");function y(e,t,r,o){var n,i,a,s=t;f||(f=!0,c&&O.clearTimeout(c),l=void 0,u=o||"",b.readyState=0<e?4:0,o=200<=e&&e<300||304===e,r&&(a=function(e,t,r){for(var o,n,i,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(n in s)if(s[n]&&s[n].test(o)){l.unshift(n);break}if(l[0]in r)i=l[0];else{for(n in r){if(!l[0]||e.converters[n+" "+l[0]]){i=n;break}a=a||n}i=i||a}if(i)return i!==l[0]&&l.unshift(i),r[i]}(p,b,r)),!o&&-1<A.inArray("script",p.dataTypes)&&A.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),a=function(e,t,r,o){var n,i,a,s,l,d={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(i=u.shift();i;)if(e.responseFields[i]&&(r[e.responseFields[i]]=t),!l&&o&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=u.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(!(a=d[l+" "+i]||d["* "+i]))for(n in d)if((s=n.split(" "))[1]===i&&(a=d[l+" "+s[0]]||d["* "+s[0]])){!0===a?a=d[n]:!0!==d[n]&&(i=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}(p,a,b,o),o?(p.ifModified&&((r=b.getResponseHeader("Last-Modified"))&&(A.lastModified[d]=r),(r=b.getResponseHeader("etag"))&&(A.etag[d]=r)),204===e||"HEAD"===p.type?s="nocontent":304===e?s="notmodified":(s=a.state,n=a.data,o=!(i=a.error))):(i=s,!e&&s||(s="error",e<0&&(e=0))),b.status=e,b.statusText=(t||s)+"",o?h.resolveWith(m,[n,s,b]):h.rejectWith(m,[b,s,i]),b.statusCode(S),S=void 0,g&&E.trigger(o?"ajaxSuccess":"ajaxError",[b,p,o?n:i]),v.fireWith(m,[b,s]),g&&(E.trigger("ajaxComplete",[b,p]),--A.active||A.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,r){return A.get(e,t,r,"json")},getScript:function(e,t){return A.get(e,void 0,t,"script")}}),A.each(["get","post"],function(e,n){A[n]=function(e,t,r,o){return S(t)&&(o=o||r,r=t,t=void 0),A.ajax(A.extend({url:e,type:n,dataType:o,data:t,success:r},A.isPlainObject(e)&&e))}}),A.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),A._evalUrl=function(e,t,r){return A.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){A.globalEval(e,t,r)}})},A.fn.extend({wrapAll:function(e){return this[0]&&(S(e)&&(e=e.call(this[0])),e=A(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(r){return S(r)?this.each(function(e){A(this).wrapInner(r.call(this,e))}):this.each(function(){var e=A(this),t=e.contents();t.length?t.wrapAll(r):e.append(r)})},wrap:function(t){var r=S(t);return this.each(function(e){A(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){A(this).replaceWith(this.childNodes)}),this}}),A.expr.pseudos.hidden=function(e){return!A.expr.pseudos.visible(e)},A.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},A.ajaxSettings.xhr=function(){try{return new O.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Yt=A.ajaxSettings.xhr();v.cors=!!Yt&&"withCredentials"in Yt,v.ajax=Yt=!!Yt,A.ajaxTransport(function(n){var i,a;if(v.cors||Yt&&!n.crossDomain)return{send:function(e,t){var r,o=n.xhr();if(o.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(r in n.xhrFields)o[r]=n.xhrFields[r];for(r in n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),n.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)o.setRequestHeader(r,e[r]);i=function(e){return function(){i&&(i=a=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?t(0,"error"):t(o.status,o.statusText):t(Ht[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=i(),a=o.onerror=o.ontimeout=i("error"),void 0!==o.onabort?o.onabort=a:o.onreadystatechange=function(){4===o.readyState&&O.setTimeout(function(){i&&a()})},i=i("abort");try{o.send(n.hasContent&&n.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),A.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),A.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return A.globalEval(e),e}}}),A.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),A.ajaxTransport("script",function(r){var o,n;if(r.crossDomain||r.scriptAttrs)return{send:function(e,t){o=A("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",n=function(e){o.remove(),n=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(o[0])},abort:function(){n&&n()}}});var zt,Xt=[],Kt=/(=)\?(?=&|$)|\?\?/;A.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||A.expando+"_"+Nt.guid++;return this[e]=!0,e}}),A.ajaxPrefilter("json jsonp",function(e,t,r){var o,n,i,a=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=S(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Kt,"$1"+o):!1!==e.jsonp&&(e.url+=(Mt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return i||A.error(o+" was not called"),i[0]},e.dataTypes[0]="json",n=O[o],O[o]=function(){i=arguments},r.always(function(){void 0===n?A(O).removeProp(o):O[o]=n,e[o]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(o)),i&&S(n)&&n(i[0]),i=n=void 0}),"script"}),v.createHTMLDocument=((zt=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===zt.childNodes.length),A.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(v.createHTMLDocument?((o=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(o)):t=C),o=!r&&[],(r=M.exec(e))?[t.createElement(r[1])]:(r=Ee([e],t,o),o&&o.length&&A(o).remove(),A.merge([],r.childNodes)));var o},A.fn.load=function(e,t,r){var o,n,i,a=this,s=e.indexOf(" ");return-1<s&&(o=St(e.slice(s)),e=e.slice(0,s)),S(t)?(r=t,t=void 0):t&&"object"==typeof t&&(n="POST"),0<a.length&&A.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(o?A("<div>").append(A.parseHTML(e)).find(o):e)}).always(r&&function(e,t){a.each(function(){r.apply(this,i||[e.responseText,t,e])})}),this},A.expr.pseudos.animated=function(t){return A.grep(A.timers,function(e){return t===e.elem}).length},A.offset={setOffset:function(e,t,r){var o,n,i,a,s=A.css(e,"position"),l=A(e),d={};"static"===s&&(e.style.position="relative"),i=l.offset(),o=A.css(e,"top"),a=A.css(e,"left"),a=("absolute"===s||"fixed"===s)&&-1<(o+a).indexOf("auto")?(n=(s=l.position()).top,s.left):(n=parseFloat(o)||0,parseFloat(a)||0),null!=(t=S(t)?t.call(e,r,A.extend({},i)):t).top&&(d.top=t.top-i.top+n),null!=t.left&&(d.left=t.left-i.left+a),"using"in t?t.using.call(e,d):l.css(d)}},A.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){A.offset.setOffset(this,t,e)});var e,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),r=r.ownerDocument.defaultView,{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,o=this[0],n={top:0,left:0};if("fixed"===A.css(o,"position"))t=o.getBoundingClientRect();else{for(t=this.offset(),r=o.ownerDocument,e=o.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===A.css(e,"position");)e=e.parentNode;e&&e!==o&&1===e.nodeType&&((n=A(e).offset()).top+=A.css(e,"borderTopWidth",!0),n.left+=A.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-A.css(o,"marginTop",!0),left:t.left-n.left-A.css(o,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===A.css(e,"position");)e=e.offsetParent;return e||re})}}),A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i="pageYOffset"===n;A.fn[t]=function(e){return j(this,function(e,t,r){var o;return m(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r?o?o[n]:e[t]:void(o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[t]=r)},t,e,arguments.length)}}),A.each(["top","left"],function(e,r){A.cssHooks[r]=ze(v.pixelPosition,function(e,t){if(t)return t=Ye(e,r),je.test(t)?A(e).position()[r]+"px":t})}),A.each({Height:"height",Width:"width"},function(a,s){A.each({padding:"inner"+a,content:s,"":"outer"+a},function(o,i){A.fn[i]=function(e,t){var r=arguments.length&&(o||"boolean"!=typeof e),n=o||(!0===e||!0===t?"margin":"border");return j(this,function(e,t,r){var o;return m(e)?0===i.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+a],o["scroll"+a],e.body["offset"+a],o["offset"+a],o["client"+a])):void 0===r?A.css(e,t,n):A.style(e,t,r,n)},s,r?e:void 0,r)}})}),A.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){A.fn[t]=function(e){return this.on(t,e)}}),A.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,o){return this.on(t,e,r,o)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),A.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){A.fn[r]=function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)}});var Qt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;A.proxy=function(e,t){var r,o;if("string"==typeof t&&(o=e[t],t=e,e=o),S(e))return r=s.call(arguments,2),(o=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||A.guid++,o},A.holdReady=function(e){e?A.readyWait++:A.ready(!0)},A.isArray=Array.isArray,A.parseJSON=JSON.parse,A.nodeName=N,A.isFunction=S,A.isWindow=m,A.camelCase=H,A.type=p,A.now=Date.now,A.isNumeric=function(e){var t=A.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},A.trim=function(e){return null==e?"":(e+"").replace(Qt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return A});var Jt=O.jQuery,$t=O.$;return A.noConflict=function(e){return O.$===A&&(O.$=$t),e&&O.jQuery===A&&(O.jQuery=Jt),A},void 0===e&&(O.jQuery=O.$=A),A})},{}],31:[function(e,t,r){var o,n,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(e){o=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,d=[],u=!1,c=-1;function f(){u&&l&&(u=!1,l.length?d=l.concat(d):c=-1,d.length&&g())}function g(){if(!u){var e=s(f);u=!0;for(var t=d.length;t;){for(l=d,d=[];++c<t;)l&&l[c].run();c=-1,t=d.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new p(e,t)),1!==d.length||u||s(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],32:[function(e,A,_){!function(n,c){"use strict";var f="function",r="undefined",i="string",e="model",t="name",o="type",a="vendor",s="version",l="architecture",d="console",u="mobile",g="tablet",p="smarttv",m="wearable",E="embedded",h={extend:function(e,t){var r,o={};for(r in e)t[r]&&t[r].length%2==0?o[r]=t[r].concat(e[r]):o[r]=e[r];return o},has:function(e,t){return typeof e==i&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e==i?e.replace(/[^\d\.]/g,"").split(".")[0]:c},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t==r?e:e.substring(0,255)}},v={rgx:function(e,t){for(var r,o,n,i,a,s=0;s<t.length&&!i;){for(var l=t[s],d=t[s+1],u=r=0;u<l.length&&!i;)if(i=l[u++].exec(e))for(o=0;o<d.length;o++)a=i[++r],"object"==typeof(n=d[o])&&0<n.length?2==n.length?typeof n[1]==f?this[n[0]]=n[1].call(this,a):this[n[0]]=n[1]:3==n.length?typeof n[1]!=f||n[1].exec&&n[1].test?this[n[0]]=a?a.replace(n[1],n[2]):c:this[n[0]]=a?n[1].call(this,a,n[2]):c:4==n.length&&(this[n[0]]=a?n[3].call(this,a.replace(n[1],n[2])):c):this[n]=a||c;s+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&0<t[r].length){for(var o=0;o<t[r].length;o++)if(h.has(t[r][o],e))return"?"===r?c:r}else if(h.has(t[r],e))return"?"===r?c:r;return e}},S={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},b={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[s,[t,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[s,[t,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[t,s],[/opios[\/\s]+([\w\.]+)/i],[s,[t,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[s,[t,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[t,s],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[s,[t,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[s,[t,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[s,[t,"WeChat"]],[/konqueror\/([\w\.]+)/i],[s,[t,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[s,[t,"IE"]],[/yabrowser\/([\w\.]+)/i],[s,[t,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[t,/(.+)/,"$1 Secure Browser"],s],[/focus\/([\w\.]+)/i],[s,[t,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[s,[t,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[s,[t,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[s,[t,"Dolphin"]],[/coast\/([\w\.]+)/i],[s,[t,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[s,[t,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[s,[t,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[t,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[t,/(.+)/,"$1 Browser"],s],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],s],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[t,s],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[t],[/;fbav\/([\w\.]+);/i],[s,[t,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[t,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[t,s],[/\bgsa\/([\w\.]+)\s.*safari\//i],[s,[t,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[s,[t,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,"Chrome WebView"],s],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[s,[t,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[t,s],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[s,[t,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[s,t],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[s,v.str,S.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[t,s],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],s],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[s,[t,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[l,"amd64"]],[/(ia32(?=;))/i],[[l,h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[l,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[l,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[l,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[l,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[l,/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[[l,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[l,h.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[e,[a,"Samsung"],[o,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[e,[a,"Samsung"],[o,u]],[/\((ip(?:hone|od)[\s\w]*);/i],[e,[a,"Apple"],[o,u]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[e,[a,"Apple"],[o,g]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[e,[a,"Huawei"],[o,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[e,[a,"Huawei"],[o,u]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[e,/_/g," "],[a,"Xiaomi"],[o,u]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[e,/_/g," "],[a,"Xiaomi"],[o,g]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[e,[a,"OPPO"],[o,u]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[e,[a,"Vivo"],[o,u]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[e,[a,"Realme"],[o,u]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[e,[a,"Motorola"],[o,u]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[a,"Motorola"],[o,g]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[e,[a,"LG"],[o,g]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[e,[a,"LG"],[o,u]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[e,[a,"Lenovo"],[o,g]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[e,/_/g," "],[a,"Nokia"],[o,u]],[/droid.+;\s(pixel\sc)[\s)]/i],[e,[a,"Google"],[o,g]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[e,[a,"Google"],[o,u]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[e,[a,"Sony"],[o,u]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[e,"Xperia Tablet"],[a,"Sony"],[o,g]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[e,[a,"OnePlus"],[o,u]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[e,[a,"Amazon"],[o,g]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[e,"Fire Phone"],[a,"Amazon"],[o,u]],[/\((playbook);[\w\s\),;-]+(rim)/i],[e,a,[o,g]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[e,[a,"BlackBerry"],[o,u]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[e,[a,"ASUS"],[o,g]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[e,[a,"ASUS"],[o,u]],[/(nexus\s9)/i],[e,[a,"HTC"],[o,g]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[a,[e,/_/g," "],[o,u]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[e,[a,"Acer"],[o,g]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[e,[a,"Meizu"],[o,u]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[a,e,[o,u]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[a,e,[o,g]],[/\s(surface\sduo)\s/i],[e,[a,"Microsoft"],[o,g]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[e,[a,"Fairphone"],[o,u]],[/\s(u304aa)\sbuild/i],[e,[a,"AT&T"],[o,u]],[/sie-(\w*)/i],[e,[a,"Siemens"],[o,u]],[/[;\/]\s?(rct\w+)\sbuild/i],[e,[a,"RCA"],[o,g]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[e,[a,"Dell"],[o,g]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[e,[a,"Verizon"],[o,g]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[e,[a,"Barnes & Noble"],[o,g]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[e,[a,"NuVision"],[o,g]],[/;\s(k88)\sbuild/i],[e,[a,"ZTE"],[o,g]],[/;\s(nx\d{3}j)\sbuild/i],[e,[a,"ZTE"],[o,u]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[e,[a,"Swiss"],[o,u]],[/[;\/]\s?(zur\d{3})\sbuild/i],[e,[a,"Swiss"],[o,g]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[e,[a,"Zeki"],[o,g]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[a,"Dragon Touch"],e,[o,g]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[e,[a,"Insignia"],[o,g]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[e,[a,"NextBook"],[o,g]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[a,"Voice"],e,[o,u]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[a,"LvTel"],e,[o,u]],[/;\s(ph-1)\s/i],[e,[a,"Essential"],[o,u]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[e,[a,"Envizen"],[o,g]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[e,[a,"MachSpeed"],[o,g]],[/[;\/]\s?tu_(1491)\sbuild/i],[e,[a,"Rotor"],[o,g]],[/(shield[\w\s]+)\sbuild/i],[e,[a,"Nvidia"],[o,g]],[/(sprint)\s(\w+)/i],[a,e,[o,u]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[a,"Microsoft"],[o,u]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[e,[a,"Zebra"],[o,g]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[e,[a,"Zebra"],[o,u]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[a,e,[o,d]],[/droid.+;\s(shield)\sbuild/i],[e,[a,"Nvidia"],[o,d]],[/(playstation\s[345portablevi]+)/i],[e,[a,"Sony"],[o,d]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[e,[a,"Microsoft"],[o,d]],[/smart-tv.+(samsung)/i],[a,[o,p]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[a,"Samsung"],[o,p]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[a,"LG"],[o,p]],[/(apple)\s?tv/i],[a,[e,"Apple TV"],[o,p]],[/crkey/i],[[e,"Chromecast"],[a,"Google"],[o,p]],[/droid.+aft([\w])(\sbuild\/|\))/i],[e,[a,"Amazon"],[o,p]],[/\(dtv[\);].+(aquos)/i],[e,[a,"Sharp"],[o,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[a,h.trim],[e,h.trim],[o,p]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[o,p]],[/((pebble))app\/[\d\.]+\s/i],[a,e,[o,m]],[/droid.+;\s(glass)\s\d/i],[e,[a,"Google"],[o,m]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[e,[a,"Zebra"],[o,m]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[a,[o,E]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[e,[o,u]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[e,[o,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[o,h.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[e,[a,"Generic"]],[/(phone)/i],[[o,u]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[s,[t,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[s,[t,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,s],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[s,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,s],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[t,[s,v.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[s,v.str,S.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[s,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[t,"Mac OS"],[s,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[t,s],[/\(bb(10);/i],[s,[t,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[s,[t,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[s,[t,"webOS"]],[/crkey\/([\d\.]+)/i],[s,[t,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],s],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[t,s],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],s],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,s]]},y=function(e,t){if("object"==typeof e&&(t=e,e=c),!(this instanceof y))return new y(e,t).getResult();var r=e||(void 0!==n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),o=t?h.extend(b,t):b;return this.getBrowser=function(){var e={name:c,version:c};return v.rgx.call(e,r,o.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:c};return v.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:c,model:c,type:c};return v.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:c,version:c};return v.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:c,version:c};return v.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e==i&&255<e.length?h.trim(e,255):e,this},this.setUA(r),this};y.VERSION="0.7.28",y.BROWSER={NAME:t,MAJOR:"major",VERSION:s},y.CPU={ARCHITECTURE:l},y.DEVICE={MODEL:e,VENDOR:a,TYPE:o,CONSOLE:d,MOBILE:u,SMARTTV:p,TABLET:g,WEARABLE:m,EMBEDDED:E},y.ENGINE={NAME:t,VERSION:s},y.OS={NAME:t,VERSION:s},typeof _!=r?(_=typeof A!=r&&A.exports?A.exports=y:_).UAParser=y:"function"==typeof define&&define.amd?define(function(){return y}):void 0!==n&&(n.UAParser=y);var O,C=void 0!==n&&(n.jQuery||n.Zepto);C&&!C.ua&&(O=new y,C.ua=O.getResult(),C.ua.get=function(){return O.getUA()},C.ua.set=function(e){O.setUA(e);var t,r=O.getResult();for(t in r)C.ua[t]=r[t]})}("object"==typeof window?window:this)},{}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return l.default}});var o=f(e("./v1.js")),n=f(e("./v3.js")),i=f(e("./v4.js")),a=f(e("./v5.js")),s=f(e("./nil.js")),l=f(e("./version.js")),d=f(e("./validate.js")),u=f(e("./stringify.js")),c=f(e("./parse.js"));function f(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":36,"./parse.js":37,"./stringify.js":41,"./v1.js":42,"./v3.js":43,"./v4.js":45,"./v5.js":46,"./validate.js":47,"./version.js":48}],34:[function(e,t,r){"use strict";function u(e){return 14+(e+64>>>9<<4)+1}function c(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,o,n,i){return c((i=c(c(t,e),c(o,i)))<<(n=n)|i>>>32-n,r)}function f(e,t,r,o,n,i,a){return s(t&r|~t&o,e,t,n,i,a)}function g(e,t,r,o,n,i,a){return s(t&o|r&~o,e,t,n,i,a)}function p(e,t,r,o,n,i,a){return s(t^r^o,e,t,n,i,a)}function m(e,t,r,o,n,i,a){return s(r^(t|~o),e,t,n,i,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(t){if("string"==typeof t){const r=unescape(encodeURIComponent(t));t=new Uint8Array(r.length);for(let e=0;e<r.length;++e)t[e]=r.charCodeAt(e)}return function(t){const r=[],o=32*t.length,n="0123456789abcdef";for(let e=0;e<o;e+=8){var i=t[e>>5]>>>e%32&255,i=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);r.push(i)}return r}(function(t,e){t[e>>5]|=128<<e%32,t[u(e)-1]=e;let r=1732584193,o=-271733879,n=-1732584194,i=271733878;for(let e=0;e<t.length;e+=16){var a=r,s=o,l=n,d=i;r=f(r,o,n,i,t[e],7,-680876936),i=f(i,r,o,n,t[e+1],12,-389564586),n=f(n,i,r,o,t[e+2],17,606105819),o=f(o,n,i,r,t[e+3],22,-1044525330),r=f(r,o,n,i,t[e+4],7,-176418897),i=f(i,r,o,n,t[e+5],12,1200080426),n=f(n,i,r,o,t[e+6],17,-1473231341),o=f(o,n,i,r,t[e+7],22,-45705983),r=f(r,o,n,i,t[e+8],7,1770035416),i=f(i,r,o,n,t[e+9],12,-1958414417),n=f(n,i,r,o,t[e+10],17,-42063),o=f(o,n,i,r,t[e+11],22,-1990404162),r=f(r,o,n,i,t[e+12],7,1804603682),i=f(i,r,o,n,t[e+13],12,-40341101),n=f(n,i,r,o,t[e+14],17,-1502002290),o=f(o,n,i,r,t[e+15],22,1236535329),r=g(r,o,n,i,t[e+1],5,-165796510),i=g(i,r,o,n,t[e+6],9,-1069501632),n=g(n,i,r,o,t[e+11],14,643717713),o=g(o,n,i,r,t[e],20,-373897302),r=g(r,o,n,i,t[e+5],5,-701558691),i=g(i,r,o,n,t[e+10],9,38016083),n=g(n,i,r,o,t[e+15],14,-660478335),o=g(o,n,i,r,t[e+4],20,-405537848),r=g(r,o,n,i,t[e+9],5,568446438),i=g(i,r,o,n,t[e+14],9,-1019803690),n=g(n,i,r,o,t[e+3],14,-187363961),o=g(o,n,i,r,t[e+8],20,1163531501),r=g(r,o,n,i,t[e+13],5,-1444681467),i=g(i,r,o,n,t[e+2],9,-51403784),n=g(n,i,r,o,t[e+7],14,1735328473),o=g(o,n,i,r,t[e+12],20,-1926607734),r=p(r,o,n,i,t[e+5],4,-378558),i=p(i,r,o,n,t[e+8],11,-2022574463),n=p(n,i,r,o,t[e+11],16,1839030562),o=p(o,n,i,r,t[e+14],23,-35309556),r=p(r,o,n,i,t[e+1],4,-1530992060),i=p(i,r,o,n,t[e+4],11,1272893353),n=p(n,i,r,o,t[e+7],16,-155497632),o=p(o,n,i,r,t[e+10],23,-1094730640),r=p(r,o,n,i,t[e+13],4,681279174),i=p(i,r,o,n,t[e],11,-358537222),n=p(n,i,r,o,t[e+3],16,-722521979),o=p(o,n,i,r,t[e+6],23,76029189),r=p(r,o,n,i,t[e+9],4,-640364487),i=p(i,r,o,n,t[e+12],11,-421815835),n=p(n,i,r,o,t[e+15],16,530742520),o=p(o,n,i,r,t[e+2],23,-995338651),r=m(r,o,n,i,t[e],6,-198630844),i=m(i,r,o,n,t[e+7],10,1126891415),n=m(n,i,r,o,t[e+14],15,-1416354905),o=m(o,n,i,r,t[e+5],21,-57434055),r=m(r,o,n,i,t[e+12],6,1700485571),i=m(i,r,o,n,t[e+3],10,-1894986606),n=m(n,i,r,o,t[e+10],15,-1051523),o=m(o,n,i,r,t[e+1],21,-2054922799),r=m(r,o,n,i,t[e+8],6,1873313359),i=m(i,r,o,n,t[e+15],10,-30611744),n=m(n,i,r,o,t[e+6],15,-1560198380),o=m(o,n,i,r,t[e+13],21,1309151649),r=m(r,o,n,i,t[e+4],6,-145523070),i=m(i,r,o,n,t[e+11],10,-1120210379),n=m(n,i,r,o,t[e+2],15,718787259),o=m(o,n,i,r,t[e+9],21,-343485551),r=c(r,a),o=c(o,s),n=c(n,l),i=c(i,d)}return[r,o,n,i]}(function(t){if(0===t.length)return[];const r=8*t.length,o=new Uint32Array(u(r));for(let e=0;e<r;e+=8)o[e>>5]|=(255&t[e/8])<<e%32;return o}(t),8*t.length))}},{}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);r.default={randomUUID:o}},{}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"},{}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,n=(o=e("./validate.js"))&&o.__esModule?o:{default:o};r.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");var t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}},{"./validate.js":47}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(n)};let o;const n=new Uint8Array(16)},{}],40:[function(e,t,r){"use strict";function c(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.default=function(r){var s=[1518500249,1859775393,2400959708,3395469782];const e=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof r){const n=unescape(encodeURIComponent(r));r=[];for(let e=0;e<n.length;++e)r.push(n.charCodeAt(e))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);var t=r.length/4+2,o=Math.ceil(t/16);const l=new Array(o);for(let t=0;t<o;++t){const i=new Uint32Array(16);for(let e=0;e<16;++e)i[e]=r[64*t+4*e]<<24|r[64*t+4*e+1]<<16|r[64*t+4*e+2]<<8|r[64*t+4*e+3];l[t]=i}l[o-1][14]=8*(r.length-1)/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=8*(r.length-1)&4294967295;for(let a=0;a<o;++a){const u=new Uint32Array(80);for(let e=0;e<16;++e)u[e]=l[a][e];for(let e=16;e<80;++e)u[e]=c(u[e-3]^u[e-8]^u[e-14]^u[e-16],1);let t=e[0],r=e[1],o=e[2],n=e[3],i=e[4];for(let e=0;e<80;++e){var d=Math.floor(e/20),d=c(t,5)+function(e,t,r,o){switch(e){case 0:return t&r^~t&o;case 1:return t^r^o;case 2:return t&r^t&o^r&o;case 3:return t^r^o}}(d,r,o,n)+i+s[d]+u[e]>>>0;i=n,n=o,o=c(r,30)>>>0,r=t,t=d}e[0]=e[0]+t>>>0,e[1]=e[1]+r>>>0,e[2]=e[2]+o>>>0,e[3]=e[3]+n>>>0,e[4]=e[4]+i>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,255&e[0],e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,255&e[1],e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,255&e[2],e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,255&e[3],e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,255&e[4]]}},{}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=a;var o,n=(o=e("./validate.js"))&&o.__esModule?o:{default:o};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase()}r.default=function(e,t=0){if(t=a(e,t),!(0,n.default)(t))throw TypeError("Stringified UUID is invalid");return t}},{"./validate.js":47}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,u=(o=e("./rng.js"))&&o.__esModule?o:{default:o},c=e("./stringify.js");let f,g,p=0,m=0;r.default=function(e,t,r){var o=t&&r||0;const n=t||new Array(16);let i=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:g;null!=i&&null!=a||(d=e.random||(e.rng||u.default)(),null==i&&(i=f=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==a&&(a=g=16383&(d[6]<<8|d[7])));let s=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:m+1;var d=s-p+(l-m)/1e4;if(d<0&&void 0===e.clockseq&&(a=a+1&16383),(d<0||s>p)&&void 0===e.nsecs&&(l=0),1e4<=l)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=s,m=l,g=a,s+=122192928e5,e=(1e4*(268435455&s)+l)%4294967296,n[o++]=e>>>24&255,n[o++]=e>>>16&255,n[o++]=e>>>8&255,n[o++]=255&e,e=s/4294967296*1e4&268435455,n[o++]=e>>>8&255,n[o++]=255&e,n[o++]=e>>>24&15|16,n[o++]=e>>>16&255,n[o++]=a>>>8|128,n[o++]=255&a;for(let e=0;e<6;++e)n[o+e]=i[e];return t||(0,c.unsafeStringify)(n)}},{"./rng.js":39,"./stringify.js":41}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./v35.js")),e=n(e("./md5.js"));function n(e){return e&&e.__esModule?e:{default:e}}e=(0,o.default)("v3",48,e.default);r.default=e},{"./md5.js":34,"./v35.js":44}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,i,a){function t(e,t,r,o){if("string"==typeof e&&(e=function(t){t=unescape(encodeURIComponent(t));const r=[];for(let e=0;e<t.length;++e)r.push(t.charCodeAt(e));return r}(e)),16!==(null===(t="string"==typeof t?(0,l.default)(t):t)||void 0===t?void 0:t.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let n=new Uint8Array(16+e.length);if(n.set(t),n.set(e,t.length),n=a(n),n[6]=15&n[6]|i,n[8]=63&n[8]|128,r){o=o||0;for(let e=0;e<16;++e)r[o+e]=n[e];return r}return(0,s.unsafeStringify)(n)}try{t.name=e}catch(e){}return t.DNS=n,t.URL=d,t};var o,s=e("./stringify.js"),l=(o=e("./parse.js"))&&o.__esModule?o:{default:o};const n="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=n;const d="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=d},{"./parse.js":37,"./stringify.js":41}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),i=o(e("./rng.js")),a=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}r.default=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,a.unsafeStringify)(o)}},{"./native.js":35,"./rng.js":39,"./stringify.js":41}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("./v35.js")),e=n(e("./sha1.js"));function n(e){return e&&e.__esModule?e:{default:e}}e=(0,o.default)("v5",80,e.default);r.default=e},{"./sha1.js":40,"./v35.js":44}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,n=(o=e("./regex.js"))&&o.__esModule?o:{default:o};r.default=function(e){return"string"==typeof e&&n.default.test(e)}},{"./regex.js":38}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o,n=(o=e("./validate.js"))&&o.__esModule?o:{default:o};r.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},{"./validate.js":47}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MEDIA_SNIPER_BIDDER=r.UPRAVEL_BIDDER=r.YANDEX_FULLSCREEN_FORMAT_TYPE=r.FLY_ROLL_FORMAT_TYPE=r.MULTI_AD_SLIDER_FORMAT_TYPE=r.INTERSCROLLER_FORMAT_TYPE=r.STICK_FORMAT_TYPE=r.GOOGLE_FULLSCREEN_FORMAT_TYPE=r.FULLSCREEN_FORMAT_TYPE=r.COMMON_FORMAT_TYPE=r.ROXOT_USER_ID_COOKIE_NAME=r.YANDEX_INTEGRATION_TYPES=r.ADFOX_INTEGRATION_TYPES=r.ROXOT_HOST=r.DEFAULT_AD_CLOSE_TIMEOUT=r.THIRD_PARTY_PARTNERS=r.SSP_NAMES=r.DEV_HOST=r.PROD_HOST=r.AD_BLOCK_PIXEL_PATH=r.ROXOT_CLASSES=r.ROXOT_ID_PREFIXES=r.PLACEHOLDER_ID_PREFIX=r.REFRESH_TIME_SECONDS=r.IFRAME_TIMER_PREFIX=r.IFRAME_ID_PREFIX=r.AD_TYPE=r.PAGE_STATUSES=r.PLACEMENT_CONFIG_STATUSES=r.AD_HTML_BLOCK_STATUSES=r.AD_STATUSES=r.COUNTERS=r.LOGGER_COMPONENTS=r.LOCAL_STORAGE_KEYS=r.GOOGLE_FULLSCREEN_OPTIONS_NAMES=r.AD_BLOCK_OPTIONS_NAMES=r.DATA_SETTINGS_FUNCTION_ATTRIBUTE_NAME=r.AVAILABLE_SETTINGS_KEYS=r.WRAPPER_EVENTS=r.IAB_EVENTS=r.MANAGER_EVENTS=r.VERSION=void 0,r.VERSION="2.46.06",r.MANAGER_EVENTS={NEED_DEFINE_HOST:"need_define_host",NEED_SET_PAGE_URL:"need_set_page_url",EXPERIMENT_CHOSEN:"experiment_chosen",BEFORE_DISPLAY_CONFIG:"before_display_config",BEFORE_AD_BLOCK_DATA_PUSH:"before_ad_block_data_push",BEFORE_LOAD_PLACEMENT_CONFIG:"before_load_placement_config",PLACEMENT_READY:"placement_ready",PLACEMENT_REQUEST:"placement_request",PLACEMENT_RENDER:"placement_render",PLACEMENT_NO_AD:"placement_no_server",PLACEMENT_VISIBLE:"placement_visible",PLACEMENT_SEEN:"placement_seen"};var o="rp_";r.IAB_EVENTS={AdLoaded:"AdLoaded",AdStarted:"AdStarted",AdVideoStart:"AdVideoStart",AdImpression:"AdImpression",AdStopped:"AdStopped",AdVideoComplete:"AdVideoComplete",AdError:"AdError",AdSkipped:"AdSkipped",AdSkippableStateChange:"AdSkippableStateChange",AdSizeChange:"AdSizeChange",AdLinearChange:"AdLinearChange",AdDurationChange:"AdDurationChange",AdExpandedChange:"AdExpandedChange",AdVolumeChange:"AdVolumeChange",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdLog:"AdLog"},r.WRAPPER_EVENTS={CONFIG_LEVEL:{INIT:"config_init",AD_INIT:"ad_config_init",BEFORE_AD_INIT:"ad_config_before_init"},REFRESH_LEVEL:{CHECK_ACTIVE_TAB:"need_define_check_active_tab_module",CHECK_NEED_REFRESH:"need_define_refresh_ad_module"},SERVER_LEVEL:{RUN:"server_run",PAUSE:"server_pause"},PLACEMENT_LEVEL:{ACTIVE:"placement_active",HIDDEN:"placement_hidden",NOT_EXISTS:"placement_not_exists"},AD_LEVEL:{READY:"ad_ready",REQUEST:"ad_request",RENDER:"ad_render",NO_SERVER:"ad_no_server",VISIBLE:"ad_visible"},WATERFALL_LEVEL:{REQUEST:"waterfall_request",EMPTY_AD:"waterfall_empty_ad",TIMEOUT:"waterfall_timeout",RENDER:"waterfall_render",VISIBLE:"waterfall_visible",NEED_RENDER:"waterfall_need_render",NEED_RENDER_FIRST_VIDEO_AD:"waterfall_need_render_first_video_ad",NEED_RENDER_NEXT_VIDEO_AD:"waterfall_need_render_next_video_ad",VIDEO_ERROR:"waterfall_video_error"},SSP_LEVEL:{NEED_SET_PAGE_HREF_FOR_GOOGLE_SSP:"need_set_page_href_for_google",NEED_SET_PAGE_HREF_FOR_PREBID_SSP:"need_set_page_href_for_prebid",NEED_SET_PAGE_HREF_FOR_PREBID_DFP_SSP:"need_set_page_href_for_prebid_dfp"},VIDEO_EVENTS:{RP_AD_IMPRESSION:o+r.IAB_EVENTS.AdImpression,RP_AD_STARTED:o+r.IAB_EVENTS.AdStarted,RP_AD_VIDEO_STARTED:o+r.IAB_EVENTS.AdVideoStart,RP_AD_STOPPED:o+r.IAB_EVENTS.AdStopped,RP_AD_VIDEO_COMPLETE:o+r.IAB_EVENTS.AdVideoComplete,RP_AD_ERROR:o+r.IAB_EVENTS.AdError}},r.AVAILABLE_SETTINGS_KEYS=["onAdImpression","onAdEmpty","onVideoAdImpression","onVideoAdStarted","onVideoAdVideoStarted","onVideoAdComplete","onVideoAdStopped","onVideoAdError","customKeyValues","debug","placementType"],r.DATA_SETTINGS_FUNCTION_ATTRIBUTE_NAME="data-settings-function",r.AD_BLOCK_OPTIONS_NAMES={AD_TIMEOUT_MINUTES:"adTimeoutMinutes",MAX_SCREEN_WIDTH:"maxScreenWidth",POSITION:"position",INTERSCROLLER_HEIGHT:"height"},r.GOOGLE_FULLSCREEN_OPTIONS_NAMES={AD_TAG:"tagId",STATIC_AD_TAG:"staticTagId",CLOSE_LINKS:"closeLinks",OPEN_LINKS:"openLinks"},r.LOCAL_STORAGE_KEYS={DEBUG:{STUB_ADS:"rowr.debug.stubAds",DISABLE_SERVER:"rowr.debug.disableAds",ROM_LOGGER_DEBUG:"rom.debug.consoleDebug",ROWR_LOGGER_DEBUG:"rowr.debug.consoleDebug",ROWR_LOGGER_DEBUG_COMPONENTS:"rowr.debug.consoleDebugComponents",PROFILER_LOGGER_DEBUG:"rowr.debug.consoleProfiler",ERROR_LOGGER_DEBUG:"roxot.debug.errorLogger",VPAID_LOGGER_DEBUG:"roxot.debug.vpaidLogger",RS_LOGGER_DEBUG:"rs.debug.rsLogger",IS_AD_SERVER_DEBUG:"rs.debug.adServer"},SPECIFIC:{GEO_SPECIFIC:"rom.specific.geo.region",GEO_SPECIFIC_TIME:"rom.specific.geo.region.time"}},r.LOGGER_COMPONENTS={YANDEX_EVENT_SENDER_COMPONENT:"Yandex Event Sender",PA_COMPONENT:"Prebid Analytics",MS_COMPONENT:"Monetization Stats",WRAPPER_COMPONENT:"Wrapper",USER_ID_MANAGER_COMPONENT:"User Id Manager",THEMES_MANAGER_COMPONENT:"Themes manager",TIMER_MANAGER_COMPONENT:"TimerManager",WATERFALL_COMPONENT:"Waterfall",SSP_COMPONENT:"SSP",CMP_COMPONENT:"CMP",EVENT_COMPONENT:"Event",STICK_COMPONENT:"FormatStickTypeModule",PLACEMENT_MODULE:"PlacementModule",FORMAT_WATERFALL_COMPONENT:"Format",UNIVERSAL_COMPONENT:"UniversalComponent",PLACEMENT_REFRESH:"PlacementRefreshComponent",GEO_SPECIFIC:"GeoSpecificComponent"},r.COUNTERS={REQUEST_COUNT:"requestCount"},r.AD_STATUSES={READY:"ready",REQUESTED:"request",RENDERED:"render",NO_SERVER:"no_server",TIMEOUT:"timeout"},r.AD_HTML_BLOCK_STATUSES={ACTIVE:"active",HIDDEN:"hidden",NOT_EXISTS:"not_exists"},r.PLACEMENT_CONFIG_STATUSES={INIT:"init",READY:"ready",REQUESTED:"request",RENDERED:"render",NO_AD:"no_ad",STOPPED:"stopped"},r.PAGE_STATUSES={ACTIVE_TAB:"active_tab",HIDDEN_TAB:"hidden_tab"},r.AD_TYPE={BANNER:"banner",VIDEO:"video"},r.IFRAME_ID_PREFIX="roxotIframe-",r.IFRAME_TIMER_PREFIX="updateIframeSize-",r.REFRESH_TIME_SECONDS={MINIMAL_VALUE:1,OPTIMAL_VALUE:30},r.PLACEHOLDER_ID_PREFIX="roxotPlaceholder-",r.ROXOT_ID_PREFIXES={ROXOT_PLACEMENT:"roxotPlacement-",ROXOT_AD:"roxotAd-",ROXOT_AUTOGENERATED:"roxotAutogenerated-"},r.ROXOT_CLASSES={ROXOT_AD_CONTAINER:"roxotAdContainer",ROXOT_AD:"roxotAd"},r.AD_BLOCK_PIXEL_PATH="/img/px.gif",r.PROD_HOST="cdn.skcrtxr.com",r.DEV_HOST="127.0.0.1:23080",r.SSP_NAMES={STUB:"stub",GOOGLE:"google",GOOGLE_FULLSCREEN:"google-fullscreen",PREBID:"prebid",GOOGLE_PREBID:"prebid_dfp",AMAZON_GOOGLE_PREBID:"amazon_prebid_dfp",YANDEX:"yandex",ROXOT_OUT_STREAM:"roxot_video",ROXOT_IN_OUT_STREAM:"roxot_in_out_stream",VIDEO_NOW:"video_now",AD_FOX:"adfox",ROXOT_AD_FOX:"roxot_adfox",ROXOT_YANDEX:"roxot_yandex",ROXOT_AD_FOX_VIDEO:"roxot_adfox_video",THIRD_PARTY:"third_party",ROXOT:"roxot",ROXOT_BACKUP:"roxot-backup",VIDEO_CONTENT_PLAYER:"video_content_player",ROXOT_OPEN_RTB:"roxot_open_rtb",YANDEX_FULLSCREEN:"yandex_fullscreen"},r.THIRD_PARTY_PARTNERS={BUZZOOLA:"buzzoola",NATIVE_ROLL:"nativeroll",VIDEO_NOW:"videonow",VIADS:"viads",VIDVERTO:"vidverto"},r.DEFAULT_AD_CLOSE_TIMEOUT=30,r.ROXOT_HOST="roxotHost",r.ADFOX_INTEGRATION_TYPES={COMMON:"common",DIRECT:"direct"},r.YANDEX_INTEGRATION_TYPES={COMMON:"common",DIRECT:"direct"},r.ROXOT_USER_ID_COOKIE_NAME="rxuid",r.COMMON_FORMAT_TYPE="common",r.FULLSCREEN_FORMAT_TYPE="fullscreen",r.GOOGLE_FULLSCREEN_FORMAT_TYPE="google-fullscreen",r.STICK_FORMAT_TYPE="stick",r.INTERSCROLLER_FORMAT_TYPE="interscroller",r.MULTI_AD_SLIDER_FORMAT_TYPE="multi-ad-slider",r.FLY_ROLL_FORMAT_TYPE="fly-roll",r.YANDEX_FULLSCREEN_FORMAT_TYPE="yandex_fullscreen",r.UPRAVEL_BIDDER="upravelBidder",r.MEDIA_SNIPER_BIDDER="mediaSniperBidder"},{}],50:[function(e,t,r){"use strict";var o;Object.defineProperty(r,"__esModule",{value:!0}),r.MULTI_AD_SLIDER_DEFAULT_TRANSITION_SECONDS=r.MULTI_AD_SLIDER_DEFAULT_NEXT_SSP_TIMEOUT_SECONDS=r.REFRESH_TIME_SECONDS_MINIMAL_VALUE=r.REFRESH_TIME_SECONDS_OPTIMAL_VALUE=r.DEFAULT_LIMITS=r.VISIBLE_PERCENTAGE_LIMIT_NAME=r.NO_SERVER_TIMEOUT_LIMIT_NAME=r.REQUEST_TIMEOUT_LIMIT_NAME=r.REFRESH_TIME_SECONDS_LIMIT_NAME=void 0,r.REFRESH_TIME_SECONDS_LIMIT_NAME="refreshTimeSeconds",r.REQUEST_TIMEOUT_LIMIT_NAME="requestTimeout",r.NO_SERVER_TIMEOUT_LIMIT_NAME="noServerTimeout",r.VISIBLE_PERCENTAGE_LIMIT_NAME="visiblePercentage",r.DEFAULT_LIMITS={all:((o={})[r.REFRESH_TIME_SECONDS_LIMIT_NAME]=30,o[r.REQUEST_TIMEOUT_LIMIT_NAME]=6,o[r.NO_SERVER_TIMEOUT_LIMIT_NAME]=30,o[r.VISIBLE_PERCENTAGE_LIMIT_NAME]=.51,o)},r.REFRESH_TIME_SECONDS_OPTIMAL_VALUE=30,r.REFRESH_TIME_SECONDS_MINIMAL_VALUE=1,r.MULTI_AD_SLIDER_DEFAULT_NEXT_SSP_TIMEOUT_SECONDS=15,r.MULTI_AD_SLIDER_DEFAULT_TRANSITION_SECONDS=.5},{}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.variables=void 0;var o=e("./constants"),n=e("./limits"),n={pageStatus:o.PAGE_STATUSES.ACTIVE_TAB,isStubAdServer:function(){try{return!!localStorage&&!!localStorage.getItem(o.LOCAL_STORAGE_KEYS.DEBUG.STUB_ADS)}catch(e){return!1}}(),isDisableWrapper:function(){try{return!!localStorage&&!!localStorage.getItem(o.LOCAL_STORAGE_KEYS.DEBUG.DISABLE_SERVER)}catch(e){return!1}}(),limits:n.DEFAULT_LIMITS,disableAdRefreshInNotActiveTab:!0,enableAdFirstLoadInHiddenTab:!1,enableAdRefreshInHiddenTab:!1,prebid:{},videojsLibs:{},adfox:{},cmp:{vendor:null,cmpInitTimeout:500},device:"",host:"",os:"",browser:"",prebidAnalyticsIntegration:{},monetizationStatsIntegration:{},yandexMetricIntegration:{},keyValues:{},rewriteDfpUrl:!1,isGoogleForceSafeFrame:!1,pageUrl:null,universalPlaceHolder:{},stubVideoPath:"",isInlineBlock:!0,roxotYaMetric:{enabled:!1,counterId:0},msYaMetric:{enabled:!1,counterId:95926968},roxotAdPixel:{enabled:!1,urls:[],pixels:[]},addRoxotHostToKv:!1,adfoxIntegrationType:o.ADFOX_INTEGRATION_TYPES.COMMON,yandexIntegrationType:o.YANDEX_INTEGRATION_TYPES.COMMON,pageKeyValues:{enabled:!1,keyList:[]},openRtbHost:"",syncCookies:{enabled:!0,alwaysSyncBidders:[]},syncThemes:{enabled:!1,method:"random"},uMeta:{enabled:!1}};window.rom=window.rom||{cmd:[],icmd:[]},window.rom.cmd=window.rom.cmd||[],window.rowr=window.rowr||{cmd:[]},window.rowr.cmd=window.rowr.cmd||[],window.googletag=window.googletag||{cmd:[]},window.pbjs=window.pbjs||{que:[]},window.rowrJq=e("jquery").noConflict(!0),window.romDebug=window.romDebug||{},r.variables={romConfig:{},wrapperConfig:n,romDebug:window.romDebug,rom:window.rom,rowr:window.rowr,googletag:window.googletag,pbjs:window.pbjs,rowrJq:window.rowrJq,iframeCollection:{}}},{"./constants":49,"./limits":50,jquery:30}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adTagDispatcherModule=void 0;var o=e("./dispatcherModule"),n=e("./loggers/rowrLoggerModule"),i=e("../../constants/constants");r.adTagDispatcherModule={callbacks:{},init:function(){var i=this;o.dispatcherModule.onAll(function(e){var t=null===(r=e.adConfig)||void 0===r?void 0:r.waterfallConfig.currentRoxotAdContentId;if(t){var r=e.event;if(r){i.callbacks[t]=i.callbacks[t]||{},i.callbacks[t][r]=i.callbacks[t][r]||[];for(var o=0,n=i.callbacks[t][r];o<n.length;o++)(0,n[o])(e)}}})},on:function(e,t,r){e?(this.callbacks[e]=this.callbacks[e]||{},this.callbacks[e][t]=this.callbacks[e][t]||[],this.callbacks[e][t].push(r)):n.rowrLogger.error(i.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot subscribe on event "+t+", no adId.",[],{adId:e,eventName:t})},off:function(e,t,r){var o;e?(this.callbacks[e]=this.callbacks[e]||{},this.callbacks[e][t]=this.callbacks[e][t]||[],-1<(r=(o=this.callbacks[e][t]).indexOf(r))&&o.splice(r,1)):n.rowrLogger.error(i.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot unsubscribe on event "+t+", no adId.",[],{adId:e,eventName:t})},offAll:function(e){e?(this.callbacks=this.callbacks||{},delete this.callbacks[e]):n.rowrLogger.error(i.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot unsubscribe of all events, no adId.",[],{adId:e})}}},{"../../constants/constants":49,"./dispatcherModule":84,"./loggers/rowrLoggerModule":97}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractAdServer=void 0;var o=(n.prototype.isInited=function(){return this.config.inited},n);function n(){}r.AbstractAdServer=o},{}],54:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.AdFoxAdServer=void 0;var s=e("../../../constants/constants"),l=e("../../../constants/variables"),d=e("../loggers/rowrLoggerModule"),u=e("../loggers/errorLoggerModule"),i=e("../loadManagerModule"),a=e("../../../utils/utils"),c=e("../timerManagerModule"),f=e("./adServerUtil"),g=e("../markers/waterfallMarkers"),p=e("../wrapperModule"),m=e("./AbstractAdServer"),E=e("../placementModule"),h=e("../repositories/placementConfigRepository"),v=e("../repositories/adConfigRepository"),S=e("./utils/adfoxUtil");function b(e){var t=(l.variables.wrapperConfig.adfox||{}).hb||{};if(!(t.biddersMap||!1))return d.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No bidders map.",O,{wrapperConfig:l.variables.wrapperConfig,hbConfig:t}),void u.errorLogger.error("SSP Adfox","No bidders map.",{wrapperConfig:l.variables.wrapperConfig,hbConfig:t});t.adUnits=[],e.YaHeaderBiddingSettings=t,d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Successfully apply hb config.",O,{hbConfig:t}),u.errorLogger.log("SSP Adfox","Successfully apply hb config.",{hbConfig:t})}var y,O="Adfox",n=(y=m.AbstractAdServer,n(C,y),C.prototype.getAdType=function(){return s.AD_TYPE.BANNER},C.prototype.init=function(e){if(l.variables.wrapperConfig.adfoxIntegrationType===s.ADFOX_INTEGRATION_TYPES.DIRECT&&u.errorLogger.error("SSP Adfox",'Do not use ssp "'+s.SSP_NAMES.AD_FOX+'" in "'+l.variables.wrapperConfig.adfoxIntegrationType+'" adfox integration type.',{config:e,wrapperConfig:l.variables.wrapperConfig}),this.isInited())throw"Module already inited";this.config.iframeModeEnabled=l.variables.romConfig.iframeSspList.includes(s.SSP_NAMES.AD_FOX),this.config.iframeModeEnabled||this.load(),this.config.inited=!0},C.prototype.load=function(){b(window),this.loadAdFoxEngine(),this.loadHbEngine()},C.prototype.refreshAd=function(e){var t,r,o,n,i,a=this;this.config.iframeModeEnabled?(t=f.adServerUtil.buildIframeId(e.waterfallConfig.currentRoxotAdContentId),l.variables.iframeCollection[t]=l.variables.iframeCollection[t]||{},l.variables.iframeCollection[t].id=t,window.refreshAdFoxAd=function(e,t,r,o){b(e),a.runAdFoxCode(v.adConfigRepository.get(r),e,t,o)},o=e.adId,n=this.config.adFoxEngineUrl,i=this.config.hbEngineUrl,o='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+o+"\"></div>\n            <script>\n                function loadScript(url, callback){\n                    let script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.async = !0;\n                    script.src = url;\n                    script.onload = function () {\n                        callback();\n                    };\n                    let head = document.getElementsByTagName('head')[0];\n                    head.insertBefore(script, head.firstChild); \n                }\n                let adFoxEngineLoaded = false;\n                let hbEngineLoaded = false;\n                \n                loadScript(\""+n+'", () => {adFoxEngineLoaded = true;});\n                loadScript("'+i+'", () => {hbEngineLoaded = true;});\n                \n                function loadAd() {\n                    if (!adFoxEngineLoaded || !hbEngineLoaded) {\n                        setTimeout(() => {\n                            loadAd();\n                        }, 100);\n                        return;\n                    }\n                    \n                    window.parent.refreshAdFoxAd(window, document, "'+o+'", "'+t+'");\n                }\n                \n                loadAd();\n            <\/script>\n        </body>\n        </html>\n    ',f.adServerUtil.createIframe(e,t,o)):this.config.loadedAdFox&&this.config.loadedHb?this.runAdFoxCode(e,window):(d.rowrLogger.warning(s.LOGGER_COMPONENTS.SSP_COMPONENT,o="Engine not loaded. Refresh ad after 100 ms.",O,{adConfig:e}),u.errorLogger.warning("SSP Adfox",o,{adConfig:e}),r=this,c.timerManagerModule.setTimeout("adfoxSsp__waitModuleLoading-"+e.adId,function(){d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Refresh ad after 100 ms wait.",O,{adConfig:e}),r.refreshAd(e)},100,["ad-"+e.adId]))},C.prototype.destroyAd=function(e,t){t=f.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.config.iframeModeEnabled?f.adServerUtil.deleteIframe(e,f.adServerUtil.buildIframeId(t)):this.ads.hasOwnProperty(t)&&(d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy block.",O,{adConfig:e}),window.Ya.adfoxCode.destroy(this.ads[t]),delete this.ads[t])},C.prototype.loadAdFoxEngine=function(){var e;this.config.loadedAdFox||(i.loadManagerModule.isAlreadyLoaded(this.config.adFoxEngineName)?this.config.loadedAdFox=!0:(i.loadManagerModule.markAsAlreadyLoaded(this.config.adFoxEngineName),a.utils.loadScript((e=this).config.adFoxEngineUrl,function(){d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Engine loaded.",O),e.config.loadedAdFox=!0})))},C.prototype.loadHbEngine=function(){var e;this.config.loadedHb||(i.loadManagerModule.isAlreadyLoaded(this.config.hbEngineName)?this.config.loadedHb=!0:(i.loadManagerModule.markAsAlreadyLoaded(this.config.hbEngineName),a.utils.loadScript((e=this).config.hbEngineUrl,function(){d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"HB loaded.",O),e.config.loadedHb=!0})))},C.prototype.runAdFoxCode=function(t,r,o,n){void 0===o&&(o=null),void 0===n&&(n=null),r.yaContextCb=r.yaContextCb||[];var e=t.waterfallConfig.currentSspConfig,i=f.adServerUtil.buildAdContentBlock(o||document,t,!!o);if(i)try{d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Adfox request.",O,{adConfig:t}),this.declareNextSspFunction(e,t),r.Ya.headerBidding.pushAdUnits([{code:i,sizes:f.adServerUtil.removeDfpCustomSizes(e.sizes),bids:e.options.bids}]),r.yaContextCb.push(function(){r.Ya.adfoxCode.create({ownerId:e.tagId,containerId:i,params:S.AdfoxUtil.replaceMacrosIfNeed(e.options.params,O,t),onLoad:function(e){if(!(e.bundleName||!1))return d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad.",O,{adConfig:t,adfoxResponse:e}),void g.waterfallMarkers.markAsEmpty(t);g.waterfallMarkers.markAsRendered(t),d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Has ad.",O,{adConfig:t,adfoxResponse:e}),o&&n&&p.wrapperModule.updateIframeSize(o,r.parent.document,n)},onRender:function(){g.waterfallMarkers.markAsVisible(t),d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Render ad.",O,{adConfig:t})},onError:function(e){g.waterfallMarkers.markAsEmpty(t),d.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error.",O,{adConfig:t,error:e}),u.errorLogger.error("SSP Adfox","Request error.",{adConfig:t,error:e})},onStub:function(){d.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"onStub.",O,{adConfig:t}),u.errorLogger.warning("SSP Adfox","Ad server returns onStub.",{adConfig:t}),g.waterfallMarkers.markAsEmpty(t)}})}),this.ads[t.waterfallConfig.currentRoxotAdContentId]=i}catch(e){g.waterfallMarkers.markAsEmpty(t),d.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Internal error.",O,{adConfig:t,error:e}),u.errorLogger.error("SSP Adfox","Internal error.",{adConfig:t,error:e})}},C.prototype.declareNextSspFunction=function(e,t){e=e.options.goNextSspFunction;e&&(window[e]=function(){setTimeout(function(){u.errorLogger.log("SSP Adfox","Next ssp function.",{adConfig:t}),g.waterfallMarkers.markAsEmpty(t),E.placementModule.resetPlacementTagsVisibleCounter(h.placementConfigRepository.get(t.details.roxotPlacementId))},0)})},C);function C(){var e=y.call(this)||this;return e.config={inited:!1,loadedAdFox:!1,loadedHb:!1,adFoxEngineUrl:"https://yandex.ru/ads/system/context.js",adFoxEngineName:"adfox_loader",hbEngineUrl:"https://yandex.ru/ads/system/header-bidding.js",hbEngineName:"adfox_hb",iframeModeEnabled:!1},e.ads={},e}r.AdFoxAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../loadManagerModule":92,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"../placementModule":103,"../repositories/adConfigRepository":105,"../repositories/placementConfigRepository":106,"../timerManagerModule":113,"../wrapperModule":117,"./AbstractAdServer":53,"./adServerUtil":73,"./utils/adfoxUtil":79}],55:[function(e,t,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleAdServer=void 0;var s=e("../../../constants/constants"),a=e("../loadManagerModule"),l=e("../../../constants/variables"),d=e("../../../utils/utils"),u=e("../loggers/rowrLoggerModule"),c=e("./adServerUtil"),f=e("./utils/googleUtil"),g=e("../repositories/adConfigRepository"),p=e("../wrapperModule"),m=e("../dispatcherModule"),e=e("./AbstractAdServer");var E,i=(E=e.AbstractAdServer,i(h,E),h.prototype.getAdType=function(){return s.AD_TYPE.BANNER},h.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.config.iframeModeEnabled=l.variables.romConfig.iframeSspList.includes(s.SSP_NAMES.GOOGLE),this.config.iframeModeEnabled||(this.load(),this.config.inited=!0)},h.prototype.load=function(){this.config.loaded||(a.loadManagerModule.isAlreadyLoaded(this.config.engineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),"object"===o(l.variables.googletag)&&"function"==typeof l.variables.googletag.pubads||d.utils.loadScript(this.config.engineUrl,function(){u.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.","Google")})),this.config.loaded=!0)},h.prototype.refreshAd=function(r){var e,o,t,n,a=this;this.config.iframeModeEnabled?(e=c.adServerUtil.buildIframeId(r.waterfallConfig.currentRoxotAdContentId),l.variables.iframeCollection[e]=l.variables.iframeCollection[e]||{},l.variables.iframeCollection[e].id=e,window.refreshGoogleAd=function(r,o,e,n){var i=g.adConfigRepository.get(e);f.googleUtil.initGptIfNeeded(r,o,a.config.iframeModeEnabled),r.cmd.push(function(){var e,t=c.adServerUtil.buildAdContentBlock(o,i,!0);t&&(e=f.googleUtil.buildGptSlot(r,t,i),r.display(t),r.pubads().setPrivacySettings({nonPersonalizedAds:!!i.isAnonAd}),r.pubads().refresh([e]),p.wrapperModule.updateIframeSize(o,document,n),u.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Ad request.","Google",{adConfig:i}))})},t=r.adId,n=this.config.engineUrl,t='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+t+"\"></div>\n            <script>\n                let script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.async = !0;\n                script.src = \""+n+'";\n                script.onload = function () {\n                    window.parent.refreshGoogleAd(window.googletag, document, "'+t+'", "'+e+"\");\n                 };\n                let head = document.getElementsByTagName('head')[0];\n                head.insertBefore(script, head.firstChild);\n            <\/script>\n        </body>\n        </html>\n    ",c.adServerUtil.createIframe(r,e,t)):(f.googleUtil.initGptIfNeeded(l.variables.googletag,document,this.config.iframeModeEnabled),o=this,l.variables.googletag.cmd.push(function(){var e,t=c.adServerUtil.buildAdContentBlock(document,r,!1);t&&(e=f.googleUtil.buildGptSlot(l.variables.googletag,t,r),o.slots[r.waterfallConfig.currentRoxotAdContentId]=e,m.dispatcherModule.dispatch(s.WRAPPER_EVENTS.SSP_LEVEL.NEED_SET_PAGE_HREF_FOR_GOOGLE_SSP,{}),l.variables.googletag.display(t),l.variables.googletag.pubads().setPrivacySettings({nonPersonalizedAds:!!r.isAnonAd}),l.variables.googletag.pubads().refresh([e]),u.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Ad request.","Google",{adConfig:r}))}))},h.prototype.destroyAd=function(e,t){var r,o=c.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.config.iframeModeEnabled?c.adServerUtil.deleteIframe(e,c.adServerUtil.buildIframeId(o)):(r=this).slots.hasOwnProperty(o)&&(u.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy slot.","Google",{adConfig:e}),l.variables.googletag.cmd.push(function(){l.variables.googletag.destroySlots([r.slots[o]])}),delete this.slots[o])},h);function h(){var e=E.call(this)||this;return e.config={inited:!1,loaded:!1,engineUrl:"https://www.googletagservices.com/tag/js/gpt.js",engineName:"gpt",iframeModeEnabled:!1},e.slots={},e}r.GoogleAdServer=i},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../dispatcherModule":84,"../loadManagerModule":92,"../loggers/rowrLoggerModule":97,"../repositories/adConfigRepository":105,"../wrapperModule":117,"./AbstractAdServer":53,"./adServerUtil":73,"./utils/googleUtil":80}],56:[function(e,t,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.GoogleFullscreenAdServer=void 0;var a,s=e("../../../constants/constants"),l=e("../loadManagerModule"),d=e("../../../constants/variables"),u=e("../../../utils/utils"),c=e("../loggers/rowrLoggerModule"),f=e("./AbstractAdServer"),g=e("../loggers/errorLoggerModule"),p=e("../repositories/adConfigRepository"),m=e("../markers/waterfallMarkers"),E=e("../../../utils/wrapperUtils"),h=e("../../../utils/adConfigUtils"),v=e("../markers/placementMarkers"),S=e("../repositories/placementConfigRepository"),b="Google Fullscreen",y="rxt-gfs-ad",i=(a=f.AbstractAdServer,i(O,a),O.prototype.getAdType=function(){return s.AD_TYPE.BANNER},O.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.load(),this.config.inited=!0},O.prototype.load=function(){this.config.loaded||(l.loadManagerModule.isAlreadyLoaded(this.config.engineName)||(l.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),"object"===o(d.variables.googletag)&&"function"==typeof d.variables.googletag.pubads||u.utils.loadScript(this.config.engineUrl,function(){c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.",b)})),this.config.loaded=!0)},O.prototype.refreshAd=function(e){var t=e.adId;this.slots[t]=this.slots[t]||{},this.initGptIfNeeded(d.variables.googletag,e.adId),this.buildStaticSlot(e,t),this.buildInterstitialSlot(e,t);var r=this;d.variables.googletag.cmd.push(function(){d.variables.googletag.display(r.slots[t].static),d.variables.googletag.pubads().refresh([r.slots[t].static,r.slots[t].interstitial])})},O.prototype.destroyAd=function(e,t){void 0===t&&(t=void 0)},O.prototype.initGptIfNeeded=function(e,o){var n;l.loadManagerModule.isAlreadyLoaded("gptConfig")||(l.loadManagerModule.markAsAlreadyLoaded("gptConfig"),n=this,e.cmd.push(function(){e.pubads().addEventListener("slotRequested",function(e){var t=e.slot;c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Google Fullscreen event slotRequested, ad request.",b,{slot:t,event:e,adUnit:t.getAdUnitPath()})}),e.pubads().addEventListener("slotResponseReceived",function(e){var t=e.slot;c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Google Fullscreen event slotResponseReceived, ad response received.",b,{slot:t,event:e,adUnit:t.getAdUnitPath()})}),e.pubads().addEventListener("slotOnload",function(e){var t=e.slot;c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Google Fullscreen event slotOnload, ad request.",b,{slot:t,event:e,adUnit:t.getAdUnitPath()});var r=p.adConfigRepository.find(o);if(n.slots[o].interstitial===e.slot){if(e.isEmpty)return c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Google Fullscreen event slotOnload, no ad.","Google",{adId:o,adConfig:r,event:e}),void m.waterfallMarkers.markAsEmpty(r);c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Google Fullscreen event slotOnload, has ad.",b,{adConfig:r,event:e,adUnit:t.getAdUnitPath()}),n.slots[o].isLoaded=!0,m.waterfallMarkers.markAsRendered(r),m.waterfallMarkers.markAsVisible(r);r=S.placementConfigRepository.get(r.details.roxotPlacementId);v.placementMarkers.markAsNeedRefresh(r)}}),e.pubads().disableInitialLoad(),e.pubads().enableSingleRequest(),e.enableServices()}))},O.prototype.buildStaticSlot=function(e,t){var r=E.wrapperUtils.getRoxotAdBlock(document,e);if(!r)return c.rowrLogger.error(s.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No ad block.",b,{adConfig:e}),g.errorLogger.error(s.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No ad block.",{adConfig:e}),h.adConfigUtils.deleteNotExistsAdTag(e),void m.waterfallMarkers.markAsEmpty(e);var o=document.createElement("div");o.setAttribute("id",y),o.style.width="1px",o.style.height="1px",r.insertAdjacentElement("beforeend",o);var n=e.waterfallConfig.currentSspConfig.staticTagId,i=this;d.variables.googletag.cmd.push(function(){var e=d.variables.googletag.defineSlot(n,[1,1],y).addService(d.variables.googletag.pubads());i.slots[t].static=e})},O.prototype.buildInterstitialSlot=function(t,r){var o=this,n=t.waterfallConfig.currentSspConfig.tagId;d.variables.googletag.cmd.push(function(){var e=d.variables.googletag.defineOutOfPageSlot(n,d.variables.googletag.enums.OutOfPageFormat.INTERSTITIAL);if(!e)return c.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Google Fullscreen no interstitialSlot.",b,{adId:r,adConfig:t}),void m.waterfallMarkers.markAsEmpty(t);e.addService(d.variables.googletag.pubads()),o.slots[r].interstitial=e})},O);function O(){var e=a.call(this)||this;return e.config={inited:!1,loaded:!1,engineUrl:"https://www.googletagservices.com/tag/js/gpt.js",engineName:"gpt"},e.slots={},e}r.GoogleFullscreenAdServer=i},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adConfigUtils":134,"../../../utils/utils":139,"../../../utils/wrapperUtils":141,"../loadManagerModule":92,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/placementMarkers":99,"../markers/waterfallMarkers":100,"../repositories/adConfigRepository":105,"../repositories/placementConfigRepository":106,"./AbstractAdServer":53}],57:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotAdFoxAdServer=void 0;var s=e("../../../constants/constants"),i=e("../../../constants/variables"),l=e("../loggers/rowrLoggerModule"),d=e("../loggers/errorLoggerModule"),a=e("../markers/waterfallMarkers"),u=e("./AbstractAdServer"),c=e("../../../utils/wrapperUtils"),f=e("../../../utils/adConfigUtils"),g=e("./adServerUtil"),p=e("../counterModule"),m=e("./utils/adfoxUtil"),E="Roxot Adfox",h="SSP Roxot Adfox";var v,n=(v=u.AbstractAdServer,n(S,v),S.prototype.getAdType=function(){return s.AD_TYPE.BANNER},S.prototype.init=function(e){if(i.variables.wrapperConfig.adfoxIntegrationType===s.ADFOX_INTEGRATION_TYPES.COMMON&&d.errorLogger.error(h,'Do not use ssp "'+s.SSP_NAMES.ROXOT_AD_FOX+'" in "'+i.variables.wrapperConfig.adfoxIntegrationType+'" adfox integration type.',{config:e,wrapperConfig:i.variables.wrapperConfig}),this.isInited())throw"Module already inited";this.load(),this.config.inited=!0},S.prototype.load=function(){!function(e){var t=(i.variables.wrapperConfig.adfox||{}).hb||!1;if(!t)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No hb config",E,{wrapperConfig:i.variables.wrapperConfig}),d.errorLogger.error(h,"No hb config",{wrapperConfig:i.variables.wrapperConfig});t.adUnits=[],t.callbacks={onBidsReceived:function(e){l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"onBidsReceived",E,{bids:e})}},e.YaHeaderBiddingSettings=t,l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Init Hb.",E,{hb:e.YaHeaderBiddingSettings})}(window)},S.prototype.refreshAd=function(t){var e=this.buildAdBlock(t);if(!e)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot build adBlock.",E,{adConfig:t}),d.errorLogger.error(h,"Cannot build adBlock.",{adConfig:t}),void a.waterfallMarkers.markAsEmpty(t);e=e.getAttribute("id");try{var r=this.buildAdFoxConfig(t,e),o=this.buildAdUnit(t,e);this.ads[t.waterfallConfig.currentRoxotAdContentId]=e,window.renderAdFoxAd(r,o)}catch(e){a.waterfallMarkers.markAsEmpty(t),l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Internal error.",E,{adConfig:t,error:e}),d.errorLogger.error(h,"Internal error.",{adConfig:t,error:e})}},S.prototype.destroyAd=function(e,t){t=g.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.ads.hasOwnProperty(t)&&(l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy adBlock.",E,{adConfig:e,adContentId:t}),window.destroyAdFoxAd(t),delete this.ads[t])},S.prototype.buildAdBlock=function(e){if(!e.waterfallConfig.currentSspConfig)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No current ad server config.",E,{adConfig:e}),d.errorLogger.error(h,"No current ad server config.",{adConfig:e}),null;var t=c.wrapperUtils.getRoxotAdBlock(document,e);if(!t)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad block.",E,{adConfig:e}),d.errorLogger.error(h,"No ad block.",{adConfig:e}),f.adConfigUtils.deleteNotExistsAdTag(e),null;var r={};g.adServerUtil.addSizeStylesToAdContainer(r,e),g.adServerUtil.addStylesToAdContainer(r,e),g.adServerUtil.setSizeStyleToRoxotAd(document,e,!1);var o=t.getAttribute("id"),n=e.waterfallConfig.currentSspConfig,t=e.waterfallConfig.currentRoxotAdContentId,i=window.buildAdBlock(o,t);i.setAttribute("data-ad-id",e.adId),i.setAttribute("data-request-info",n.name+"-"+p.counterModule.getAdServerCounterValue(e,s.COUNTERS.REQUEST_COUNT)),i.style.overflow="hidden",i.style.position="absolute",i.style.left="0",i.style.top="0";var a,n=n.classes||"";for(a in i.setAttribute("class","roxotAdContent "+n),r)i.style[a]=r[a];return i},S.prototype.buildAdFoxConfig=function(t,e){var r={},o=t.waterfallConfig.currentSspConfig;r.ownerId=null==o?void 0:o.tagId,r.containerId=e;o=null===(o=null==o?void 0:o.options)||void 0===o?void 0:o.params;return o||(d.errorLogger.warning(h,"No adfox params.",{adConfig:t}),o={}),Object.keys(o).length&&(o=m.AdfoxUtil.replaceMacrosIfNeed(o,E,t)),r.params=o,r.onRender=function(){a.waterfallMarkers.markAsRendered(t),a.waterfallMarkers.markAsVisible(t),l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Render ad.",E,{adConfig:t})},r.onError=function(e){l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Error with load ad.",E,{error:e,adConfig:t}),a.waterfallMarkers.markAsEmpty(t)},r.onStub=function(){l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"AdFox return stub",E,{adConfig:t}),a.waterfallMarkers.markAsEmpty(t)},l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Build adFox config.",E,{adFoxConfig:r,adConfig:t}),r},S.prototype.buildAdUnit=function(e,t){var r={};r.code=t,r.codeType="combo";var t=g.adServerUtil.removeDfpCustomSizes(null===(t=null===(t=null==e?void 0:e.waterfallConfig)||void 0===t?void 0:t.currentSspConfig)||void 0===t?void 0:t.sizes);t&&(r.sizes=t);t=null===(t=null===(t=null===(t=null==e?void 0:e.waterfallConfig)||void 0===t?void 0:t.currentSspConfig)||void 0===t?void 0:t.options)||void 0===t?void 0:t.bids;return r.bids=null!=t?t:[],l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Build adUnit.",E,{adConfig:e,adUnit:r}),r},S);function S(){var e=v.call(this)||this;return e.config={inited:!1,adFoxEngineName:"roxot_adfox"},e.ads={},e}r.RoxotAdFoxAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adConfigUtils":134,"../../../utils/wrapperUtils":141,"../counterModule":82,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"./AbstractAdServer":53,"./adServerUtil":73,"./utils/adfoxUtil":79}],58:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractRoxotAdServer=void 0;var i,a=e("../../../../constants/constants"),s=e("../adServerUtil"),l=e("../../loggers/rowrLoggerModule"),d=e("../../loggers/errorLoggerModule"),u=e("../../markers/waterfallMarkers"),c=e("../../timerManagerModule"),f=e("../../../../constants/variables"),e=e("../AbstractAdServer"),g=f.variables.rowrJq,n=(i=e.AbstractAdServer,n(p,i),p.prototype.getAdType=function(){return a.AD_TYPE.BANNER},p.prototype.init=function(e){this.config.inited=!0},p.prototype.getTimerName=function(e){return this.getName()+"Ssp_RenderTimeout-"+e.adId},p.prototype.refreshAd=function(e){var t=e.waterfallConfig.currentSspConfig;if(t){var r=s.adServerUtil.buildAdContentBlock(document,e,!1);if(r){t.options=t.options||{};var o=this.extractBanner(e,t);if(!o)return l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Empty ad because no support size.",this.getName(),{adConfig:e}),d.errorLogger.warning("SSP "+this.getName(),"Empty ad because no support size.",{adConfig:e}),void u.waterfallMarkers.markAsEmpty(e);var n=g('<div class="roxotAd" id="'+t.tagId+'"><a href="'+o.adUrl+'" target="_blank"><img alt="Roxot Ad" src="'+o.imgUrl+'"/></a></div>');n.find("img").css("display","block").css("width",o.size[0]+"px").css("height",o.size[1]+"px"),this.renderAd(t,e,r,n)}}},p.prototype.destroyAd=function(e,t){void 0===t&&(t=void 0),c.timerManagerModule.clearTimerIfExists(this.getTimerName(e))},p);function p(){var e=i.call(this)||this;return e.config={inited:!1,supportedBannersPacks:{}},e}r.AbstractRoxotAdServer=n},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../timerManagerModule":113,"../AbstractAdServer":53,"../adServerUtil":73}],59:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotAdServer=void 0;var i,a=e("../../../../constants/constants"),u=e("../adServerUtil"),s=e("../../loggers/rowrLoggerModule"),l=e("../../markers/waterfallMarkers"),d=e("../../timerManagerModule"),c=e("../../../../constants/variables"),e=e("./AbstractRoxotAdServer"),f=c.variables.rowrJq,n=(i=e.AbstractRoxotAdServer,n(g,i),g.prototype.getName=function(){return"Roxot"},g.prototype.extractBanner=function(e,t){for(var r=null,o=t.options.bannerPack||this.config.bannerPack,n=t.options.adUrl||this.config.adUrl,i=null,a=0,s=u.adServerUtil.removeDfpCustomSizes(t.sizes);a<s.length;a++){var l=s[a],d=l[0]+"x"+l[1];if(i=this.config.supportedBannersPacks[o][d]||null){r={size:l,imgUrl:i,adUrl:n};break}}return r},g.prototype.renderAd=function(e,t,r,o){var n=e.options.isEmptyAds||this.config.isEmptyAds;d.timerManagerModule.replaceTimeout(this.getTimerName(t),function(){return n?(s.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Empty ad because set isEmptyAds param.","Roxot",{adConfig:t}),void l.waterfallMarkers.markAsEmpty(t)):(s.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Render ad.","Roxot",{adConfig:t}),f("#"+r).html(o),l.waterfallMarkers.markAsRendered(t),void l.waterfallMarkers.markAsVisible(t))},e.options.responseTimeout||this.config.responseTimeout,["ad-"+t.adId]),s.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Stop finish request.","Roxot",{adConfig:t})},g);function g(){var e=i.call(this)||this;return e.config.adUrl="https://roxot.com",e.config.bannerPack="main",e.config.isEmptyAds=!1,e.config.responseTimeout=0,e.config.supportedBannersPacks={main:{"120x600":"https://cdn.skcrtxr.com/ads/main/roxot_ad_120_600.png","160x600":"https://cdn.skcrtxr.com/ads/main/roxot_ad_160_600.png","240x400":"https://cdn.skcrtxr.com/ads/main/roxot_ad_240_400.jpg","250x250":"https://cdn.skcrtxr.com/ads/main/roxot_ad_250_250.png","300x250":"https://cdn.skcrtxr.com/ads/main/roxot_ad_300_250.png","300x600":"https://cdn.skcrtxr.com/ads/main/roxot_ad_300_600.png","320x50":"https://cdn.skcrtxr.com/ads/main/roxot_ad_320_50.png","468x60":"https://cdn.skcrtxr.com/ads/main/roxot_ad_468_60.png","728x90":"https://cdn.skcrtxr.com/ads/main/roxot_ad_728_90.png","728x400":"https://cdn.skcrtxr.com/ads/main/roxot_ad_728_400.jpg","970x250":"https://cdn.skcrtxr.com/ads/main/roxot_ad_970_250.jpg"},"new-year":{"120x600":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_120_600.jpg","160x600":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_160_600.jpg","250x250":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_250_250.jpg","300x250":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_300_250.jpg","300x600":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_300_600.jpg","320x50":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_320_50.jpg","468x60":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_468_60.jpg","728x90":"https://cdn.skcrtxr.com/ads/new-year/roxot_ad_728_90.jpg"},everbly:{"160x600":"https://cdn.skcrtxr.com/ads/everbly/adwords-template_160x600.jpg","240x400":"https://cdn.skcrtxr.com/ads/everbly/adwords-template_240x400.jpg","300x250":"https://cdn.skcrtxr.com/ads/everbly/adwords-template_300x250.jpg","300x600":"https://cdn.skcrtxr.com/ads/everbly/adwords-template_300x600.jpg","720x90":"https://cdn.skcrtxr.com/ads/everbly/adwords-template_720x90.jpg","970x250":"https://cdn.skcrtxr.com/ads/everbly/adwords-template_970x250.jpg"},"tinkoff-mobile":{"300x250":"https://cdn.skcrtxr.com/ads/tinkoff-mobile/tinkoff_mobile_ad_300_250.png"}},e}r.RoxotAdServer=n},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../timerManagerModule":113,"../adServerUtil":73,"./AbstractRoxotAdServer":58}],60:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotBackupAdServer=void 0;var i,a=e("../../../../constants/constants"),s=e("../adServerUtil"),l=e("../../loggers/rowrLoggerModule"),d=e("../../markers/waterfallMarkers"),u=e("../../timerManagerModule"),c=e("../../../../constants/variables"),e=e("./AbstractRoxotAdServer"),f=c.variables.rowrJq,n=(i=e.AbstractRoxotAdServer,n(g,i),g.prototype.getName=function(){return"RoxotBackup"},g.prototype.extractBanner=function(e,t){for(var r=null,o=0,n=s.adServerUtil.removeDfpCustomSizes(t.sizes);o<n.length;o++){var i=n[o],a=i[0]+"x"+i[1],a=this.config.supportedBannersPacks[a]||null;if(a){a=a[Math.floor(Math.random()*a.length)],r={size:i,imgUrl:a.img,adUrl:a.url};break}}return r},g.prototype.renderAd=function(e,t,r,o){l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Render ad.",this.getName(),{adConfig:t}),f("#"+r).html(o),d.waterfallMarkers.markAsRendered(t),d.waterfallMarkers.markAsVisible(t)},g.prototype.destroyAd=function(e,t){void 0===t&&(t=void 0),u.timerManagerModule.clearTimerIfExists(this.getTimerName(e))},g);function g(){var e=i.call(this)||this;return e.config.supportedBannersPacks={"240x400":[{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-warships.jpg",url:"https://cpaex.scaletrk.com/click?o=770&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-tinkoff-sim.jpg",url:"https://cpaex.scaletrk.com/click?o=1485&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-tinkoff-invest.jpg",url:"https://cpaex.scaletrk.com/click?o=1592&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-tele2.jpg",url:"https://go.cpaex.ru/click?o=1842&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-alfa.jpg",url:"https://go.cpaex.ru/click?o=2037&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-finam.jpg",url:"https://go.cpaex.ru/click?o=2061&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-finam.gif",url:"https://go.cpaex.ru/click?o=2061&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-vtb.jpg",url:"https://go.cpaex.ru/click?o=2066&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/240x400-gazprombank.jpg",url:"https://go.cpaex.ru/click?o=2082&a=21857"}],"300x250":[{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-warships.jpg",url:"https://cpaex.scaletrk.com/click?o=770&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-tinkoff-sim.jpg",url:"https://cpaex.scaletrk.com/click?o=1485&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-tinkoff-invest.jpg",url:"https://cpaex.scaletrk.com/click?o=1592&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-tele2.jpg",url:"https://go.cpaex.ru/click?o=1842&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-alfa.jpg",url:"https://go.cpaex.ru/click?o=2037&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-finam.gif",url:"https://go.cpaex.ru/click?o=2061&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-finam2.gif",url:"https://go.cpaex.ru/click?o=2061&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-vtb.jpg",url:"https://go.cpaex.ru/click?o=2066&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x250-gazprombank.gif",url:"https://go.cpaex.ru/click?o=2082&a=21857"}],"300x600":[{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-warships.jpg",url:"https://cpaex.scaletrk.com/click?o=770&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-tinkoff-sim.jpg",url:"https://cpaex.scaletrk.com/click?o=1485&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-tinkoff-invest.jpg",url:"https://cpaex.scaletrk.com/click?o=1592&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-tele2.jpg",url:"https://go.cpaex.ru/click?o=1842&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-alfa.jpg",url:"https://go.cpaex.ru/click?o=2037&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-finam.jpg",url:"https://go.cpaex.ru/click?o=2061&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-finam.gif",url:"https://go.cpaex.ru/click?o=2061&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-vtb.jpg",url:"https://go.cpaex.ru/click?o=2066&a=21857"},{img:"https://cdn-content.skcrtxr.com/ads-img/300x600-gazprombank.jpg",url:"https://go.cpaex.ru/click?o=2082&a=21857"}],"320x50":[{img:"https://cdn-content.skcrtxr.com/ads-img/320x50-premium.look.estate.jpg",url:"https://premium.look.estate/"}],"640x400":[{img:"https://cdn-content.skcrtxr.com/ads-img/640x400-pochtabank.png",url:"https://my.pochtabank.ru/cash?utm_source=rxt&utm_medium=reach_olv&utm_campaign=Pochta@Cash@lpCash"}],"728x90":[{img:"https://cdn-content.skcrtxr.com/ads-img/728x90-m16-estate.png",url:"https://m16-estate.ru/"},{img:"https://cdn-content.skcrtxr.com/ads-img/728x90-premium.look.estate.gif",url:"https://premium.look.estate/"}],"970x250":[{img:"https://cdn-content.skcrtxr.com/ads-img/970x250-market.yandex.png",url:"https://market.yandex.ru/catalog--tovary-dlia-tvorchestva-i-khobbi/"},{img:"https://cdn-content.skcrtxr.com/ads-img/970x250-polis-group.png",url:"https://polis-group.su/"}]},e}r.RoxotBackupAdServer=n},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../timerManagerModule":113,"../adServerUtil":73,"./AbstractRoxotAdServer":58}],61:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},d=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotOpenRtbAdServer=void 0;var i=e("./AbstractAdServer"),a=e("../../../constants/constants"),u=e("./adServerUtil"),c=e("../../../constants/variables"),f=e("../markers/waterfallMarkers"),l=e("../loggers/rowrLoggerModule"),g=e("../wrapperModule"),p=e("../repositories/adConfigRepository"),m=e("../loggers/errorLoggerModule"),E=e("./utils/openRtbUtil"),h=e("../../../utils/utils"),v=e("../../../rs-engine/types/constants"),S=e("../waterfallModule"),b=e("../repositories/placementConfigRepository"),y=e("../markers/placementMarkers"),O=e("../loggers/romLoggerModule"),C="unknown",A="Roxot OpenRtb SSP";var _,n=(_=i.AbstractAdServer,n(N,_),N.prototype.getAdType=function(){return a.AD_TYPE.BANNER},N.prototype.refreshAd=function(i){return s(this,void 0,void 0,function(){var r,o,n=this;return d(this,function(e){switch(e.label){case 0:return(r=this).listeners[i.waterfallConfig.currentRoxotAdContentId]=r.postHandler.bind(r,{adConfig:i}),window.addEventListener("message",r.listeners[i.waterfallConfig.currentRoxotAdContentId],{once:!1}),o=i.waterfallConfig.currentSspConfig.bids,E.OpenRtbUtil.isBrandBooster(o)?[4,this.renderBrandBoosterAd(i).catch(function(e){m.errorLogger.error("SSP "+A,"No ad, "+e,{adConfig:i}),l.rowrLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad, "+e,A,{adConfig:i}),f.waterfallMarkers.markAsEmpty(i)})]:[3,2];case 1:return e.sent(),[2];case 2:return r=u.adServerUtil.buildIframeId(i.waterfallConfig.currentRoxotAdContentId),c.variables.iframeCollection[r]=c.variables.iframeCollection[r]||{},c.variables.iframeCollection[r].id=r,window.refreshRpRbtAd=function(e,t,r){n.runSppCode(p.adConfigRepository.get(t),e,r)},t=i.adId,o='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+t+'"></div>\n            <script>\n                window.parent.refreshRpRbtAd(window, "'+t+'", "'+r+'");\n            <\/script>\n        </body>\n        </html>\n    ',u.adServerUtil.createIframe(i,r,o),[2]}var t})})},N.prototype.postHandler=function(e,t){var r=t.data;r.domain===v.RSE_DOMAIN&&(t=e.adConfig,e=b.placementConfigRepository.get(t.details.roxotPlacementId),r.placementId===e.placementId&&(r.eventType===v.POST_MESSAGE_EVENTS.SKIP&&S.waterfallModule.requestAd(t),r.eventType===v.POST_MESSAGE_EVENTS.REFRESH&&(l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Ready to refresh.",A,{adConfig:t}),y.placementMarkers.markAsNeedRefresh(e))))},N.prototype.runSppCode=function(t,e,r){var o=u.adServerUtil.buildAdContentBlock(e.document,t,!0);o&&this.renderAd(t,o,e,r).catch(function(e){m.errorLogger.error("SSP "+A,"No ad, "+e,{adConfig:t}),l.rowrLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad, "+e,A,{adConfig:t}),f.waterfallMarkers.markAsEmpty(t)})},N.prototype.destroyAd=function(e,t){t=u.adServerUtil.buildAdContentId(e,t);this.listeners[t]&&(window.removeEventListener("message",this.listeners[t]),delete this.listeners[t]);t=u.adServerUtil.buildIframeId(t);c.variables.iframeCollection[t]&&l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy block.",A,{adConfig:e}),u.adServerUtil.deleteIframe(e,t)},N.prototype.init=function(e){},N.prototype.load=function(){},N.prototype.setInnerHTML=function(e,t,r){var o=t.html,n=u.adServerUtil.buildIframeId(r.waterfallConfig.currentRoxotAdContentId);n+="_inner",null!==(r=null==t?void 0:t.ext)&&void 0!==r&&r.isRse||(o=o.replace(/\\"/g,'"')),u.adServerUtil.createIframeInner(n,e,o,t.w,t.h)},N.prototype.renderAd=function(o,n,i,a){return s(this,void 0,void 0,function(){var t,r;return d(this,function(e){switch(e.label){case 0:return[4,E.OpenRtbUtil.buildAndRequestAd(o)];case 1:return t=e.sent(),r=i.document,this.createHtml(r,t,n,o),g.wrapperModule.updateIframeSize(r,window.parent.document,a),f.waterfallMarkers.markAsRendered(o),f.waterfallMarkers.markAsVisible(o),this.callNurl(t,o),[2]}})})},N.prototype.renderBrandBoosterAd=function(l){return s(this,void 0,void 0,function(){var t,r,o,n,i,a,s=this;return d(this,function(e){switch(e.label){case 0:return(t=document.getElementById(l.adId))?((r=document.createElement("div")).setAttribute("id",l.waterfallConfig.currentRoxotAdContentId),r.style.position="fixed",r.style.bottom="0",r.style.left="0",r.style.width="100%",(o=document.createElement("div")).setAttribute("id","bb-div"),n=u.adServerUtil.buildIframeId(l.waterfallConfig.currentRoxotAdContentId),c.variables.iframeCollection[n]=c.variables.iframeCollection[n]||{},c.variables.iframeCollection[n].id=n,(i=document.createElement("iframe")).setAttribute("id",n),i.style.border="0",i.style.margin="0",i.style.padding="0",i.style.display="inline-block",i.style.verticalAlign="top",i.style.overflowX="hidden",i.style.overflowY="visible",i.setAttribute("scrolling","no"),i.setAttribute("seamless","seamless"),o.appendChild(i),r.appendChild(o),t.appendChild(r),[4,E.OpenRtbUtil.buildAndRequestAd(l)]):(O.romLogger.error("Can not found ad block "+l.adId),m.errorLogger.error("Wrapper","Can not found ad block"+l.adId),[2]);case 1:return a=e.sent(),setTimeout(function(){var e=i.contentDocument||(null===(e=i.contentWindow)||void 0===e?void 0:e.document);e.open(),e.write(a.html),e.close(),f.waterfallMarkers.markAsRendered(l),f.waterfallMarkers.markAsVisible(l),s.callNurl(a,l)}),[2]}})})},N.prototype.callNurl=function(e,t){e.nurl&&h.utils.jsonAjax(e.nurl,function(){l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Successfully call nurl",A,{adConfig:t})})},N.prototype.createHtml=function(e,t,r,o){var n=e.createElement("div");n.classList.add("rp-rtb-container"),t.w&&t.h&&(n.style.width=t.w+"px",n.style.height=t.h+"px");var i=this.defineAdType(t);this.buildAd(e,i,n,t,o),e.getElementById(r).insertAdjacentElement("afterbegin",n),l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Successfully render ad",A,{adConfig:o})},N.prototype.defineAdType=function(e){return e.html?"html":e.banner?"banner":C},N.prototype.buildAd=function(e,t,r,o,n){if(l.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Define ad type.",A,{adConfig:n,adType:t}),t===C)throw l.rowrLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Unknown adType.",A,{adType:t,adwareObject:o}),"Unknown adType.";if("banner"===t){var i=e.createElement("a");i.setAttribute("href",o.banner.link.url),i.setAttribute("target","_blank");e=e.createElement("img");return e.style.width=o.w+"px",e.style.height=o.h+"px",i.insertAdjacentElement("afterbegin",e),void r.insertAdjacentElement("afterbegin",i)}"html"===t&&this.setInnerHTML(r,o,n)},N);function N(){var e=_.call(this)||this;return e.listeners={},e.config={inited:!0},e}r.RoxotOpenRtbAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../rs-engine/types/constants":132,"../../../utils/utils":139,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96,"../loggers/rowrLoggerModule":97,"../markers/placementMarkers":99,"../markers/waterfallMarkers":100,"../repositories/adConfigRepository":105,"../repositories/placementConfigRepository":106,"../waterfallModule":115,"../wrapperModule":117,"./AbstractAdServer":53,"./adServerUtil":73,"./utils/openRtbUtil":81}],62:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotYandexAdServer=void 0;var i,s=e("../../../constants/constants"),l=e("../loggers/rowrLoggerModule"),d=e("../loggers/errorLoggerModule"),a=e("../markers/waterfallMarkers"),u=e("./AbstractAdServer"),c=e("../../../utils/wrapperUtils"),f=e("../../../utils/adConfigUtils"),g=e("./adServerUtil"),p=e("../counterModule"),m=e("../loadManagerModule"),E=e("../../../constants/variables"),h="Roxot Yandex",v="SSP Roxot Yandex",n=(i=u.AbstractAdServer,n(S,i),S.prototype.getAdType=function(){return s.AD_TYPE.BANNER},S.prototype.init=function(e){if(E.variables.wrapperConfig.yandexIntegrationType===s.YANDEX_INTEGRATION_TYPES.COMMON&&d.errorLogger.error(v,'Do not use ssp "'+s.SSP_NAMES.ROXOT_YANDEX+'" in "'+E.variables.wrapperConfig.yandexIntegrationType+'" yandex integration type.',{config:e,wrapperConfig:E.variables.wrapperConfig}),this.isInited())throw"Module already inited";this.load(),this.config.inited=!0},S.prototype.load=function(){this.config.loaded||(m.loadManagerModule.isAlreadyLoaded(this.config.engineName)?this.config.loaded=!0:(m.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.","Roxot Yandex")))},S.prototype.refreshAd=function(t){var e=this.buildAdBlock(t);if(!e)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot build adBlock.",h,{adConfig:t}),d.errorLogger.error(v,"Cannot build adBlock.",{adConfig:t}),void a.waterfallMarkers.markAsEmpty(t);var r=e.getAttribute("id"),e=t.waterfallConfig.currentSspConfig;if(r)try{l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Roxot Yandex request.","Yandex",{adConfig:t});var o={blockId:e.tagId,renderTo:r,pageNumber:p.counterModule.getAdServerCounterValue(t,s.COUNTERS.REQUEST_COUNT),statId:void 0,onError:function(e){l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad.","Yandex",{adConfig:t,error:e}),a.waterfallMarkers.markAsEmpty(t)},onRender:function(e){l.rowrLogger.debug(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Has ad.","Yandex",{adConfig:t,yandexResponse:e}),a.waterfallMarkers.markAsRendered(t),a.waterfallMarkers.markAsVisible(t)}};e.options=e.options||{};var n=parseInt(e.options.statsId||null);n&&(o.statId=n),window.renderYandexAd(o)}catch(e){a.waterfallMarkers.markAsEmpty(t),l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"Internal error.",h,{adConfig:t,error:e}),d.errorLogger.error(v,"Internal error.",{adConfig:t,error:e})}},S.prototype.destroyAd=function(e,t){void 0===t&&(t=void 0)},S.prototype.buildAdBlock=function(e){if(!e.waterfallConfig.currentSspConfig)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No current ad server config.",h,{adConfig:e}),d.errorLogger.error(v,"No current ad server config.",{adConfig:e}),null;var t=c.wrapperUtils.getRoxotAdBlock(document,e);if(!t)return l.rowrLogger.error(s.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad block.",h,{adConfig:e}),d.errorLogger.error(v,"No ad block.",{adConfig:e}),f.adConfigUtils.deleteNotExistsAdTag(e),null;var r={};g.adServerUtil.addSizeStylesToAdContainer(r,e),g.adServerUtil.addStylesToAdContainer(r,e),g.adServerUtil.setSizeStyleToRoxotAd(document,e,!1);var o=t.getAttribute("id"),n=e.waterfallConfig.currentSspConfig,t=e.waterfallConfig.currentRoxotAdContentId,i=window.buildAdBlock(o,t);i.setAttribute("data-ad-id",e.adId),i.setAttribute("data-request-info",n.name+"-"+p.counterModule.getAdServerCounterValue(e,s.COUNTERS.REQUEST_COUNT)),i.style.overflow="hidden",i.style.position="absolute",i.style.left="0",i.style.top="0";var a,n=n.classes||"";for(a in i.setAttribute("class","roxotAdContent "+n),r)i.style[a]=r[a];return i},S);function S(){var e=i.call(this)||this;return e.config={engineName:"roxot_yandex",loaded:!1,inited:!1},e}r.RoxotYandexAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adConfigUtils":134,"../../../utils/wrapperUtils":141,"../counterModule":82,"../loadManagerModule":92,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"./AbstractAdServer":53,"./adServerUtil":73}],63:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.StubAdServer=void 0;var i,d=e("../../../constants/constants"),a=e("./adServerUtil"),s=e("../markers/waterfallMarkers"),l=e("../timerManagerModule"),u=e("../counterModule"),c=e("../../../constants/variables"),f=e("../../../utils/wrapperUtils"),g=e("../../../utils/adConfigUtils"),e=e("./AbstractAdServer"),p=c.variables.rowrJq,n=(i=e.AbstractAdServer,n(m,i),m.prototype.getAdType=function(){return d.AD_TYPE.BANNER},m.prototype.refreshAd=function(e){var t,r,o;!e.waterfallConfig.currentSspConfig||(t=a.adServerUtil.buildAdContentBlock(document,e,!1))&&(0===(r=g.adConfigUtils.getFirstSizes(e)).width&&0===r.height&&(r.width=300,r.height=250),(r=p('<div id="stubAd-'+t+'" class="'+this.config.stubAdClass+'" style="width: '+r.width+"px; height: "+r.height+'px; background-color: #ccc; color: black; overflow: auto;" data-alert="no build"></div>')).on("click",function(){var e=p(this).data("alert");console.log(e),alert(e)}),p("#"+t).html(r),s.waterfallMarkers.markAsRendered(e),s.waterfallMarkers.markAsVisible(e),o=this,e.cmpAdType=e.isAnonAd?"anonymous ad":"personal ad",e.keyValues=a.adServerUtil.extractPreparedKeyValues(e),this.updateStubAdContent(e),l.timerManagerModule.replaceInterval(this.buildTimerId(t),function(){o.updateStubAdContent(e)},1e3,["ad-"+t]))},m.prototype.buildTimerId=function(e){return"stubUpdateContent-"+e},m.prototype.updateStubAdContent=function(e){var t=p("#stubAd-"+e.waterfallConfig.currentRoxotAdContentId),r=e.waterfallConfig.currentSspConfig,o=r?r.name+"("+u.counterModule.getAdServerCounterValue(e,d.COUNTERS.REQUEST_COUNT)+")":"noAdServer",n=c.variables.wrapperConfig.cmp.vendor||"cmp off",r=c.variables.romConfig.iframeSspList.includes((null==r?void 0:r.name)||"")?"iframe":"main",n=["adId: "+e.adId+" ("+r+")","adContentId: "+e.waterfallConfig.currentRoxotAdContentId,"adServer: "+o,"adStatus: "+e.adStatus,"visibleSeconds: "+e.visibleSeconds,"slideVisibleSeconds: "+e.waterfallConfig.currentVisibleSeconds,"cmp: "+e.cmpAdType+" ("+n+")","keyValues: "+JSON.stringify(e.keyValues),"tagId: "+(null===(o=e.waterfallConfig.currentSspConfig)||void 0===o?void 0:o.tagId),"wrapper version: "+d.VERSION,"iframeSspList: "+c.variables.romConfig.iframeSspList.join(", ")||"off"],i=n.slice(0),o=e.sspsConfigs.map(function(e){return e.name});n.push("adServers: "+o.join(", ")),n.push("details: "+JSON.stringify(e.details)),i.push("details: "+JSON.stringify(e.details));for(var a=0,s=e.sspsConfigs;a<s.length;a++){var l=s[a];i.push("\n"+l.name+"\n"+JSON.stringify(l))}this.adVisibilityStubAlertInfo(i,e),t.html(n.join("<br>")),t.data("alert",i.join("\n")),c.variables.wrapperConfig.pageStatus===d.PAGE_STATUSES.HIDDEN_TAB?t.css("background-color","yellow"):f.wrapperUtils.isVisibleAd(e)?t.css("background-color","green"):t.css("background-color","red")},m.prototype.adVisibilityStubAlertInfo=function(e,t){e.push("\n\nVisibility info\n");var r,o=f.wrapperUtils.calculateVisibleInfo(t);for(r in o)e.push(r+": "+o[r])},m.prototype.destroyAd=function(e,t){t=this.buildTimerId(a.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t));l.timerManagerModule.clearTimerIfExists(t)},m);function m(){var e=i.call(this)||this;return e.config={stubAdClass:"stub-ad"},e}r.StubAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adConfigUtils":134,"../../../utils/wrapperUtils":141,"../counterModule":82,"../markers/waterfallMarkers":100,"../timerManagerModule":113,"./AbstractAdServer":53,"./adServerUtil":73}],64:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.ThirdPartyAdServer=void 0;var u=e("../../../constants/constants"),c=e("./adServerUtil"),f=e("../markers/waterfallMarkers"),g=e("../loggers/rowrLoggerModule"),p=e("../loggers/errorLoggerModule"),i=e("../../../constants/variables"),a=e("../wrapperModule"),s=e("../repositories/adConfigRepository"),l=e("./AbstractAdServer"),m=e("../placementModule"),E=e("../repositories/placementConfigRepository"),h=e("../../../utils/utils"),v="ROXOT_WATERFALL_NEXT",d="noVNAd";var S=i.variables.rowrJq;function b(e){var t=e.content||"";if(t)return JSON.parse(t);var r=e.partner,t=Object.values(u.THIRD_PARTY_PARTNERS);if(!t.includes(r))throw'Partner "'+r+'" not available. Available partners: '+t.join(", ");var o,n,i,a="",s=e.params;switch(r){case u.THIRD_PARTY_PARTNERS.BUZZOOLA:a='\n        <div class="'+(i=s).container+'">\n            <div class="buzzplayer-stage" data-hash="'+i.hash+'"></div>\n            <script type="text/javascript">\n                (function (w, d) {\n                    window.onBuzzoolaPlayerReady = function(player){\n                        player.on("error", function(error){\n                            console.log("buzz error", error);\n                            if (error){\n                                console.log("'+i.errorMessage+'");\n                                '+v+'\n                            }\n                        });\n                    };\n                    var c = d.createElement("script");\n                    c.src = "https://tube.buzzoola.com/new/build/buzzlibrary.js";\n                    c.type = "text/javascript";\n                    c.async = !0;\n                    var f = function () {\n                        var p = d.getElementsByTagName("script")[0];\n                        p.parentNode.insertBefore(c, p);\n                    };\n                    "[object Opera]" == w.opera ? d.addEventListener("DOMContentLoaded", f, !1) : f();\n                })(window, document);\n            <\/script>\n        </div>\n    ';break;case u.THIRD_PARTY_PARTNERS.NATIVE_ROLL:a=function(e){var t="";e.height&&(t+=", height: "+e.height);var r="\n        <script>\n            SeedrPlayer({\n            container: '#"+e.container+"',\n            article: '#"+e.container+"', \n            width:"+e.width+",\n            desiredOffset: 50,\n            gid: '"+e.gid+"',\n            onError: function(error) {\n                console.log('nativeroll error '+error);\n                console.log('"+e.errorMessage+"');\n                "+v+"\n            }\n            "+t+"\n            });\n        <\/script>\n    ",t="on"===e.header;return'<div id="'+e.container+'">'+(t?'\n        <script type="text/javascript">\n            (function (a, b, c, d, e, f, g, h) {\n            g = b.createElement(c);\n            g.src = d;\n            g.type = "application/javascript";\n            g.async = !0;\n            h = b.getElementsByTagName(c)[0];\n            h.parentNode.insertBefore(g, h);\n            a[f] = [];\n            a[e] = function () {\n                a[f].push(Array.prototype.slice.apply(arguments));\n            }\n            })(window, document, "script", (document.location.protocol === \n            "https:" ? "https:" : "http:") + "//cdn01.nativeroll.tv/js/seedr-player.min.js", "SeedrPlayer", "seedrInit");\n        <\/script>\n    '+r:r)+"</div>"}(s);break;case u.THIRD_PARTY_PARTNERS.VIDEO_NOW:a='\n        <script src="https://static.videonow.ru/vn_init.js?profileId='+(n=s).profileId+'" defer><\/script>\n        <div id="'+n.container+'">\n            <script>\n                function '+(null!==(i=n.functionName)&&void 0!==i?i:d)+"(){\n                    console.log('videonow no ad');\n                    console.log('"+n.errorMessage+"');\n                    "+v+"\n                }\n            <\/script>\n        </div>\n    ";break;case u.THIRD_PARTY_PARTNERS.VIADS:a='\n        <script src="https://ru.viadata.store/tag/load.js?sid='+(o=s).sid+'" defer charset="UTF-8"><\/script>\n        <div id="'+o.container+"\">\n            <script>\n                function noViadsAd(){\n                    console.log('Viads no ad');\n                    console.log('"+o.errorMessage+"');\n                    "+v+"\n                }\n            <\/script>\n        </div>\n    ";break;case u.THIRD_PARTY_PARTNERS.VIDVERTO:a='\n        <script async="async" src="https://ad.vidverto.io/vidverto/js/aries/v1/invocation.js"><\/script>\n        <div id="'+(o=s).id+"\"></div>\n        <script>\n            (() => {\n            window.aries = window.aries || {};\n            window.aries.v1 = window.aries.v1 || {commands: []};\n            const aries = window.aries.v1;\n            aries.commands.push(() => {\n                const zoneId = '"+o.zoneId+"';\n                const anchor = document.getElementById('"+o.id+"');\n                anchor.removeAttribute('id');\n                aries.mount(zoneId, anchor, {\n                    width: "+o.width+",\n                    height: "+o.height+',\n                });\n            });\n            })();\n        <\/script>\n        <div id="'+o.container+"\">\n            <script>\n                function noVidvertoAd(){\n                    console.log('vidverto no ad');\n                    console.log('"+o.errorMessage+"');\n                    "+v+"\n                }\n            <\/script>\n        </div>\n    ";break;default:throw'Mismatch "partner" property - partner "'+r+'" case not found.'}return a}var y,n=(y=l.AbstractAdServer,n(O,y),O.prototype.load=function(){},O.prototype.getAdType=function(){return u.AD_TYPE.BANNER},O.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.config.iframeModeEnabled=i.variables.romConfig.iframeSspList.includes(u.SSP_NAMES.THIRD_PARTY),this.config.iframeModeEnabled&&this.defineFnForIframe(),this.config.inited=!0},O.prototype.refreshAd=function(e){var t,r;this.config.iframeModeEnabled?(t=c.adServerUtil.buildIframeId(e.waterfallConfig.currentRoxotAdContentId),i.variables.iframeCollection[t]=i.variables.iframeCollection[t]||{},i.variables.iframeCollection[t].id=t,r='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+(r=e.adId)+"\"></div>\n            <script>\n            function loadScript(url, callback){\n                    let script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.async = !0;\n                    script.src = url;\n                    script.onload = function () {\n                        callback();\n                    };\n                    let head = document.getElementsByTagName('head')[0];\n                    head.insertBefore(script, head.firstChild); \n                }\n                \n                loadScript('https://code.jquery.com/jquery-3.6.0.min.js', () => {\n                    window.parent.refreshThirdPartyAd(window, document, window.$, \""+r+'", "'+t+'");\n                });\n            <\/script>\n        </body>\n        </html>\n    ',c.adServerUtil.createIframe(e,t,r)):this.runCode(window,document,e,S,!1)},O.prototype.destroyAd=function(e,t){t=c.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.deleteIframeIfNeeded(e,c.adServerUtil.buildIframeId(t)),this.deleteWaterfallNextFnIfNeeded(t)},O.prototype.runCode=function(e,t,r,o,n){n=c.adServerUtil.buildAdContentBlock(t,r,n);if(n)try{var i=h.utils.replaceAll(n,"-","_"),a="waterfallNextSsp_"+i;e[this.config.waterfallNextFunctions[i]=a]=function(){f.waterfallMarkers.markAsEmpty(r),m.placementModule.resetPlacementTagsVisibleCounter(E.placementConfigRepository.get(r.details.roxotPlacementId))};var s=b(r.waterfallConfig.currentSspConfig),l="window."+a+"();",d=o('<div id="third-party-'+n+'">'+(s=s.replace(v,l))+"</div>");o("#"+n).html(d),f.waterfallMarkers.markAsRendered(r),f.waterfallMarkers.markAsVisible(r)}catch(e){f.waterfallMarkers.markAsEmpty(r),g.rowrLogger.error(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Code insert error.",u.SSP_NAMES.THIRD_PARTY,{adConfig:r,exception:e}),p.errorLogger.error("SSP "+u.SSP_NAMES.THIRD_PARTY,"Code insert error.",{adConfig:r,exception:e})}},O.prototype.defineFnForIframe=function(){var i=this;window.refreshThirdPartyAd=function(e,t,r,o,n){i.runCode(e,t,s.adConfigRepository.get(o),r,!0),a.wrapperModule.updateIframeSize(t,document,n),document.getElementById(n).style.width="100%"}},O.prototype.deleteIframeIfNeeded=function(e,t){this.config.iframeModeEnabled&&c.adServerUtil.deleteIframe(e,t)},O.prototype.deleteWaterfallNextFnIfNeeded=function(e){var t=h.utils.replaceAll(e,"-","_"),e=this.config.waterfallNextFunctions[t];e&&window[e]&&(delete window[e],delete this.config.waterfallNextFunctions[t])},O);function O(){var e=y.call(this)||this;return e.config={inited:!1,waterfallNextFunctions:[],iframeModeEnabled:!1},e}r.ThirdPartyAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"../placementModule":103,"../repositories/adConfigRepository":105,"../repositories/placementConfigRepository":106,"../wrapperModule":117,"./AbstractAdServer":53,"./adServerUtil":73}],65:[function(e,t,o){"use strict";var n,r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(o,"__esModule",{value:!0}),o.AbstractVideoAdServer=o.CHECK_VISIBILITY_TIMEOUT_MS=o.ENGINE_RELOAD_TIMEOUT_MS=void 0;var i=e("../AbstractAdServer"),a=e("../../../../constants/variables"),s=e("../../loadManagerModule"),l=e("../../../../utils/utils"),d=e("../../loggers/rowrLoggerModule"),u=e("../../../../constants/constants"),c=e("../../loggers/errorLoggerModule"),f=e("../../../../utils/adConfigUtils"),g=e("../../timerManagerModule"),p=e("../../markers/waterfallMarkers"),m=e("../../dispatcherModule"),E=e("../../adTagDispatcherModule"),h=e("../../../../utils/wrapperUtils"),v=e("../../markers/wrapperMarkers"),S=e("../adServerUtil"),b=e("../../repositories/placementConfigRepository");o.ENGINE_RELOAD_TIMEOUT_MS=100,o.CHECK_VISIBILITY_TIMEOUT_MS=1e3;var y,r=(y=i.AbstractAdServer,r(O,y),O.prototype.getAdType=function(){return u.AD_TYPE.VIDEO},O.prototype.init=function(e){if(this.isInited())throw"Module already inited";var t=(a.variables.wrapperConfig.videojsLibs||{}).path||!1;t&&(this.config.videoJsLibsUrl=t),this.load(),this.config.inited=!0},O.prototype.load=function(){this.loadCss(this.config.videoJsCssModuleName,this.config.videoJsCssUrl),this.loadCss(this.config.videoJsImaCssModuleName,this.config.videoJsImaCssUrl),this.loadScript(this.config.imaSdkModuleName,this.config.imaSdkUrl),this.loadScript(this.config.videoJsLibsModuleName,this.config.videoJsLibsUrl)},O.prototype.refreshAd=function(e){var t;this.checkEnginesLoaded(e)&&((t=b.placementConfigRepository.get(e.details.roxotPlacementId)).isNeedRefreshVideoAd=!1,t.isReadyToHardRefreshVideoAd=!1,(t=S.adServerUtil.buildAdContentBlock(document,e,!1))?(t=this.createHtml(e,t))?(t=this.buildVideoPlayer(t),this.displayAd(e,t)):c.errorLogger.error("AbstractVideoAdServer","Failed to create video element."):p.waterfallMarkers.markAsEmpty(e))},O.prototype.destroyAd=function(e,t){t=S.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.clearAllSubscribers(t),this.clearAds(t),this.clearAdsManager(t),this.clearAdsLoader(t),this.clearAdDisplayContainer(t),this.clearRequestsCounter(t),this.clearErrorsCounter(t),this.clearUiElements(t),this.clearVideoElement(t),this.clearAdContainer(t),this.clearVideoContainer(t)},O.prototype.renderAd=function(e,t){var r=t.waterfallConfig.currentRoxotAdContentId;if(this.ads[r]=this.ads[r]||{isRendered:!1},this.ads[r].isRendered)d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Already rendered",this.tagName,{adConfig:t,adsManagers:this.adsManagers,isRendered:this.ads[r]});else{this.ads[r].isRendered=!0,d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Try to render ad",this.tagName,{adConfig:t,adsManagers:this.adsManagers});try{var o=this.getManager(t);if(!o)return d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot get adsManager",this.tagName,{adConfig:t,adsManagers:this.adsManagers[r]}),void p.waterfallMarkers.markAsEmpty(t);this.adDisplayContainers[t.waterfallConfig.currentRoxotAdContentId].initialize();var n=100===(n=e.currentWidth())?window.screen.width:n,i=100===(i=e.currentHeight())?window.screen.height:i,a=this.videoContainers[r].querySelector("video");a&&(a.volume=0,a.muted=!0),o.init(n,i,window.google.ima.ViewMode.NORMAL),o.setVolume(0),p.waterfallMarkers.markAsRendered(t),p.waterfallMarkers.markAsVisible(t),this.startAdsManagerIfVisible(t,o)}catch(e){d.rowrLogger.error(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Ads manager could not be started",this.tagName,{adError:e}),p.waterfallMarkers.markAsEmpty(t)}}},O.prototype.extractOrGenerateAdUnitName=function(e){var t=new URL(e).searchParams.get("iu");return t||(c.errorLogger.warning("Abstract Video SSP",'Failed to extract adUnitName - Get param "ui" not found in adTagUrl. Generate random adUnitName...',{adTagUrl:e}),t=l.utils.generateId("adUnitName")),t},O.prototype.loadCss=function(e,t){var r;s.loadManagerModule.isAlreadyLoaded(e)||(s.loadManagerModule.markAsAlreadyLoaded(e),r=this,l.utils.loadCss(t,function(){d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,e+" loaded.",r.tagName)}))},O.prototype.loadScript=function(e,t){var r;s.loadManagerModule.isAlreadyLoaded(e)||(s.loadManagerModule.markAsAlreadyLoaded(e),r=this,l.utils.loadScript(t,function(){d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,e+" loaded.",r.tagName)}))},O.prototype.checkEnginesLoaded=function(e){var t=this;if(window.google&&window.videojs)return!0;var r="Engine not loaded. Refresh ad after "+o.ENGINE_RELOAD_TIMEOUT_MS+" ms.";return d.rowrLogger.warning(u.LOGGER_COMPONENTS.SSP_COMPONENT,r,t.tagName,{adConfig:e}),c.errorLogger.warning("SSP "+t.tagName,r,{adConfig:e}),g.timerManagerModule.setTimeout("roxotVideo__waitModuleLoading-"+e.adId,function(){d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Refresh ad after "+o.ENGINE_RELOAD_TIMEOUT_MS+" ms wait.",t.tagName,{adConfig:e}),t.refreshAd(e)},o.ENGINE_RELOAD_TIMEOUT_MS,["ad-"+e.adId]),!1},O.prototype.createHtml=function(e,t){var r=this.createVideoContainer(e);if(!r)return null;var o=e.waterfallConfig.currentRoxotAdContentId;this.videoContainers[o]=r;var n=f.adConfigUtils.getFirstSizes(e),i=this.createVideoElement(e,n),e=this.createAdContainer(e,n);this.uiElements[o]={};n=this.createCountDown(o);e.insertAdjacentElement("afterbegin",n);n=this.createControls(o);n.addEventListener("mouseenter",this.onMouseEnter),n.addEventListener("mouseleave",this.onMouseLeave),e.insertAdjacentElement("beforeend",n);o=this.createProgressBar(o);n.insertAdjacentElement("beforeend",o),r.insertAdjacentElement("afterbegin",e),r.insertAdjacentElement("afterbegin",i);t=document.getElementById(t);return t?(t.style.overflow="hidden",t.insertAdjacentElement("afterbegin",r)?i:null):null},O.prototype.createVideoContainer=function(e){var t=document.createElement("div");t.style.position="relative",t.style.display="none",t.style.backgroundColor="black",t.classList.add("roxotVideoContainer");var r=h.wrapperUtils.getRoxotAdBlock(document,e);return r&&r.insertAdjacentElement("afterbegin",t)?(d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"VideoContainer created.",this.tagName,{adConfig:e}),t):null},O.prototype.createVideoElement=function(e,t){var r=document.createElement("video"),o=l.utils.generateId(this.videoElementIdPrefix);r.setAttribute("id",o),r.classList.add("roxotVideoElement");o=t.width.toString();r.style.width=o="0"!==o?o+"px":"100%";t=t.height.toString();return r.style.height=t="0"!==t?t+"px":"100%",r.style.cursor="pointer",this.videoElements[e.waterfallConfig.currentRoxotAdContentId]=r,d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Video Element created",this.tagName,{adConfig:e,videoElements:this.videoElements}),r},O.prototype.createAdContainer=function(e,t){var r=document.createElement("div");r.classList.add("roxotVideoAdContainer"),r.style.position="absolute",r.style.top="0",r.style.left="0";var o=t.width.toString();r.style.width=o="0"!==o?o+"px":"100%";t=t.height.toString();return r.style.height=t="0"!==t?t+"px":"100%",this.adContainers[e.waterfallConfig.currentRoxotAdContentId]=r,d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Ad container created",this.tagName,{adConfig:e,adContainers:this.adContainers}),r},O.prototype.createCountDown=function(e){var t=document.createElement("div");return t.classList.add("roxotCountDown"),t.style.position="absolute",t.style.top="5px",t.style.left="5px",t.style.zIndex="100",t.style.display="none",this.uiElements[e].countDown=t},O.prototype.createControls=function(e){var t=document.createElement("div");return t.classList.add("roxotControls"),t.style.height="1.4em",t.style.background="linear-gradient(to top,rgba(7,20,30,.7) 0,rgba(7,20,30,0) 100%)",t.style.position="absolute",t.style.width="100%",t.style.bottom="0",this.uiElements[e].controls=t},O.prototype.onMouseEnter=function(e){e.target.style.height="3.7em"},O.prototype.onMouseLeave=function(e){e.target.style.height="1.4em"},O.prototype.createProgressBar=function(e){var t=document.createElement("div");return t.classList.add("roxotProgressBar"),t.style.position="absolute",t.style.bottom="0",t.style.height="0.3em",t.style.top="1.2em",t.style.backgroundColor="#ecc546",this.uiElements[e].progressBar=t},O.prototype.onAdError=function(e,t){d.rowrLogger.error(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Ad Error.",this.tagName,{adConfig:e,errorEvent:t});var r=e.waterfallConfig.currentRoxotAdContentId;this.errorsCount[r]=this.errorsCount[r]||{cnt:0};t=this.errorsCount[r];t.cnt++,t.cnt<this.requestsCount[r].cnt||p.waterfallMarkers.markAsEmpty(e)},O.prototype.onVolumeChanged=function(e,t){d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Event fired onVolumeChanged",this.tagName,{adConfig:e,event:t})},O.prototype.onVolumeMuted=function(e,t){d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Event fired onVolumeMuted",this.tagName,{adConfig:e,event:t})},O.prototype.onAdStarted=function(e,t,r){var o=this;t.setVolume(0);var n=e.waterfallConfig.currentRoxotAdContentId;this.videoContainers[n].style.display="block";var i=this.uiElements[n],a=i.countDown;a.style.display="block",a.innerHTML="";var s=i.progressBar,l=r.getAd();s.style.width="0",g.timerManagerModule.replaceInterval("updateVideoAdUi"+n,function(){o.updateCountDown(a,t),o.updateProgressBar(s,l,t)},250,[n]),d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Event fired onAdStarted",this.tagName,{adConfig:e,event:r,adsManager:t})},O.prototype.onAdCompleted=function(e,t,r){var o=e.waterfallConfig.currentRoxotAdContentId;g.timerManagerModule.clearTimerIfExists("updateVideoAdUi"+o),d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Event fired onAdCompleted.",this.tagName,{adConfig:e,event:r,adsManager:t})},O.prototype.onAdLoaded=function(e,t,r){t.setVolume(0),d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Event fired onAdLoaded",this.tagName,{adConfig:e,event:r,adsManager:t})},O.prototype.onAdsManagerLoaded=function(e,t){var r=e.adConfig,o=e.player,n=e.ssp;d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Ads Manager Loaded.",n.tagName,{adConfig:r});e=t.getAdsManager();e.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,n.onAdError.bind(n,r)),e.addEventListener(window.google.ima.AdEvent.Type.VOLUME_CHANGED,n.onVolumeChanged.bind(n,r)),e.addEventListener(window.google.ima.AdEvent.Type.VOLUME_MUTED,n.onVolumeMuted.bind(n,r)),e.addEventListener(window.google.ima.AdEvent.Type.LOADED,n.onAdLoaded.bind(n,r,e)),e.addEventListener(window.google.ima.AdEvent.Type.STARTED,n.onAdStarted.bind(n,r,e)),e.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,n.onAdCompleted.bind(n,r,e)),e.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,n.onAllAdsCompleted.bind(n,{adConfig:r,player:o}));n=t.getUserRequestContext(),t=n.adUnitName;if(!t)return c.errorLogger.error("SSP "+this.tagName,"No adUnitName in userContext",{adConfig:r,userContext:n}),void e.destroy();this.registerAdsManager(r,e,t),m.dispatcherModule.dispatch(u.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER,{adConfig:r,player:o})},O.prototype.clearVideoContainer=function(e){this.videoContainers[e]&&(this.videoContainers[e].remove(),delete this.videoContainers[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear video container",this.tagName,{adId:e,videoContainers:this.videoContainers}))},O.prototype.clearAdsManager=function(e){if(this.adsManagers[e]){for(var t=0,r=this.adsManagers[e];t<r.length;t++)r[t].destroy();delete this.adsManagers[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear all ads managers",this.tagName,{adId:e,adsManagers:this.adsManagers})}},O.prototype.clearAllSubscribers=function(e){E.adTagDispatcherModule.offAll(e)},O.prototype.clearAds=function(e){this.ads[e]&&(delete this.ads[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear ads.",this.tagName,{adContentId:e,ads:this.ads}))},O.prototype.clearAdsLoader=function(e){this.adsLoaders[e]&&(this.adsLoaders[e].destroy(),delete this.adsLoaders[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear adsLoader.",this.tagName,{adContentId:e,adsLoaders:this.adsLoaders}))},O.prototype.clearAdDisplayContainer=function(e){this.adDisplayContainers[e]&&(this.adDisplayContainers[e].destroy(),delete this.adDisplayContainers[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear adDisplayContainer.",this.tagName,{adContentId:e,adDisplayContainers:this.adDisplayContainers}))},O.prototype.clearRequestsCounter=function(e){this.requestsCount[e]&&(delete this.requestsCount[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear requestsCount.",this.tagName,{adContentId:e,requestsCount:this.requestsCount}))},O.prototype.clearErrorsCounter=function(e){this.errorsCount[e]&&(delete this.errorsCount[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear errorsCount.",this.tagName,{adContentId:e,errorsCount:this.errorsCount}))},O.prototype.clearVideoElement=function(e){this.videoElements[e]&&(this.videoElements[e].remove(),delete this.videoElements[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear videoElements.",this.tagName,{adContentId:e,videoElements:this.videoElements}))},O.prototype.clearAdContainer=function(e){this.adContainers[e]&&(this.adContainers[e].remove(),delete this.adContainers[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear adContainers.",this.tagName,{adContentId:e,adContainers:this.adContainers}))},O.prototype.clearUiElements=function(e){var t;this.uiElements[e]&&((t=this.uiElements[e].countDown)&&t.remove(),(t=this.uiElements[e].controls)&&(t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave),t.remove()),(t=this.uiElements[e].progressBar)&&t.remove(),delete this.uiElements[e],d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Clear uiElements.",this.tagName,{adContentId:e,uiElements:this.uiElements}))},O.prototype.waitForVisibleAndRefresh=function(e){var t=this;if(h.wrapperUtils.isVisibleAd(e))return d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Roxot video block is visible. Marking as need to refresh...",t.tagName,{adConfig:e}),b.placementConfigRepository.get(e.details.roxotPlacementId).isNeedRefreshVideoAd=!0,void v.wrapperMarkers.markAsNeedRefresh(e);g.timerManagerModule.replaceTimeout("roxotVideo__checkVisibilityOnAllAdsCompleted-"+e.adId,function(){t.waitForVisibleAndRefresh(e)},o.CHECK_VISIBILITY_TIMEOUT_MS,["ad-"+e.adId])},O.prototype.waitForVisibleAndDisplayNextAd=function(e,t){var r=this;if(h.wrapperUtils.isVisibleAd(e))return d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Try to display next ad.",null,{adConfig:e}),void m.dispatcherModule.dispatch(u.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER,{adConfig:e,player:t});g.timerManagerModule.replaceTimeout("roxotVideo__checkVisibilityOnAllAdsCompletedForNextAd-"+e.adId,function(){r.waitForVisibleAndDisplayNextAd(e,t)},o.CHECK_VISIBILITY_TIMEOUT_MS,["ad-"+e.adId])},O.prototype.sendRequests=function(e,t,r){var o,n=r.waterfallConfig.currentRoxotAdContentId;for(o in this.requestsCount[n]={cnt:0},t)e.requestAds(t[o],{adUnitName:o}),this.requestsCount[n].cnt++;d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Send all requests.",this.tagName,{adConfig:r,requestsCount:this.requestsCount[n].cnt})},O.prototype.registerAdsManager=function(e,t,r){var o=e.waterfallConfig.currentRoxotAdContentId;this.adsManagers[o]=this.adsManagers[o]||{},this.adsManagers[o][r]=t,d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Register adsManager",this.tagName,{adConfig:e,adsManagers:this.adsManagers})},O.prototype.displayAd=function(e,t){var r=this,o=this.adContainers[e.waterfallConfig.currentRoxotAdContentId],n=this.videoElements[e.waterfallConfig.currentRoxotAdContentId],o=new window.google.ima.AdDisplayContainer(o,n);this.adDisplayContainers[e.waterfallConfig.currentRoxotAdContentId]=o;n=new window.google.ima.AdsLoader(o);this.adsLoaders[e.waterfallConfig.currentRoxotAdContentId]=n;n.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this,{adConfig:e,player:t,ssp:this}),!1),n.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this,e),!1);o=this.buildAdsRequests(e);this.sendRequests(n,o,e),E.adTagDispatcherModule.on(e.waterfallConfig.currentRoxotAdContentId,u.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER,function(){r.onNeedRenderAd({player:t,adConfig:e})})},O.prototype.hasAdsManager=function(e){e=this.adsManagers[e.waterfallConfig.currentRoxotAdContentId]||{};return!!Object.keys(e).length},O.prototype.startAdsManagerIfVisible=function(e,t){if(h.wrapperUtils.isVisibleAd(e))return t.start(),void d.rowrLogger.debug(u.LOGGER_COMPONENTS.SSP_COMPONENT,"Start adsManager",this.tagName,{adConfig:e});var r=this;g.timerManagerModule.replaceTimeout("roxotVideo__checkVisibilityAndStartAdsManager-"+e.adId,function(){r.startAdsManagerIfVisible(e,t)},o.CHECK_VISIBILITY_TIMEOUT_MS,["ad-"+e.adId])},O.prototype.updateCountDown=function(e,t){var r=t.getRemainingTime(),t=Math.floor(r/60),r=Math.floor(r%60).toString();r.length<2&&(r="0"+r),e.innerHTML=t+":"+r},O.prototype.updateProgressBar=function(e,t,r){r=r.getRemainingTime(),t=t.getDuration();e.style.width=((t-r)/t*100).toFixed(2)+"%"},O);function O(){var e=y.call(this)||this;return e.videoContainers={},e.videoElements={},e.adContainers={},e.adDisplayContainers={},e.adsLoaders={},e.adsManagers={},e.ads={},e.requestsCount={},e.errorsCount={},e.uiElements={},e.config={inited:!1,videoJsCssModuleName:"videoJsCss",videoJsCssUrl:"https://cdnjs.cloudflare.com/ajax/libs/video.js/7.16.0/video-js.min.css",videoJsImaCssModuleName:"videoJsImaCss",videoJsImaCssUrl:"https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.min.css",imaSdkModuleName:"imaSdk",imaSdkUrl:"//imasdk.googleapis.com/js/sdkloader/ima3.js",videoJsLibsModuleName:"videoJsLibs",videoJsLibsUrl:""},e}o.AbstractVideoAdServer=r},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../../../utils/adConfigUtils":134,"../../../../utils/utils":139,"../../../../utils/wrapperUtils":141,"../../adTagDispatcherModule":52,"../../dispatcherModule":84,"../../loadManagerModule":92,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../markers/wrapperMarkers":101,"../../repositories/placementConfigRepository":106,"../../timerManagerModule":113,"../AbstractAdServer":53,"../adServerUtil":73}],66:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},p=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotAdfoxVideoAdServer=void 0;var i=e("../AbstractAdServer"),m=e("../../../../constants/constants"),a=e("../../loadManagerModule"),E=e("../../../../utils/utils"),h=e("../../loggers/rowrLoggerModule"),v=e("../../loggers/errorLoggerModule"),S=e("../../timerManagerModule"),b=e("../../markers/waterfallMarkers"),y=e("../../repositories/placementConfigRepository"),d=e("../adServerUtil"),s=e("../../../../utils/adConfigUtils"),O=e("../../dispatcherModule"),u=e("../../adTagDispatcherModule"),l=e("../../../../utils/wrapperUtils"),c=e("./AbstractVideoAdServer"),f=e("../../markers/wrapperMarkers"),C=e("../../multiAdSliderModule"),A=e("../../../../constants/variables"),_=e("../../repositories/adConfigRepository"),N=e("../../wrapperModule"),M=e("../../../../utils/adBlockBuilder"),T=e("../../../../constants/limits"),w=e("../utils/adfoxUtil"),R=e("../utils/openRtbUtil"),P="Roxot Adfox Video SSP",L="roxotAdfoxVideo";var I,n=(I=i.AbstractAdServer,n(x,I),x.prototype.getAdType=function(){return m.AD_TYPE.VIDEO},x.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.config.iframeModeEnabled=A.variables.romConfig.iframeSspList.includes(m.SSP_NAMES.ROXOT_AD_FOX_VIDEO),this.config.iframeModeEnabled||(this.load(),this.config.inited=!0)},x.prototype.load=function(){var e;this.config.loaded||(a.loadManagerModule.isAlreadyLoaded(this.config.engineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),null!==(e=null===(e=null===window||void 0===window?void 0:window.ya)||void 0===e?void 0:e.videoAd)&&void 0!==e&&e.loadModule||E.utils.loadScript(this.config.engineUrl,function(){h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.",P)})),this.config.loaded=!0)},x.prototype.refreshAd=function(e){var t,r,o,n=this;S.timerManagerModule.clearTimerIfExists(S.timerManagerModule.buildRequestTimeoutTimerKey(e)),this.config.iframeModeEnabled?(t=d.adServerUtil.buildIframeId(e.waterfallConfig.currentRoxotAdContentId),A.variables.iframeCollection[t]=A.variables.iframeCollection[t]||{},A.variables.iframeCollection[t].id=t,window.refreshAdfoxVideo=function(e,t,r,o){n.runCode(_.adConfigRepository.get(r),e,t,o)},r=e.adId,o=this.config.engineUrl,r='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+r+"\"></div>\n            <script>\n                function loadScript(url, callback){\n                    let script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.async = !0;\n                    script.src = url;\n                    script.onload = function () {\n                        callback();\n                    };\n                    let head = document.getElementsByTagName('head')[0];\n                    head.insertBefore(script, head.firstChild); \n                }\n                let sdkLoaded = false;\n                \n                loadScript(\""+o+'", () => {sdkLoaded = true;});\n                \n                function loadAd() {\n                    if (!sdkLoaded) {\n                        setTimeout(() => {\n                            loadAd();\n                        }, 100);\n                        return;\n                    }\n                    \n                    window.parent.refreshAdfoxVideo(window, document, "'+r+'", "'+t+'");\n                }\n                \n                loadAd();\n            <\/script>\n        </body>\n        </html>\n    ',d.adServerUtil.createIframe(e,t,r)):this.checkEngineIsLoaded(e)&&this.runCode(e,window)},x.prototype.runCode=function(r,e,t,o){var n=this;void 0===t&&(t=null),void 0===o&&(o=null);var i=y.placementConfigRepository.get(r.details.roxotPlacementId);i.isNeedRefreshVideoAd=!1,i.isReadyToHardRefreshVideoAd=!1;var a=d.adServerUtil.buildAdContentBlock(t||document,r,!!t),s=M.adBlockBuilder.getRoxotAdContentBlock(r);s&&(s.style.position="relative"),this.hidePreviousBlock(r.waterfallConfig.currentRoxotAdContentId);var l=r.waterfallConfig.currentRoxotAdContentId;this.initCurrentAd(l),this.createHtml(r,a,l,t||document),this.requestAllAds(r,l,e),u.adTagDispatcherModule.on(l,m.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER_FIRST_VIDEO_AD,function(){t&&o&&N.wrapperModule.updateIframeSize(t,window.parent.document,o),n.renderFirstAd(l,r)}),u.adTagDispatcherModule.on(l,m.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER_NEXT_VIDEO_AD,function(){n.renderNextAd(l,r)}),u.adTagDispatcherModule.on(l,m.WRAPPER_EVENTS.WATERFALL_LEVEL.VIDEO_ERROR,function(){n.ads[l].errorsCount++;var e=n.ads[l].errorsCount,t=n.ads[l].requestsCount;t<=e&&(h.rowrLogger.error(m.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad was shown.",P,{adConfig:r,errorsCount:e,requestsCount:t}),v.errorLogger.error(P,"No ad was shown.",{adConfig:r}),n.stopCurrentAd(l),(null===(t=null===(t=null===(t=null==r?void 0:r.waterfallConfig)||void 0===t?void 0:t.currentSspConfig)||void 0===t?void 0:t.options)||void 0===t?void 0:t.forceShowStubContent)?n.hasStubContent(r)&&setTimeout(function(){S.timerManagerModule.clearTimerIfExists(S.timerManagerModule.buildRequestTimeoutTimerKey(r));var e=n.ads[l].videoContainer;e.parentElement.style.position="relative",n.showAdContainer(e),n.ads[l].videoElement.play(),h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Play forced stubContent.",P,{adConfig:r});e=(null===(e=null===(e=null===(e=null==r?void 0:r.waterfallConfig)||void 0===e?void 0:e.currentSspConfig)||void 0===e?void 0:e.options)||void 0===e?void 0:e.afterAdwareDuration)||0;S.timerManagerModule.replaceTimeout(L+"__waitForcedStubContent-"+l,function(){O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,placementId:i.placementId}),b.waterfallMarkers.markAsEmpty(r)},1e3*e,["ad-"+r.adId])},100):(O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,placementId:i.placementId}),b.waterfallMarkers.markAsEmpty(r)))})},x.prototype.destroyAd=function(e,t){t=d.adServerUtil.buildAdContentId(e,t);this.ads[t]&&(this.config.iframeModeEnabled?d.adServerUtil.deleteIframe(e,d.adServerUtil.buildIframeId(t)):(u.adTagDispatcherModule.offAll(t),delete this.ads[t],h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy ad.",P,{adConfig:e,ads:this.ads})))},x.prototype.initCurrentAd=function(e){this.ads[e]={},this.ads[e].requestsCount=0,this.ads[e].errorsCount=0,this.ads[e].hasAtLeastOneAd=!1,this.ads[e].isStopped=!1,this.ads[e].adPlaybackControllers=[]},x.prototype.createHtml=function(e,t,r,o){var n,i,a=function(e,t){if(0!==e.width||0!==e.height)return e;var r=l.wrapperUtils.getRoxotAdBlock(document,t),t=t.details.placement,t=r.closest("#"+t).parentElement;return e.width=t.offsetWidth,e.height=t.offsetHeight,e}(a=s.adConfigUtils.getFirstSizes(e),e),n=(n=a,(i=(i=o).createElement("div")).style.position="relative",i.style.width=n.width+"px",i.style.height=n.height+"px",i.style.background="none",i.classList.add("rxt-adfox-video-container"),i.style.top="-9999px",i),a=(i=e,e=a,(a=(a=o).createElement("video")).setAttribute("width",e.width.toString()),a.setAttribute("height",e.height.toString()),a.classList.add("rxt-adfox-video-element"),a.muted=!0,a.preload="none",a.loop=!0,null!==(e=null===(e=null===(e=null==i?void 0:i.waterfallConfig)||void 0===e?void 0:e.currentSspConfig)||void 0===e?void 0:e.options)&&void 0!==e&&e.stubVideoPath&&(a.src=null===(i=null===(i=null===(i=null==i?void 0:i.waterfallConfig)||void 0===i?void 0:i.currentSspConfig)||void 0===i?void 0:i.options)||void 0===i?void 0:i.stubVideoPath),a);o.getElementById(t).insertAdjacentElement("afterbegin",n),n.insertAdjacentElement("afterbegin",a),this.ads[r].videoElement=a,this.ads[r].videoContainer=n},x.prototype.checkEngineIsLoaded=function(e){if(null!==(t=null===(t=null===window||void 0===window?void 0:window.ya)||void 0===t?void 0:t.videoAd)&&void 0!==t&&t.loadModule)return!0;var t="Engine not loaded. Refresh ad after 100 ms.";h.rowrLogger.warning(m.LOGGER_COMPONENTS.SSP_COMPONENT,t,P,{adConfig:e}),v.errorLogger.warning(P,t,{adConfig:e});var r=this;return S.timerManagerModule.setTimeout("roxotAdfoxVideo__waitModuleLoading-"+e.adId,function(){h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Refresh ad after 100 ms wait.",P,{adConfig:e}),r.refreshAd(e)},100,["ad-"+e.adId]),!1},x.prototype.requestAllAds=function(i,a,s){return g(this,void 0,void 0,function(){var t,r,o,n;return p(this,function(e){for(t=i.waterfallConfig.currentSspConfig.configs,this.ads[a].requestsCount=t.length,r=0,o=t;r<o.length;r++)n=o[r],this.requestAd(i,a,n,s);return[2]})})},x.prototype.requestAd=function(d,u,c,f){return g(this,void 0,void 0,function(){var t,r,o,n,i,a,s,l=this;return p(this,function(e){switch(e.label){case 0:return(e.trys.push([0,6,,7]),c.adFoxParameters&&w.AdfoxUtil.replaceMacrosIfNeed(c.adFoxParameters.params,P,d),(t=c).openRtbBids)?((r={}).partnerId=c.partnerId,r.category=c.category,o=r,[4,function(i,a){return g(this,void 0,void 0,function(){var t,r,o,n;return p(this,function(e){switch(e.label){case 0:for(t=E.utils.deepCloneJson(i),r=0,o=t.openRtbBids;r<o.length;r++)(n=o[r]).options=n.options||{},n.options.isVideo=!0;return[4,R.OpenRtbUtil.requestAd(t.openRtbBids,t.openRtbOptions||{},a)];case 1:return[2,e.sent().html.replace('"','"')]}})})}(c,d)]):[3,2];case 1:o.vast=e.sent(),t=r,e.label=2;case 2:return[4,f.ya.videoAd.loadModule("AdLoader")];case 3:return[4,e.sent().AdLoader.create(t)];case 4:return[4,e.sent().loadAd()];case 5:return s=e.sent(),n=this.ads[u].videoElement,i=this.ads[u].videoContainer,s=s.createPlaybackController(n,i),this.pushAdPlaybackController(u,s,d),a=this,s.subscribe("AdPodStarted",function(){var e;h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"AdPodStarted",P,{adConfig:d}),a.showAdContainer(i),a.ads[u].hasAtLeastOneAd||(a.ads[u].hasAtLeastOneAd=!0,b.waterfallMarkers.markAsRendered(d),b.waterfallMarkers.markAsVisible(d),a.clearRequestTimeout(d),e=y.placementConfigRepository.get(d.details.roxotPlacementId),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_STARTED,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_STARTED,placementId:e.placementId}),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_VIDEO_STARTED,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_VIDEO_STARTED,placementId:e.placementId}),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_IMPRESSION,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_IMPRESSION,placementId:e.placementId}))}),s.subscribe("AdStopped",function(){if(h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"AdStopped",P,{adConfig:d}),a.ads[u])if(a.ads[u].isStopped)h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"AdStopped - isStopped",P,{adConfig:d});else if(a.ads[u].isRendering=!1,l.ads[u].adPlaybackControllers.length)O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER_NEXT_VIDEO_AD,{adConfig:d});else{if(!a.ads[u].hasAtLeastOneAd)return a.stopCurrentAd(u),v.errorLogger.warning(P,"No ad was shown",{adConfig:d}),h.rowrLogger.error(m.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad was shown, !ssp.ads[currentId].hasAtLeastOneAd.",P,{adConfig:d}),void O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.WATERFALL_LEVEL.VIDEO_ERROR,{adConfig:d});h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Play stub content (if exists) and waiting for refresh.",P,{adConfig:d}),a.hasStubContent(d)?(l.showAdContainer(i),setTimeout(function(){n.play()},100)):i.style.background="none";var e=(null===(e=null===(e=null===(e=null==d?void 0:d.waterfallConfig)||void 0===e?void 0:e.currentSspConfig)||void 0===e?void 0:e.options)||void 0===e?void 0:e.afterAdwareDuration)||0;S.timerManagerModule.replaceTimeout(L+"__waitForNextAd-"+u,function(){var e;C.multiAdSliderModule.requestNextAdIfNeed(d)||(e=y.placementConfigRepository.get(d.details.roxotPlacementId),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_VIDEO_COMPLETE,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_VIDEO_COMPLETE,placementId:e.placementId}),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_STOPPED,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_STOPPED,placementId:e.placementId}),a.waitForVisibleAndRefresh(d))},1e3*e,["ad-"+d.adId])}else h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"AdStopped - !ssp.ads[currentId]",P,{adConfig:d,ads:a.ads,currentId:u})}),s.subscribe("AdPodError",function(e){h.rowrLogger.error(m.LOGGER_COMPONENTS.SSP_COMPONENT,"AdPodError",P,{adConfig:d,err:e}),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.WATERFALL_LEVEL.VIDEO_ERROR,{adConfig:d})}),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.WATERFALL_LEVEL.NEED_RENDER_FIRST_VIDEO_AD,{adConfig:d}),[3,7];case 6:return s=e.sent(),h.rowrLogger.error(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Something went wrong.",P,{error:s,adConfig:d}),O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.WATERFALL_LEVEL.VIDEO_ERROR,{adConfig:d}),[3,7];case 7:return[2]}})})},x.prototype.renderFirstAd=function(e,t){var r;this.ads[e].isRendering?h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Video is already rendering.",P,{adConfig:t,ads:this.ads}):(this.setRequestTimeout(t),r=this.getNextAdPlaybackController(e,t),this.ads[e].isRendering=!0,h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Try to render first ad.",P,{adConfig:t,ads:this.ads}),r.playAd(),this.pauseFirstAd(t,r))},x.prototype.pauseFirstAd=function(e,t){var r=1e3*(null===(r=null===(r=null===(r=null==e?void 0:e.waterfallConfig)||void 0===r?void 0:r.currentSspConfig)||void 0===r?void 0:r.options)||void 0===r?void 0:r.pauseFirstAdTimeout)||3e3,o=this;S.timerManagerModule.replaceTimeout(L+"__pauseFirstAd-"+e.adId,function(){t.pauseAd(),h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Pause first ad",P,{adConfig:e}),o.resumeAdIfVisible(e,t)},r,["ad-"+e.adId])},x.prototype.resumeAdIfVisible=function(e,t){var r;l.wrapperUtils.isVisibleAd(e)?(t.resumeAd(),h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Resume first ad",P,{adConfig:e})):(r=this,S.timerManagerModule.replaceTimeout(L+"__resumeFirstAd-"+e.adId,function(){r.resumeAdIfVisible(e,t)},c.CHECK_VISIBILITY_TIMEOUT_MS,["ad-"+e.adId]))},x.prototype.renderNextAd=function(e,t){var r=this.getNextAdPlaybackController(e,t);r?(this.ads[e].isRendering=!0,h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Try to render next ad.",P,{adConfig:t,ads:this.ads}),setTimeout(function(){r.playAd()},100)):h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Try to renderNexAt, no adPlaybackController left.",P,{adConfig:t,ads:this.ads})},x.prototype.waitForVisibleAndRefresh=function(e){var t=this;if(l.wrapperUtils.isVisibleAd(e))return h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Roxot adfox video block is visible. Marking as need to refresh...",P,{adConfig:e}),y.placementConfigRepository.get(e.details.roxotPlacementId).isNeedRefreshVideoAd=!0,void f.wrapperMarkers.markAsNeedRefresh(e);S.timerManagerModule.replaceTimeout(L+"__checkVisibilityOnAllAdsCompleted-"+e.adId,function(){t.waitForVisibleAndRefresh(e)},c.CHECK_VISIBILITY_TIMEOUT_MS,["ad-"+e.adId])},x.prototype.getNextAdPlaybackController=function(e,t){e=this.ads[e].adPlaybackControllers.shift();return h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Get next adPlaybackController.",P,{adPlaybackController:e,adConfig:t}),e},x.prototype.pushAdPlaybackController=function(e,t,r){this.ads[e].adPlaybackControllers.push(t),h.rowrLogger.debug(m.LOGGER_COMPONENTS.SSP_COMPONENT,"Push adPlaybackController.",P,{adPlaybackController:t,adConfig:r})},x.prototype.hasStubContent=function(e){return!(null===(e=null===(e=null===(e=null==e?void 0:e.waterfallConfig)||void 0===e?void 0:e.currentSspConfig)||void 0===e?void 0:e.options)||void 0===e||!e.stubVideoPath)},x.prototype.showAdContainer=function(e){e.style.top="unset"},x.prototype.setRequestTimeout=function(t){var e=1e3*s.adConfigUtils.getLimitValue(t,T.REQUEST_TIMEOUT_LIMIT_NAME),r=this,o=t.waterfallConfig.currentRoxotAdContentId;S.timerManagerModule.replaceTimeout(S.timerManagerModule.buildRequestTimeoutTimerKey(t),function(){r.stopCurrentAd(o),r.destroyAd(t,void 0),v.errorLogger.warning(P,"Not responded, Timed-out.",{adConfig:t});var e=y.placementConfigRepository.get(t.details.roxotPlacementId);O.dispatcherModule.dispatch(m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,{type:m.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,placementId:e.placementId}),b.waterfallMarkers.markAsTimeout(t),b.waterfallMarkers.markAsEmpty(t)},e,["ad-"+t.adId])},x.prototype.clearRequestTimeout=function(e){S.timerManagerModule.clearTimerIfExists(S.timerManagerModule.buildRequestTimeoutTimerKey(e))},x.prototype.stopCurrentAd=function(e){this.ads[e]&&(this.ads[e].isStopped=!0)},x.prototype.hidePreviousBlock=function(e){var t=e.split("-"),e=t.length-1;t[e]=parseInt(t[e])-1;t=t.join("-"),t=document.getElementById(t);t&&(t.style.position="absolute")},x);function x(){var e=I.call(this)||this;return e.ads={},e.config={inited:!1,loaded:!1,engineUrl:"https://yandex.ru/ads/system/adsdk.js",engineName:"yandexVideoAdsSdk",iframeModeEnabled:!1},e}r.RoxotAdfoxVideoAdServer=n},{"../../../../constants/constants":49,"../../../../constants/limits":50,"../../../../constants/variables":51,"../../../../utils/adBlockBuilder":133,"../../../../utils/adConfigUtils":134,"../../../../utils/utils":139,"../../../../utils/wrapperUtils":141,"../../adTagDispatcherModule":52,"../../dispatcherModule":84,"../../loadManagerModule":92,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../markers/wrapperMarkers":101,"../../multiAdSliderModule":102,"../../repositories/adConfigRepository":105,"../../repositories/placementConfigRepository":106,"../../timerManagerModule":113,"../../wrapperModule":117,"../AbstractAdServer":53,"../adServerUtil":73,"../utils/adfoxUtil":79,"../utils/openRtbUtil":81,"./AbstractVideoAdServer":65}],67:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotInOutStreamAdServer=void 0;var i,a=e("./AbstractVideoAdServer"),l=e("../../../../constants/constants"),d=e("../../loggers/rowrLoggerModule"),s=e("../../../../constants/variables"),u=e("../../timerManagerModule"),c=e("../adServerUtil"),f=e("../../multiAdSliderModule"),g=e("../../repositories/placementConfigRepository"),n=(i=a.AbstractVideoAdServer,n(p,i),p.prototype.buildVideoPlayer=function(e){e=window.videojs(e,{loop:!0,muted:!0,preload:"none"});return e.src({src:s.variables.wrapperConfig.stubVideoPath,type:"video/mp4"}),e},p.prototype.onAllAdsCompleted=function(e){var t,r,o=e.adConfig,n=e.player,e=o.waterfallConfig.currentRoxotAdContentId;d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Ads completed. Wait to render next ad.",this.tagName,{adConfig:o}),this.hasAdsManager(o)?(t=o.waterfallConfig.currentRoxotAdContentId,this.ads[t].isRendered=!1,this.waitForVisibleAndDisplayNextAd(o,n)):((t=this.adContainers[o.waterfallConfig.currentRoxotAdContentId])&&t.remove(),n.play(),n=null!==(n=null===(n=null===(n=null==o?void 0:o.waterfallConfig.currentSspConfig)||void 0===n?void 0:n.options)||void 0===n?void 0:n.afterAdwareDuration)&&void 0!==n?n:5,r=this,g.placementConfigRepository.get(o.details.roxotPlacementId).isReadyToHardRefreshVideoAd=!0,u.timerManagerModule.replaceTimeout("roxotInOutStream__waitForNextAd-"+e,function(){f.multiAdSliderModule.requestNextAdIfNeed(o)||r.waitForVisibleAndRefresh(o)},1e3*n,["ad-"+o.adId]))},p.prototype.buildAdsRequests=function(e){for(var t={},r=0,o=0,n=(((e.waterfallConfig||{}).currentSspConfig||{}).options||{}).vasts||[];o<n.length;o++){var i=n[o],a=r+++"__"+this.extractOrGenerateAdUnitName(i),s=new window.google.ima.AdsRequest;s.adTagUrl=c.adServerUtil.addKvToVideoTagUrl(i,e),s.setAdWillPlayMuted(!0),t[a]=s}return d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Build ads requests.",this.tagName,{adConfig:e,requests:t}),t},p.prototype.onNeedRenderAd=function(e){var t=e.player,e=e.adConfig;this.renderAd(t,e)},p.prototype.getManager=function(e){var t,r=this.adsManagers[e.waterfallConfig.currentRoxotAdContentId]||{};if(!Object.keys(r).length)return null;for(t in r)if(r.hasOwnProperty(t)){var o=r[t];return delete r[t],o}},p.prototype.createVideoElement=function(e,t){t=i.prototype.createVideoElement.call(this,e,t);return this.addClickableUrl(t,e),t},p.prototype.addClickableUrl=function(e,t){var r,o=null===(r=null===(r=t.waterfallConfig.currentSspConfig)||void 0===r?void 0:r.options)||void 0===r?void 0:r.clickableUrl;o&&(e.onclick=function(){window.open(o,"_blank")},d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Add clickable url "+o,this.tagName,{adConfig:t}))},p);function p(){var e=null!==i&&i.apply(this,arguments)||this;return e.tagName="Roxot InOutStream",e.videoElementIdPrefix="in-out-stream-",e}r.RoxotInOutStreamAdServer=n},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loggers/rowrLoggerModule":97,"../../multiAdSliderModule":102,"../../repositories/placementConfigRepository":106,"../../timerManagerModule":113,"../adServerUtil":73,"./AbstractVideoAdServer":65}],68:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.RoxotOutStreamAdServer=void 0;var i,a=e("../../../../constants/constants"),s=e("../../loggers/rowrLoggerModule"),l=e("../../markers/waterfallMarkers"),d=e("../../loggers/errorLoggerModule"),u=e("./AbstractVideoAdServer"),c=e("../adServerUtil"),f=e("../../multiAdSliderModule"),n=(i=u.AbstractVideoAdServer,n(g,i),g.prototype.buildVideoPlayer=function(e){return window.videojs(e)},g.prototype.buildAdsRequests=function(e){var t=(e.waterfallConfig||{}).currentSspConfig||{},r=c.adServerUtil.addKvToVideoTagUrl(t.adTagUrl,e);if(!r)return d.errorLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad tag url.",{currentSspConfig:t,adConfig:e}),s.rowrLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad tag url.",this.tagName,{currentSspConfig:t,adConfig:e}),void l.waterfallMarkers.markAsEmpty(e);t=new window.google.ima.AdsRequest;t.adTagUrl=r,t.setAdWillPlayMuted(!0);e={};return e[this.extractOrGenerateAdUnitName(r)]=t,e},g.prototype.onNeedRenderAd=function(e){var t=e.player,e=e.adConfig;this.renderAd(t,e)},g.prototype.getManager=function(e){var t,r=this.adsManagers[e.waterfallConfig.currentRoxotAdContentId]||{};if(!Object.keys(r).length)return null;for(t in r)if(r.hasOwnProperty(t)){var o=r[t];return delete r[t],o}},g.prototype.onAllAdsCompleted=function(e){e=e.adConfig;f.multiAdSliderModule.requestNextAdIfNeed(e)||(s.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Ads completed. Check visibility and refresh adConfig...",this.tagName,{adConfig:e}),this.waitForVisibleAndRefresh(e))},g);function g(){var e=null!==i&&i.apply(this,arguments)||this;return e.tagName="Roxot OutStream",e.videoElementIdPrefix="out-stream-",e}r.RoxotOutStreamAdServer=n},{"../../../../constants/constants":49,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../multiAdSliderModule":102,"../adServerUtil":73,"./AbstractVideoAdServer":65}],69:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.VideoContentPlayerAdServer=void 0;var i,a=e("./AbstractAdServer"),s=e("./adServerUtil"),l=e("../markers/waterfallMarkers"),d=e("../../../constants/constants"),u=e("../loggers/errorLoggerModule"),n=(i=a.AbstractAdServer,n(c,i),c.prototype.isInited=function(){return this.config.inited},c.prototype.destroyAd=function(e,t){},c.prototype.getAdType=function(){return d.AD_TYPE.VIDEO},c.prototype.init=function(e){this.config.inited=!0},c.prototype.load=function(){},c.prototype.refreshAd=function(t){var e=s.adServerUtil.buildAdContentBlock(document,t,!1),r=document.createElement("video");r.style.width="100%",r.style.height="100%",r.style.minWidth="1px",r.style.minHeight="1px",r.src=t.waterfallConfig.currentSspConfig.videoUrl,r.controls=!0,r.onerror=function(e){u.errorLogger.error("SSP VideoContentPlayerAdServer","Error while loading video",{adConfig:t,event:e}),l.waterfallMarkers.markAsEmpty(t)};var o=t.waterfallConfig.currentSspConfig.options||{};(void 0!==o.muted?o:this.config.defaults).muted&&(r.muted=!0,r.volume=0),(void 0!==o.autoplay?o:this.config.defaults).autoplay&&(r.autoplay=!0),document.getElementById(e).appendChild(r),l.waterfallMarkers.markAsRendered(t),l.waterfallMarkers.markAsVisible(t)},c);function c(){var e=null!==i&&i.apply(this,arguments)||this;return e.config={inited:!1,defaults:{autoplay:!0,muted:!0}},e}r.VideoContentPlayerAdServer=n},{"../../../constants/constants":49,"../loggers/errorLoggerModule":93,"../markers/waterfallMarkers":100,"./AbstractAdServer":53,"./adServerUtil":73}],70:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.VideoNowAdServer=void 0;var i,d=e("../../../constants/constants"),u=e("../loggers/rowrLoggerModule"),c=e("../loggers/errorLoggerModule"),a=e("../loadManagerModule"),s=e("../../../utils/utils"),f=e("../timerManagerModule"),g=e("../markers/waterfallMarkers"),p=e("./adServerUtil"),l=e("../../../constants/variables"),e=e("./AbstractAdServer"),m=l.variables.rowrJq,n=(i=e.AbstractAdServer,n(E,i),E.prototype.getAdType=function(){return d.AD_TYPE.VIDEO},E.prototype.init=function(e){if(this.isInited())throw"Module already inited";var t=e.tagId||!1;if(!t)return u.rowrLogger.error(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Option tagId is empty.","VideoNow"),void c.errorLogger.error("SSP VideoNow","Option tagId is empty.");e.options=e.options||{},this.config.moduleConfig=e.options.moduleConfig||this.config.moduleConfig,this.config.engineUrl=this.config.engineTemplate.replace("__ID__",t),this.load(),this.config.inited=!0},E.prototype.load=function(){a.loadManagerModule.isAlreadyLoaded(this.config.engineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),s.utils.loadScript(this.config.engineUrl,function(){u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.","VideoNow")}))},E.prototype.getTimerName=function(e){return"VideoNowSsp_RenderTimeout-"+e.adId},E.prototype.refreshAd=function(t){var r={adConfig:t,sspConfig:this.config};if(window.vnModuleCreate||!1){if(!this.config.inited)return u.rowrLogger.error(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Engine not loaded.","VideoNow",r),c.errorLogger.error("SSP VideoNow","Engine not loaded.",r),void g.waterfallMarkers.markAsEmpty(t);var e=p.adServerUtil.buildAdContentBlock(document,t,!1);if(e){var o=m('<div id="videonowAdunit" style="width: 100%; height: 100%;"></div>');m("#"+e).html(o);try{var n=Math.round(1e6*Math.random());this.config.requestId=n,u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Request "+n+".","VideoNow",r);var i=this.config.moduleConfig;r.requestSettings=i;var a=window.vnModuleCreate();this.config.module=a,this.config.adUnitId=t.waterfallConfig.currentRoxotAdContentId;var s=this;a.subscribe(function(){return s.config.requestId!==n?(u.rowrLogger.warning(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Event for different request  "+n+": AdLoaded.","VideoNow",r),void c.errorLogger.warning("SSP VideoNow","Event for different request  "+n+": AdLoaded.",r)):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Has ad.","VideoNow",r),a.startAd(i),u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"module.startAd.","VideoNow",r),g.waterfallMarkers.markAsRendered(t),void f.timerManagerModule.replaceTimeout(s.getTimerName(t),function(){c.errorLogger.warning("SSP VideoNow",'Ad server "VideoNow" returns timeout.',r),g.waterfallMarkers.markAsEmpty(t)},this.config.renderTimeoutMilliseconds,["ad-"+t.adId]))},"AdLoaded"),a.subscribe(function(){return s.config.requestId!==n?(u.rowrLogger.warning(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Event for different request  "+n+": AdError.","VideoNow",r),void c.errorLogger.warning("SSP VideoNow","Event for different request  "+n+": AdError.",r)):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad or error.","VideoNow",r),void g.waterfallMarkers.markAsEmpty(t))},"AdError"),a.subscribe(function(){return s.config.requestId!==n?(u.rowrLogger.warning(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Event for different request  "+n+": AdStarted.","VideoNow",r),void c.errorLogger.warning("SSP VideoNow","Event for different request  "+n+": AdStarted.",r)):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Start ad.","VideoNow",r),void f.timerManagerModule.clearTimerIfExists(s.getTimerName(t)))},"AdStarted"),a.subscribe(function(){return s.config.requestId!==n?(u.rowrLogger.warning(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Event for different request  "+n+": AdImpression.","VideoNow",r),void c.errorLogger.warning("SSP VideoNow","Event for different request  "+n+": AdImpression.",r)):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Ad impression.","VideoNow",r),void g.waterfallMarkers.markAsVisible(t))},"AdImpression"),a.subscribe(function(){return s.config.requestId!==n?(u.rowrLogger.warning(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Event for different request  "+n+": AdStopped.","VideoNow",r),void c.errorLogger.warning("SSP VideoNow","Event for different request "+n+": AdStopped.",r)):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"End video.","VideoNow",r),void(t.isNeedRefresh=!0))},"AdStopped")}catch(e){r.exception=e,u.rowrLogger.error(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Ad request error.","VideoNow",r),c.errorLogger.error("SSP VideoNow","Ad request error.",r),g.waterfallMarkers.markAsEmpty(t)}}}else{var l=this;f.timerManagerModule.replaceTimeout("videoNow__waitModuleLoading-"+t.adId,function(){u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Refresh ad after 100 ms wait.","VideoNow",r),l.refreshAd(t)},100,["ad-"+t.adId])}},E.prototype.destroyAd=function(e,t){p.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t)!==this.config.adUnitId||(t=this.config.module)&&("destroyed"!==(t.state||"undefined")&&(u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy module manually.","VideoNow",{adConfig:e,sspConfig:this.config}),t.stopAd()),this.config.module=null,this.config.adUnitId=null,this.config.previousRequestId=this.config.requestId,this.config.requestId=null)},E);function E(){var e=i.call(this)||this;return e.config={inited:!1,engineTemplate:"//static.videonow.ru/vn_init.js?profileId=__ID__&initOnly=1",engineName:"video_now",adUnitId:null,module:null,requestId:null,previousRequestId:null,renderTimeoutMilliseconds:1e4,moduleConfig:{checkVisibility:!1},engineUrl:""},e}r.VideoNowAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../loadManagerModule":92,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"../timerManagerModule":113,"./AbstractAdServer":53,"./adServerUtil":73}],71:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.YandexAdServer=void 0;var i,a=e("../../../constants/constants"),s=e("../loadManagerModule"),l=e("../../../utils/utils"),d=e("../loggers/rowrLoggerModule"),u=e("../loggers/errorLoggerModule"),c=e("../timerManagerModule"),f=e("../counterModule"),g=e("../markers/waterfallMarkers"),p=e("./adServerUtil"),m=e("./AbstractAdServer"),E=e("../../../constants/variables"),n=(i=m.AbstractAdServer,n(h,i),h.prototype.getAdType=function(){return a.AD_TYPE.BANNER},h.prototype.init=function(e){if(E.variables.wrapperConfig.yandexIntegrationType===a.YANDEX_INTEGRATION_TYPES.DIRECT&&u.errorLogger.error("SSP Yandex",'Do not use ssp "'+a.SSP_NAMES.YANDEX+'" in "'+E.variables.wrapperConfig.yandexIntegrationType+'" yandex integration type.',{config:e,wrapperConfig:E.variables.wrapperConfig}),this.isInited())throw"Module already inited";this.load(),this.config.inited=!0},h.prototype.load=function(){var e;this.config.loaded||(s.loadManagerModule.isAlreadyLoaded(this.config.engineName)?this.config.loaded=!0:(s.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),l.utils.loadScript((e=this).config.engineUrl,function(){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.","Yandex"),e.config.loaded=!0})))},h.prototype.refreshAd=function(t){if(this.config.loaded){window.yaContextCb=window.yaContextCb||[];var e=t.waterfallConfig.currentSspConfig,r=p.adServerUtil.buildAdContentBlock(document,t,!1);if(r)try{d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Yandex request.","Yandex",{adConfig:t});var o={blockId:e.tagId,renderTo:r,pageNumber:f.counterModule.getAdServerCounterValue(t,a.COUNTERS.REQUEST_COUNT),statId:void 0,onError:function(e){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad.","Yandex",{adConfig:t,error:e}),g.waterfallMarkers.markAsEmpty(t)},onRender:function(e){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Has ad.","Yandex",{adConfig:t,yandexResponse:e}),g.waterfallMarkers.markAsRendered(t),g.waterfallMarkers.markAsVisible(t)}};e.options=e.options||{};var n=parseInt(e.options.statsId||null);n&&(o.statId=n),window.yaContextCb.push(function(){window.Ya.Context.AdvManager.render(o)})}catch(e){g.waterfallMarkers.markAsEmpty(t),d.rowrLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Yandex",{adConfig:t,exception:e}),u.errorLogger.error("SSP Yandex","Request error "+e+".",{adConfig:t,exception:e})}}else{n="Engine not loaded. Refresh ad after 100 ms.";d.rowrLogger.warning(a.LOGGER_COMPONENTS.SSP_COMPONENT,n,"Yandex",{adConfig:t}),u.errorLogger.warning("SSP Yandex",n,{adConfig:t});var i=this;c.timerManagerModule.setTimeout("yandexSsp__waitModuleLoading-"+t.adId,function(){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Refresh ad after 100 ms wait.","Yandex",{adConfig:t}),i.refreshAd(t)},100,["ad-"+t.adId])}},h.prototype.destroyAd=function(e,t){void 0===t&&(t=void 0)},h);function h(){var e=i.call(this)||this;return e.config={inited:!1,loaded:!1,engineUrl:"https://yandex.ru/ads/system/context.js",engineName:"yandex_context"},e}r.YandexAdServer=n},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../counterModule":82,"../loadManagerModule":92,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"../timerManagerModule":113,"./AbstractAdServer":53,"./adServerUtil":73}],72:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.YandexFullscreenAdServer=void 0;var i,a=e("../../../constants/constants"),s=e("../loadManagerModule"),l=e("../../../utils/utils"),d=e("../loggers/rowrLoggerModule"),u=e("./AbstractAdServer"),c=e("../loggers/errorLoggerModule"),f=e("../markers/waterfallMarkers"),g=e("../timerManagerModule"),p="Yandex Fullscreen",m="SSP Yandex Fullscreen",n=(i=u.AbstractAdServer,n(E,i),E.prototype.getAdType=function(){return a.AD_TYPE.BANNER},E.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.load(),this.config.inited=!0},E.prototype.load=function(){var e;this.config.loaded||(s.loadManagerModule.isAlreadyLoaded(this.config.engineName)?this.config.loaded=!0:(s.loadManagerModule.markAsAlreadyLoaded(this.config.engineName),l.utils.loadScript((e=this).config.engineUrl,function(){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"SSP loaded.",p),e.config.loaded=!0})))},E.prototype.refreshAd=function(t){if(this.config.loaded){window.yaContextCb=window.yaContextCb||[];var e=t.waterfallConfig.currentSspConfig;try{d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Yandex request.","Yandex",{adConfig:t});var r={blockId:e.tagId,type:"fullscreen",platform:"touch",onError:function(e){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad.",p,{adConfig:t,error:e}),f.waterfallMarkers.markAsEmpty(t)},onRender:function(e){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Has ad.",p,{adConfig:t,yandexResponse:e}),f.waterfallMarkers.markAsRendered(t),f.waterfallMarkers.markAsVisible(t)}};window.yaContextCb.push(function(){window.Ya.Context.AdvManager.render(r)})}catch(e){f.waterfallMarkers.markAsEmpty(t),d.rowrLogger.error(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Yandex",{adConfig:t,exception:e}),c.errorLogger.error(m,"Request error "+e+".",{adConfig:t,exception:e})}}else{e="Engine not loaded. Refresh ad after 100 ms.";d.rowrLogger.warning(a.LOGGER_COMPONENTS.SSP_COMPONENT,e,p,{adConfig:t}),c.errorLogger.warning(m,e,{adConfig:t});var o=this;g.timerManagerModule.setTimeout("yandexFullscreenSsp__waitModuleLoading-"+t.adId,function(){d.rowrLogger.debug(a.LOGGER_COMPONENTS.SSP_COMPONENT,"Refresh ad after 100 ms wait.",p,{adConfig:t}),o.refreshAd(t)},100,["ad-"+t.adId])}},E.prototype.destroyAd=function(e,t){void 0===t&&(t=void 0)},E);function E(){var e=i.call(this)||this;return e.config={inited:!1,loaded:!1,engineUrl:"https://yandex.ru/ads/system/context.js",engineName:"yandex_context"},e}r.YandexFullscreenAdServer=n},{"../../../constants/constants":49,"../../../utils/utils":139,"../loadManagerModule":92,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../markers/waterfallMarkers":100,"../timerManagerModule":113,"./AbstractAdServer":53}],73:[function(e,t,s){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(s,"__esModule",{value:!0}),s.adServerUtil=s.DEFAULT_PREBID_TIMEOUT=void 0;var l=e("../loggers/rowrLoggerModule"),a=e("../loggers/errorLoggerModule"),d=e("../../../utils/wrapperUtils"),u=e("../counterModule"),c=e("../../../constants/constants"),f=e("../../../constants/variables"),i=e("../loggers/romLoggerModule"),n=e("../timerManagerModule"),g=e("../../../utils/adConfigUtils"),p=e("../repositories/sspRepository"),m=e("../../../utils/adBlockBuilder"),E="AD SERVER UTIL";function h(e){var t;return(e=e.toString()).includes("%")&&(t=parseInt(e),e=(window.screen.width*t/100).toString()),e}function v(e){var t;if(e)return(e=e.toString()).includes("%")&&(t=parseInt(e),e=(window.screen.height*t/100).toString()),e}s.DEFAULT_PREBID_TIMEOUT=500,s.adServerUtil={buildIframeId:function(e){return c.IFRAME_ID_PREFIX+e},buildAdContentId:function(e,t){return"number"!=typeof t?e.waterfallConfig.currentRoxotAdContentId:e.adId+"-"+t},buildAdContentBlock:function(e,t,r){if(!t.waterfallConfig.currentSspConfig)return l.rowrLogger.error(c.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No current ad server config.",null,{adConfig:t}),a.errorLogger.error(c.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No current ad server config.",{adConfig:t}),null;var o=d.wrapperUtils.getRoxotAdBlock(e,t);if(!o)return l.rowrLogger.error(c.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No ad block.",null,{adConfig:t}),a.errorLogger.error(c.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No ad block.",{adConfig:t}),g.adConfigUtils.deleteNotExistsAdTag(t),null;var n={};this.addSizeStylesToAdContainer(n,t),this.addStylesToAdContainer(n,t),this.setSizeStyleToRoxotAd(e,t,r);r=m.adBlockBuilder.createRoxotAdContentBlock(t,n,r);return o.insertAdjacentElement("beforeend",r),r.getAttribute("id")},removeDfpCustomSizes:function(e){return e.slice(0).filter(function(e){return"object"===r(e)})},extractPreparedKeyValues:function(e){var t,r,o,n=Object.assign({},(null===(t=(t=e).options)||void 0===t?void 0:t.customKeyValues)||{},f.variables.wrapperConfig.keyValues,(null===(t=null===(t=(t=e).waterfallConfig.currentSspConfig)||void 0===t?void 0:t.options)||void 0===t?void 0:t.keyValues)||{},(e=e,{roxotRequestsCount:u.counterModule.getAdServerCounterValue(e,c.COUNTERS.REQUEST_COUNT)})),i={};for(r in n)n.hasOwnProperty(r)&&((o=function(e){if("string"==typeof e)return e;if("number"==typeof e)return e.toString();if(Array.isArray(e)){for(var t=[],r=0,o=e;r<o.length;r++){var n=o[r];"string"!=typeof n?t.push(n.toString()):t.push(n)}return t}return a.errorLogger.error(E,"Wrong value type, should be string | string[] | number.",{values:e}),""}(n[r]))&&(i[r]=o));return i},createIframe:function(e,t,r){var o=document.createElement("iframe");o.setAttribute("id",t),o.setAttribute("class","rom-iframe"),o.style.border="0",o.style.margin="0",o.style.padding="0",o.style.width="1px",o.style.height="1px",o.style.display="inline-block",o.style.verticalAlign="top",o.style.position="absolute",o.style.left="0",o.style.top="0",o.style.overflow="hidden",o.setAttribute("scrolling","no"),o.setAttribute("seamless","seamless");t=document.getElementById(e.adId);if(!t)return i.romLogger.error("Can not found ad block "+e.adId),void a.errorLogger.error("Wrapper","Can not found ad block"+e.adId);t.appendChild(o);var n=o.contentDocument||(null===(o=o.contentWindow)||void 0===o?void 0:o.document);setTimeout(function(){n.open(),n.write(r),n.close()})},createIframeInner:function(e,t,r,o,n){var i=document.createElement("iframe");i.setAttribute("id",e),i.setAttribute("class","rom-iframe"),i.style.border="0",i.style.margin="0",i.style.padding="0",i.style.width=o+"px",i.style.height=n+"px",i.style.display="inline-block",i.style.verticalAlign="top",i.style.overflow="hidden",i.setAttribute("scrolling","no"),i.setAttribute("seamless","seamless"),t.appendChild(i),setTimeout(function(){var e=i.contentDocument||(null===(e=i.contentWindow)||void 0===e?void 0:e.document);e.open(),e.write(r),e.close(),e.body.style.margin="0px",e.body.style.padding="0px",e.body.style.border="0px"})},deleteIframe:function(e,t){var r,o;f.variables.iframeCollection[t]&&(!(o=f.variables.iframeCollection[t].id)||(r=document.getElementById(o))&&(o=s.adServerUtil.buildUpdateIframeSizeTimerId(c.IFRAME_TIMER_PREFIX,t),n.timerManagerModule.clearTimerIfExists(o),r.remove(),delete f.variables.iframeCollection[t],l.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,'Delete iframe "'+t+'", clear timer "'+o+'"',null,{timerId:o,iframeId:t})))},buildUpdateIframeSizeTimerId:function(e,t){return""+e+t},onAdClose:function(t){var e;if(t)try{var r=t.content,o=1e3*(null!==(e=t.timeout)&&void 0!==e?e:c.DEFAULT_AD_CLOSE_TIMEOUT);setTimeout(function(){new Function(r)()},o)}catch(e){i.romLogger.error("Can not invoke onAdClose function. "+e.message,{config:t})}else i.romLogger.error("Can not invoke onAdClose function, onAdClose config not found.",{config:t})},addKvToVideoTagUrl:function(e,t){var r,o,n=s.adServerUtil.extractPreparedKeyValues(t),i="";for(r in n)n.hasOwnProperty(r)&&(o=n[r],Array.isArray(o)?i+="&"+r+"="+o.join(","):i+="&"+r+"="+o);var a=new URL(e),t=a.searchParams,e=t.get("cust_params"),e=e?e+i:i.substring(1);return t.set("cust_params",e),l.rowrLogger.log(E,"Key values added to video AdTagUrl.",null,{keyValues:n,modifiedUrl:a.href}),a.href},destroyAllAds:function(t){p.sspRepository.getAll().forEach(function(e){e.destroyAd(t,void 0)});var e=d.wrapperUtils.getRoxotAdBlock(document,t);e&&(e.innerHTML="")},destroyPreviousAds:function(r){var o=u.counterModule.getAdConfigCounterValue(r,c.COUNTERS.REQUEST_COUNT)-1;p.sspRepository.getAll().forEach(function(e){for(var t=o;0<t;t--)e.destroyAd(r,t)}),m.adBlockBuilder.deleteOldRoxotAdContentBlocks(r)},extractTagIdentifier:function(e){var t,r;return e.tagId||e.adTagUrl||(null!==(t=null===(t=e.options)||void 0===t?void 0:t.vasts)&&void 0!==t&&t.length?e.options.vasts[0]:Array.isArray(e.bids)&&null!==(r=e.bids)&&void 0!==r&&r.length&&e.bids[0].tagId||"unknown")},getStaticSizes:function(e){e=e.options.staticSize||!1;return e||!1},addSizeStylesToAdContainer:function(e,t){var r=s.adServerUtil.getStaticSizes(t);if(r){var o,n,i=r.fix||!1;return i&&(o=h(i[0]),e.width=o+"px",n=v(i[1]),e.height=n+"px"),(i=r.min||!1)&&(o=h(i[0]),e.minWidth=o+"px",n=v(i[1]),e.minHeight=n+"px"),void((i=r.max||!1)&&(o=h(i[0]),e.maxWidth=o+"px",n=v(i[1]),e.maxHeight=n+"px"))}if(t.waterfallConfig.adType===c.AD_TYPE.VIDEO){t=s.adServerUtil.removeDfpCustomSizes((null===(t=t.waterfallConfig.currentSspConfig)||void 0===t?void 0:t.sizes)||[])[0]||!1;return t?(e.width=t[0]+"px",e.height=t[1]+"px"):(e.width="100%",e.height="100%"),void(0===t[0]&&0===t[1]&&(e.width="100%",e.height="100%"))}e.minWidth="1px",e.minHeight="1px"},addStylesToAdContainer:function(e,t){var r,o=t.options.style||{};for(r in o)e[r]=o[r]},setSizeStyleToRoxotAd:function(e,t,r){var o,n=r?d.wrapperUtils.getRoxotAdBlock(window.parent.document,t):null,i=d.wrapperUtils.getRoxotAdBlock(e,t),a={};for(o in this.addSizeStylesToAdContainer(a,t),a)i&&(i.style[o]=a[o]),n&&(n.style[o]=a[o])}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adBlockBuilder":133,"../../../utils/adConfigUtils":134,"../../../utils/wrapperUtils":141,"../counterModule":82,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96,"../loggers/rowrLoggerModule":97,"../repositories/sspRepository":107,"../timerManagerModule":113}],74:[function(e,t,r){"use strict";var i=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},l=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.userIdManager=void 0;var d=e("../../../../constants/constants"),u=e("../../loggers/rowrLoggerModule"),a=e("../../../../constants/variables"),s=o(e("axios")),c="User id manager",f="",g="rxt_uid_lifetime",p=!1,m=!1,E=((e={})[d.UPRAVEL_BIDDER]="",e[d.MEDIA_SNIPER_BIDDER]="",e),h=((e={})[d.UPRAVEL_BIDDER]=!1,e[d.MEDIA_SNIPER_BIDDER]=!1,e),v=((e={})[d.UPRAVEL_BIDDER]="rxt_upravel_uid",e[d.MEDIA_SNIPER_BIDDER]="rxt_media_sniper_uid",e);function S(e){try{return localStorage.getItem(e)||""}catch(e){return""}}function n(e,t){try{if(S(e)===t)return;localStorage.setItem(e,t)}catch(e){u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"LocalStorage not available.",c,{})}}function b(){return i(this,void 0,void 0,function(){var t,r,o;return l(this,function(e){switch(e.label){case 0:return m=!0,[4,function(){return i(this,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,s.default.get(a.variables.romConfig.openRtbApiGetUserInfoUrl,{withCredentials:!0})];case 2:return(r=e.sent(),200!=r.data.status)?(u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Wrong request user info.",c,{response:r}),[2,null]):(t=r.data.data,u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Bidder user info is requested from db.",c,{bidderUserInfo:t,response:r}),[3,4]);case 3:return r=e.sent(),u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Wrong status of request user info.",c,{e:r}),t=null,[3,4];case 4:return[2,t]}})})}()];case 1:for(r in t=e.sent(),u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies refreshUserInfo - requested.",c,{userInfo:t}),t)E[r]=t[r],(o=v[r]||"")?n(o,t[r]):u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies refreshUserInfo - incorrect bidder in ls keys mapping.",c,{bidderName:r,mapping:v});return p=!(m=!1),[2]}})})}function y(n){return i(this,void 0,void 0,function(){var o;return l(this,function(e){switch(e.label){case 0:return(r=n,Object.keys(E).includes(r))?(o=E[n])?(u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - Bidder user id got from object.",c,{bidderName:n,bidderUserId:o}),[2,o]):(r=v[t=n]||"",(o=r?S(r):(u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - incorrect bidder in ls keys mapping.",c,{bidderName:t,mapping:v}),""))&&O(o)?(E[n]=o,u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - Bidder user id got from local storage.",c,{bidderName:n,bidderUserId:o}),[2,o]):p||m?[3,2]:[4,b()]):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Abort sync cookies - bidder not supported.",c,{bidderName:n}),[2,""]);case 1:if(e.sent(),o=E[n])return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - Bidder user id got from request.",c,{bidderName:n,bidderUserId:o}),[2,o];e.label=2;case 2:return m?[4,new Promise(function(e){var t=setInterval(function(){m||(clearInterval(t),e(E[n]))},100)})]:[3,4];case 3:if(o=e.sent())return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - Bidder user id got from object. (Waited for async request)",c,{bidderName:n,bidderUserId:o}),[2,o];e.label=4;case 4:return[4,function(r){return i(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:if(h[r])return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - Bidder user id not found, but request to bidder pixel already sent. No action needed.",c,{bidderName:r}),[2];if(h[r]=!0,!f)return u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - rxt_uid not found. Abort request bidders pixel.",c,{bidderName:r}),[2];u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Bidder user id not found, sending request to bidder pixel.",c,{bidderName:r}),e.label=1;case 1:return e.trys.push([1,6,,7]),r!==d.UPRAVEL_BIDDER?[3,3]:[4,fetch("https://sync.upravel.com/image?source=roxot&id="+f,{mode:"no-cors",credentials:"include"})];case 2:e.sent(),e.label=3;case 3:return r!==d.MEDIA_SNIPER_BIDDER?[3,5]:[4,fetch("https://sync.bumlam.com/?src=roxot&uid="+f,{credentials:"include",mode:"no-cors"})];case 4:e.sent(),e.label=5;case 5:return[3,7];case 6:return t=e.sent(),u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Sync cookies - Error while request bidders pixel",c,{bidderName:r,e:t}),[3,7];case 7:return[2]}})})}(n)];case 5:return e.sent(),[2,""]}var t,r})})}function O(e){return 2===e.split("____").length}r.userIdManager={getUserId:function(){return f},setUserId:function(){return i(this,void 0,void 0,function(){var t,r,o,n;return l(this,function(e){switch(e.label){case 0:if(!(t=a.variables.wrapperConfig.syncCookies.enabled))return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"UserId - feature is disabled.",c,{enabled:t}),[2];if((r=S("rxt_uid"))&&(o=parseInt(S(g)))&&(new Date).getTime()<o)return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"UserId synced successfully (from local storage).",c,{uid:r}),this.updateRoxotUserId(r,!1),[2];if(!(o=a.variables.romConfig.syncCookiesUrl))return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Abort sync UserId - request url not found.",c,{syncCookiesUrl:o}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,s.default.get(o,{withCredentials:!0})];case 2:return n=e.sent(),r=n.data.data.uid,[3,4];case 3:return n=e.sent(),u.rowrLogger.error(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Abort sync UserId - error in request.",c,{enabled:t,syncCookiesUrl:o,e:n}),[2];case 4:return r?(u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"UserId synced successfully (from request).",c,{uid:r}),this.updateRoxotUserId(r,!0),[2]):(u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Abort sync UserId - no uid in response.",c,{enabled:t,syncCookiesUrl:o}),[2])}})})},updateRoxotUserId:function(e,t){n("rxt_uid",f=e);var r="UserId updated";t&&(t=(new Date).getTime()+6048e5,n(g,t.toString()),r+=" (with lifetime)"),u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,r,c,{roxotUserId:e})},preSyncBiddersIds:function(){return i(this,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:if(!(t=a.variables.wrapperConfig.syncCookies.enabled))return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Abort pre-sync cookies - feature is disabled.",c,{enabled:t}),[2];if(!(r=a.variables.wrapperConfig.syncCookies.alwaysSyncBidders).length)return u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,"Abort pre-sync cookies - bidders list is empty.",c,{biddersList:r}),[2];t=0,r=r,e.label=1;case 1:return t<r.length?[4,y(r[t])]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},appendUserId:function(s){return i(this,void 0,void 0,function(){var t,r,o,n,i,a;return l(this,function(e){switch(e.label){case 0:for(o in t=function(e){for(var t={},r=0,o=e;r<o.length;r++){var n=o[r];t[n.name]=t[n.name]||[],t[n.name].push(n)}return t}(s),r=[],t)r.push(o);n=0,e.label=1;case 1:return n<r.length?[4,y(i=r[n])]:[3,4];case 2:(a=e.sent())&&O(a)||u.rowrLogger.debug(d.LOGGER_COMPONENTS.USER_ID_MANAGER_COMPONENT,'Append empty "bid" & "rid" to request - uid not found.',c,{bidderName:i}),a=a.split("____"),function(e,t,r){for(var o=0,n=e;o<n.length;o++){var i=n[o];i.options=i.options||{},i.options.uid={bid:t,rid:r},u.rowrLogger.debug(d.LOGGER_COMPONENTS.SSP_COMPONENT,"Uids added.",c,{bid:i,bidderUserId:t,roxotUserId:r})}}(t[i],a[0]||"",a[1]||f),e.label=3;case 3:return n++,[3,1];case 4:return[2]}})})}}},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loggers/rowrLoggerModule":97,axios:1}],75:[function(e,t,r){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.GooglePrebidAdServer=void 0;var u=e("../../../../constants/variables"),c=e("../../../../constants/constants"),a=e("../../loadManagerModule"),s=e("../../../../utils/utils"),f=e("../../loggers/rowrLoggerModule"),g=e("../adServerUtil"),l=e("../../timerManagerModule"),p=e("../../loggers/errorLoggerModule"),m=e("../utils/googleUtil"),E=e("./prebidUtil"),h=e("../../repositories/adConfigRepository"),v=e("../../wrapperModule"),S=e("../../dispatcherModule"),e=e("../AbstractAdServer");function b(e,t,r,o){o=g.adServerUtil.buildAdContentBlock(r,t,o);return o?{dfpAdUnit:e.tagId,divId:o,sizes:e.sizes,dfpRequest:!1,prebidTimeout:(null===(e=e.options)||void 0===e?void 0:e.prebidTimeout)||g.DEFAULT_PREBID_TIMEOUT}:null}function y(e,t){for(var r=0,o=t.adUnits||[];r<o.length;r++)if(o[r].code===e.dfpAdUnit)return!1;return!0}function O(e,t,r,o){r=[{code:e.dfpAdUnit,mediaTypes:{banner:{sizes:E.prebidUtil.preparePrebidSizes(e.sizes)}},bids:r}];E.prebidUtil.addPrebidFloorsIfNeed(t,r,o),o.addAdUnits(r)}function C(e,t,r,o,n){l.timerManagerModule.setTimeout(o,function(){f.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Stop work prebid.js by timer.","Google-Prebid",{adConfig:t,requestInfo:e}),p.errorLogger.error("SSP Google-Prebid","Stop work prebid.js by timer.",{adConfig:t,requestInfo:e}),d(e,t,r,o,n)},e.prebidTimeout+500,["ad-"+t.adId])}function d(t,r,e,o,n){try{if(t.dfpRequest)return f.rowrLogger.warning(c.LOGGER_COMPONENTS.SSP_COMPONENT,"DFP request already sent","Google-Prebid",{adConfig:r,requestInfo:t}),void p.errorLogger.warning("SSP Google-Prebid","DFP request already sent",{adConfig:r,requestInfo:t});l.timerManagerModule.clearTimerIfExists(o),t.dfpRequest=!0,n.pubads().setPrivacySettings({nonPersonalizedAds:!!r.isAnonAd}),n.pubads().refresh([e]),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google request.","Google-Prebid",{adConfig:r,requestInfo:t})}catch(e){f.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google request error "+e+".","Google-Prebid",{adConfig:r,requestInfo:t,exception:e}),p.errorLogger.error("SSP Google-Prebid","Google request error "+e+".",{adConfig:r,requestInfo:t,exception:e})}}function A(r,o,n,i,a,s){n.requestBids({timeout:r.prebidTimeout,adUnitCodes:[r.dfpAdUnit],bidsBackHandler:function(e,t){f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Response prebid ad.","Google-Prebid",{adConfig:o,requestInfo:r,responses:e,hasTimoutBidder:t}),n.setTargetingForGPTAsync([r.dfpAdUnit]),d(r,o,i,a,s)}})}var _,i=(_=e.AbstractAdServer,i(N,_),N.prototype.getAdType=function(){return c.AD_TYPE.BANNER},N.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.config.iframeModeEnabled=u.variables.romConfig.iframeSspList.includes(c.SSP_NAMES.GOOGLE_PREBID);var t=(u.variables.wrapperConfig.prebid||{}).path||!1;t&&(this.config.prebidEngineUrl=t),this.config.iframeModeEnabled||(this.load(),this.config.inited=!0)},N.prototype.load=function(){this.loadGpt(),this.loadPrebid()},N.prototype.loadPrebid=function(){a.loadManagerModule.isAlreadyLoaded(this.config.prebidEngineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.prebidEngineName),s.utils.loadScript(this.config.prebidEngineUrl,function(){f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid loaded.","Google-Prebid")}))},N.prototype.loadGpt=function(){a.loadManagerModule.isAlreadyLoaded(this.config.gptEngineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.gptEngineName),"object"===o(u.variables.googletag)&&"function"==typeof u.variables.googletag.pubads||s.utils.loadScript(this.config.gptEngineUrl,function(){f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Gpt loaded.","Google-Prebid")}))},N.prototype.refreshAd=function(i){var e,a,s,l,t,r,o,d=this;this.config.iframeModeEnabled?(e=g.adServerUtil.buildIframeId(i.waterfallConfig.currentRoxotAdContentId),u.variables.iframeCollection[e]=u.variables.iframeCollection[e]||{},u.variables.iframeCollection[e].id=e,window.refreshGooglePrebidAd=function(n,i,e,t,r){v.wrapperModule.updateIframeSize(e,document,r);var a=h.adConfigRepository.get(t);m.googleUtil.initGptIfNeeded(n,e,d.config.iframeModeEnabled),E.prebidUtil.initPrebidJs(i,!0),i.bidderSettings=E.prebidUtil.setBidderSettings(a);var s=a.waterfallConfig.currentSspConfig,l=b(s,a,e,!0);l&&(i.que.push(function(){n.cmd.push(function(){var e;try{var t=(null===(e=s.options)||void 0===e?void 0:e.bids)||null;if(!t)return;y(l,i)&&(O(l,a,t,i),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Init prebid.","Google-Prebid",{adConfig:a,requestInfo:l}));var r=m.googleUtil.buildGptSlot(n,l.divId,a);n.display(l.divId);var o="prebidTimeout-"+a.waterfallConfig.currentRoxotAdContentId;C(l,a,r,o,n),A(l,a,i,r,o,n),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid request.","Google-Prebid",{adConfig:a,requestInfo:l})}catch(e){f.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Google-Prebid",{adConfig:a,requestInfo:l,exception:e}),p.errorLogger.error("SSP Google-Prebid","Request error "+e+".",{adConfig:a,requestInfo:l,exception:e})}})}),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Load prebid.","Google-Prebid",{adConfig:a,requestInfo:l}))},t=i.adId,r=this.config.prebidEngineUrl,o=this.config.gptEngineUrl,t='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+t+"\"></div>\n            <script>\n                function loadScript(url, callback){\n                    let script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.async = !0;\n                    script.src = url;\n                    script.onload = function () {\n                        callback();\n                    };\n                    let head = document.getElementsByTagName('head')[0];\n                    head.insertBefore(script, head.firstChild); \n                }\n                \n                loadScript(\""+r+'", function() {\n                  loadScript("'+o+'", function() {\n                    window.parent.refreshGooglePrebidAd(window.googletag, window.pbjs, document, "'+t+'", "'+e+'");\n                  })\n                });\n            <\/script>\n        </body>\n        </html>\n    ',g.adServerUtil.createIframe(i,e,t)):(m.googleUtil.initGptIfNeeded(u.variables.googletag,document,this.config.iframeModeEnabled),E.prebidUtil.initPrebidJs(u.variables.pbjs,!1),u.variables.pbjs.bidderSettings=E.prebidUtil.setBidderSettings(i),a=i.waterfallConfig.currentSspConfig,s=this,(l=b(a,i,document,!1))&&(u.variables.pbjs.que.push(function(){u.variables.googletag.cmd.push(function(){var e;try{var t=(null===(e=a.options)||void 0===e?void 0:e.bids)||null;if(!t)return;y(l,u.variables.pbjs)&&(O(l,i,t,u.variables.pbjs),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Init prebid.","Google-Prebid",{adConfig:i,requestInfo:l}));var r=m.googleUtil.buildGptSlot(u.variables.googletag,l.divId,i);S.dispatcherModule.dispatch(c.WRAPPER_EVENTS.SSP_LEVEL.NEED_SET_PAGE_HREF_FOR_PREBID_DFP_SSP,{slot:r});var o=i.waterfallConfig.currentRoxotAdContentId;s.slots[o]=r,u.variables.googletag.display(l.divId);var n="prebidTimeout-"+o;C(l,i,r,n,u.variables.googletag),A(l,i,u.variables.pbjs,r,n,u.variables.googletag),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid request.","Google-Prebid",{adConfig:i,requestInfo:l})}catch(e){f.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Google-Prebid",{adConfig:i,requestInfo:l,exception:e}),p.errorLogger.error("SSP Google-Prebid","Request error "+e+".",{adConfig:i,requestInfo:l,exception:e})}})}),f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Load prebid.","Google-Prebid",{adConfig:i,requestInfo:l})))},N.prototype.destroyAd=function(e,t){var r,o=g.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.config.iframeModeEnabled?g.adServerUtil.deleteIframe(e,g.adServerUtil.buildIframeId(o)):(r=this).slots.hasOwnProperty(o)&&(f.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy slot.","Google-Prebid",{adConfig:e}),u.variables.googletag.cmd.push(function(){u.variables.googletag.destroySlots([r.slots[o]])}),delete this.slots[o])},N);function N(){var e=_.call(this)||this;return e.config={inited:!1,prebidEngineUrl:u.variables.wrapperConfig.prebid.path,prebidEngineName:"prebid",gptEngineUrl:"https://www.googletagservices.com/tag/js/gpt.js",gptEngineName:"gpt",iframeModeEnabled:!1},e.slots={},e}r.GooglePrebidAdServer=i},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../../../utils/utils":139,"../../dispatcherModule":84,"../../loadManagerModule":92,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../repositories/adConfigRepository":105,"../../timerManagerModule":113,"../../wrapperModule":117,"../AbstractAdServer":53,"../adServerUtil":73,"../utils/googleUtil":80,"./prebidUtil":78}],76:[function(e,t,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.GooglePrebidAmazonAdServer=void 0;var E=e("../../../../constants/variables"),h=e("../../../../constants/constants"),a=e("../../loadManagerModule"),s=e("../../../../utils/utils"),v=e("../../loggers/rowrLoggerModule"),l=e("../adServerUtil"),S=e("../../timerManagerModule"),b=e("../../loggers/errorLoggerModule"),y=e("../utils/googleUtil"),O=e("./prebidUtil"),e=e("../AbstractAdServer");function C(t,r,e,o,n){try{if(t.dfpRequest)return v.rowrLogger.warning(h.LOGGER_COMPONENTS.SSP_COMPONENT,"DFP request already sent","Google-Prebid-Amazon",{adConfig:r,requestInfo:t}),void b.errorLogger.warning("SSP Google-Prebid-Amazon","DFP request already sent",{adConfig:r,requestInfo:t});S.timerManagerModule.clearTimerIfExists(o),t.dfpRequest=!0,n.pubads().setPrivacySettings({nonPersonalizedAds:!!r.isAnonAd}),n.pubads().refresh([e]),v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Google request.","Google-Prebid-Amazon",{adConfig:r,requestInfo:t})}catch(e){v.rowrLogger.error(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Google request error "+e+".","Google-Prebid-Amazon",{adConfig:r,requestInfo:t,exception:e}),b.errorLogger.error("SSP Google-Prebid-Amazon","Google request error "+e+".",{adConfig:r,requestInfo:t,exception:e})}}function A(e,t,r,o,n){e.apsResponse&&e.prebidResponse&&C(e,t,r,o,n)}function _(t,r,o,n,i,a){var e;i.fetchBids({slots:[{slotID:t.divId,slotName:t.dfpAdUnit,sizes:(e=t.sizes,l.adServerUtil.removeDfpCustomSizes(e))}],timeout:t.prebidTimeout},function(e){v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Response aps ad.","Google-Prebid-Amazon",{adConfig:r,requestInfo:t,bids:e}),i.setDisplayBids(),t.apsResponse=!0,A(t,r,o,n,a)})}var d,n=(d=e.AbstractAdServer,n(u,d),u.prototype.getAdType=function(){return h.AD_TYPE.BANNER},u.prototype.init=function(e){if(this.isInited())throw"Module already inited";var t=(E.variables.wrapperConfig.prebid||{}).path||!1;t&&(this.config.prebidEngineUrl=t),this.load(),this.config.inited=!0},u.prototype.load=function(){this.loadGpt(),this.loadPrebid(),this.loadAmazonPublisherService()},u.prototype.loadGpt=function(){a.loadManagerModule.isAlreadyLoaded(this.config.gptEngineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.gptEngineName),"object"===i(E.variables.googletag)&&"function"==typeof E.variables.googletag.pubads||s.utils.loadScript(this.config.gptEngineUrl,function(){v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Gpt loaded.","Google-Prebid-Amazon")}))},u.prototype.loadPrebid=function(){a.loadManagerModule.isAlreadyLoaded(this.config.prebidEngineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.prebidEngineName),s.utils.loadScript(this.config.prebidEngineUrl,function(){v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid loaded.","Google-Prebid-Amazon")}))},u.prototype.loadAmazonPublisherService=function(){var r,o,e,t;function n(e,t){o[r]._Q.push([e,t])}a.loadManagerModule.isAlreadyLoaded(this.config.amazonPublisherServiceEngineName)||(a.loadManagerModule.markAsAlreadyLoaded(this.config.amazonPublisherServiceEngineName),"object"===("undefined"==typeof apstag?"undefined":i(apstag))&&"function"==typeof apstag.init||(r="apstag",o=window,t=document,o[r]||(o[r]={init:function(){n("i",arguments)},fetchBids:function(){n("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(e=t.createElement("script")).async=!0,e.src="//c.amazon-adsystem.com/aax2/apstag.js",(t=t.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t)),apstag.init({pubID:"403a8b1c-ff6b-48a4-b275-8511b7d58990",adServer:"googletag"}),v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Amazon Publisher Service (aps) loaded.","Google-Prebid-Amazon")))},u.prototype.refreshAd=function(f){y.googleUtil.initGptIfNeeded(E.variables.googletag,document,!1),O.prebidUtil.initPrebidJs(E.variables.pbjs,!1),E.variables.pbjs.bidderSettings=O.prebidUtil.setBidderSettings(f);var g=f.waterfallConfig.currentSspConfig,p=this,m={dfpAdUnit:g.tagId,divId:l.adServerUtil.buildAdContentBlock(document,f,!1),sizes:g.sizes,apsResponse:!1,prebidResponse:!1,dfpRequest:!1,prebidTimeout:g.options.prebidTimeout||l.DEFAULT_PREBID_TIMEOUT};E.variables.pbjs.que.push(function(){E.variables.googletag.cmd.push(function(){try{var e=g.options.bids||null;if(!e)return;(function(e,t){for(var r=0,o=t.adUnits||[];r<o.length;r++)if(o[r].code===e.dfpAdUnit)return!1;return!0})(m,E.variables.pbjs)&&(l=m,d=f,u=e,c=E.variables.pbjs,u=[{code:l.dfpAdUnit,mediaTypes:{banner:{sizes:O.prebidUtil.preparePrebidSizes(l.sizes)}},bids:u}],O.prebidUtil.addPrebidFloorsIfNeed(d,u,c),c.addAdUnits(u),v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Init prebid.","Google-Prebid-Amazon",{adConfig:f,requestInfo:m}));var r=y.googleUtil.buildGptSlot(E.variables.googletag,m.divId,f);p.slots[f.adId]=r,E.variables.googletag.display(m.divId);var o="amazonPrebidTimeout-"+f.adId;t=m,n=f,i=r,a=o,s=E.variables.googletag,S.timerManagerModule.setTimeout(a,function(){v.rowrLogger.error(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Stop work prebid.js by timer.","Google-Prebid-Amazon",{adConfig:n,requestInfo:t}),b.errorLogger.error("SSP Google-Prebid-Amazon","Stop work prebid.js by timer.",{adConfig:n,requestInfo:t}),C(t,n,i,a,s)},t.prebidTimeout+500,["ad-"+n.adId]),E.variables.pbjs.requestBids({timeout:m.prebidTimeout,adUnitCodes:[m.dfpAdUnit],bidsBackHandler:function(e,t){v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Response prebid ad.","Google-Prebid-Amazon",{adConfig:f,requestInfo:m,responses:e,hasTimoutBidder:t}),E.variables.pbjs.setTargetingForGPTAsync([m.dfpAdUnit]),m.prebidResponse=!0,A(m,f,r,o,E.variables.googletag)}}),v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid request.","Google-Prebid-Amazon",{adConfig:f,requestInfo:m}),_(m,f,r,o,window.apstag,E.variables.googletag),v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Amazon request.","Google-Prebid-Amazon",{adConfig:f,requestInfo:m})}catch(e){v.rowrLogger.error(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Google-Prebid-Amazon",{adConfig:f,requestInfo:m,exception:e}),b.errorLogger.error("SSP Google-Prebid-Amazon","Request error "+e+".",{adConfig:f,requestInfo:m,exception:e})}var t,n,i,a,s,l,d,u,c})}),v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Load prebid.","Google-Prebid-Amazon",{adConfig:f,requestInfo:m})},u.prototype.destroyAd=function(e){var t=e.adId,r=this;this.slots.hasOwnProperty(t)&&(v.rowrLogger.debug(h.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy slot.","Google-Prebid-Amazon",{adConfig:e}),E.variables.googletag.cmd.push(function(){E.variables.googletag.destroySlots([r.slots[t]])}),delete this.slots[t])},u);function u(){var e=d.call(this)||this;return e.config={inited:!1,prebidEngineUrl:E.variables.wrapperConfig.prebid.path,prebidEngineName:"prebid",gptEngineUrl:"https://www.googletagservices.com/tag/js/gpt.js",gptEngineName:"gpt",amazonPublisherServiceEngineName:"aps"},e.slots={},e}r.GooglePrebidAmazonAdServer=n},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../../../utils/utils":139,"../../loadManagerModule":92,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../timerManagerModule":113,"../AbstractAdServer":53,"../adServerUtil":73,"../utils/googleUtil":80,"./prebidUtil":78}],77:[function(e,t,r){"use strict";var o,n=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PrebidAdServer=void 0;var a=e("../../../../constants/variables"),l=e("../../../../constants/constants"),i=e("../../loadManagerModule"),s=e("../../../../utils/utils"),d=e("../../loggers/rowrLoggerModule"),u=e("../adServerUtil"),c=e("../../timerManagerModule"),f=e("../../loggers/errorLoggerModule"),g=e("../../markers/waterfallMarkers"),p=e("./prebidUtil"),m=e("../../wrapperModule"),E=e("../../repositories/adConfigRepository"),e=e("../AbstractAdServer");function h(e,t,r,o){o=u.adServerUtil.buildAdContentBlock(r,t,o);return o?{adUnit:e.tagId,divId:o,sizes:e.sizes,prebidTimeout:a.variables.wrapperConfig.prebid.prebidTimeout||e.options.prebidTimeout||u.DEFAULT_PREBID_TIMEOUT}:null}function v(e,t){for(var r=0,o=t.adUnits||[];r<o.length;r++)if(o[r].code===e.adUnit)return!1;return!0}function S(e,t,r,o){r=[{code:e.adUnit,mediaTypes:{banner:{sizes:p.prebidUtil.preparePrebidSizes(e.sizes)}},bids:r}];p.prebidUtil.addPrebidFloorsIfNeed(t,r,o),o.addAdUnits(r)}function b(e,t,r){c.timerManagerModule.setTimeout(r,function(){d.rowrLogger.error(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Stop work prebid.js by timer.","Prebid",{adConfig:t,requestInfo:e}),f.errorLogger.error("SSP Prebid","Stop work prebid.js by timer.",{adConfig:t,requestInfo:e}),g.waterfallMarkers.markAsEmpty(t)},e.prebidTimeout+500,["ad-"+t.adId])}function y(o,n,i,a,s){i.requestBids({timeout:o.prebidTimeout,adUnitCodes:[o.adUnit],bidsBackHandler:function(e,t){d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Response prebid ad.","Prebid",{adConfig:n,requestInfo:o,responses:e,hasTimoutBidder:t});var r=i.getHighestCpmBids(o.adUnit);if(!r.length)return d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad.","Prebid",{adConfig:n,requestInfo:o}),g.waterfallMarkers.markAsEmpty(n),void c.timerManagerModule.clearTimerIfExists(s);e=r[0];d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Has ad.","Prebid",{adConfig:n,requestInfo:o,bid:e,bids:r});t=a.createElement("iframe");t.style.border="0",t.style.margin="0",t.style.width=e.width+"px",t.style.height=e.height+"px",t.setAttribute("scrolling","no");r=a.getElementById(o.divId);if(!r)return d.rowrLogger.error(l.LOGGER_COMPONENTS.SSP_COMPONENT,"There are no adBlock.","Prebid",{adConfig:n,requestInfo:o}),f.errorLogger.error("SSP Prebid","There are no adBlock.",{adConfig:n,requestInfo:o}),g.waterfallMarkers.markAsEmpty(n),void c.timerManagerModule.clearTimerIfExists(s);r.appendChild(t);t=t.contentDocument||t.contentWindow.document;t.getElementsByTagName("body")[0].style.margin="0",i.renderAd(t,e.adId),g.waterfallMarkers.markAsRendered(n),g.waterfallMarkers.markAsVisible(n),c.timerManagerModule.clearTimerIfExists(s)}})}var O,n=(O=e.AbstractAdServer,n(C,O),C.prototype.getAdType=function(){return l.AD_TYPE.BANNER},C.prototype.init=function(e){if(this.isInited())throw"Module already inited";this.config.iframeModeEnabled=a.variables.romConfig.iframeSspList.includes(l.SSP_NAMES.PREBID);var t=(a.variables.wrapperConfig.prebid||{}).path||null;t&&(this.config.prebidEngineUrl=t),this.config.iframeModeEnabled||(this.load(),this.config.inited=!0)},C.prototype.load=function(){i.loadManagerModule.isAlreadyLoaded(this.config.prebidEngineName)||(i.loadManagerModule.markAsAlreadyLoaded(this.config.prebidEngineName),s.utils.loadScript(this.config.prebidEngineUrl,function(){d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid loaded.","Prebid")}))},C.prototype.refreshAd=function(r){var e,o,n,t,i;this.config.iframeModeEnabled?(e=u.adServerUtil.buildIframeId(r.waterfallConfig.currentRoxotAdContentId),a.variables.iframeCollection[e]=a.variables.iframeCollection[e]||{},a.variables.iframeCollection[e].id=e,window.refreshPrebidAd=function(r,o,e,t){var n=E.adConfigRepository.get(e);p.prebidUtil.initPrebidJs(r,!0),r.bidderSettings=p.prebidUtil.setBidderSettings(n);var i=n.waterfallConfig.currentSspConfig,a=h(i,n,o,!0);a&&(r.que.push(function(){try{var e=i.options.bids||null;if(!e)return;v(a,r)&&(S(a,n,e,r),d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Init prebid.","Prebid",{adConfig:n,requestInfo:a}));var t="prebidTimeout-"+n.waterfallConfig.currentRoxotAdContentId;b(a,n,t),y(a,n,r,o,t),d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid request.","Prebid",{adConfig:n,requestInfo:a})}catch(e){d.rowrLogger.error(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Prebid",{adConfig:n,requestInfo:a,exception:e}),f.errorLogger.error("SSP Prebid","Request error "+e+".",{adConfig:n,requestInfo:a,exception:e})}}),m.wrapperModule.updateIframeSize(o,document,t),d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Load prebid.","Prebid",{adConfig:n,requestInfo:a}))},t=r.adId,i=this.config.prebidEngineUrl,t='\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <div id="'+t+"\"></div>\n            <script>\n                let script = document.createElement('script');\n                script.type = 'text/javascript';\n                script.async = !0;\n                script.src = \""+i+'";\n                script.onload = function () {\n                    window.parent.refreshPrebidAd(window.pbjs, document, "'+t+'", "'+e+"\");\n                 };\n                let head = document.getElementsByTagName('head')[0];\n                head.insertBefore(script, head.firstChild);\n            <\/script>\n        </body>\n        </html>\n    ",u.adServerUtil.createIframe(r,e,t)):(p.prebidUtil.initPrebidJs(a.variables.pbjs,!1),a.variables.pbjs.bidderSettings=p.prebidUtil.setBidderSettings(r),o=r.waterfallConfig.currentSspConfig,(n=h(o,r,document,!1))&&(a.variables.pbjs.que.push(function(){try{var e=o.options.bids||null;if(!e)return;v(n,a.variables.pbjs)&&(S(n,r,e,a.variables.pbjs),d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Init prebid.","Prebid",{adConfig:r,requestInfo:n}));var t="prebidTimeout-"+r.waterfallConfig.currentRoxotAdContentId;b(n,r,t),y(n,r,a.variables.pbjs,document,t),d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Prebid request.","Prebid",{adConfig:r,requestInfo:n})}catch(e){d.rowrLogger.error(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Request error "+e+".","Prebid",{adConfig:r,requestInfo:n,exception:e}),f.errorLogger.error("SSP Prebid","Request error "+e+".",{adConfig:r,requestInfo:n,exception:e})}}),d.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"Load prebid.","Prebid",{adConfig:r,requestInfo:n})))},C.prototype.destroyAd=function(e,t){t=u.adServerUtil.buildAdContentId(e,t=void 0===t?void 0:t);this.config.iframeModeEnabled&&u.adServerUtil.deleteIframe(e,u.adServerUtil.buildIframeId(t))},C);function C(){var e=O.call(this)||this;return e.config={inited:!1,prebidEngineUrl:a.variables.wrapperConfig.prebid.path,prebidEngineName:"prebid",iframeModeEnabled:!1},e}r.PrebidAdServer=n},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../../../utils/utils":139,"../../loadManagerModule":92,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../repositories/adConfigRepository":105,"../../timerManagerModule":113,"../../wrapperModule":117,"../AbstractAdServer":53,"../adServerUtil":73,"./prebidUtil":78}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.prebidUtil=void 0;var o=e("../../loadManagerModule"),n=e("../../../../constants/variables"),i=e("../../loggers/rowrLoggerModule"),a=e("../../../../utils/utils"),s=e("../adServerUtil"),l=e("../../../../constants/constants"),d=e("../../dispatcherModule"),u={};function c(e){var t=((e.options||{}).prebid||{}).adjustment||{},e=a.utils.deepClone(n.variables.wrapperConfig.prebid.adjustment);return a.utils.mergeConfigs(e,t),e}r.prebidUtil={initPrebidJs:function(t,e){if(!e){if(o.loadManagerModule.isAlreadyLoaded("prebidConfig"))return;o.loadManagerModule.markAsAlreadyLoaded("prebidConfig")}t.que.push(function(){var e=n.variables.wrapperConfig.prebid.config||{};e.priceGranularity="dense",e.currency={adServerCurrency:"USD",defaultRates:{USD:{RUB:120},RUB:{USD:.0083}},rates:{USD:{RUB:120},RUB:{USD:.0083}}},n.variables.wrapperConfig.cmp.vendor&&(e.consentManagement={gdpr:{cmpApi:"iab",timeout:0,defaultGdprScope:!0}}),d.dispatcherModule.dispatch(l.WRAPPER_EVENTS.SSP_LEVEL.NEED_SET_PAGE_HREF_FOR_PREBID_SSP,{pbjsConfig:e}),t.setConfig(e);e=n.variables.wrapperConfig.prebid.analytics||!1;e&&t.enableAnalytics({provider:"roxot",options:e})})},setBidderSettings:function(e){function t(r){o[r]={bidCpmAdjustment:function(e,t){return e*(e=r,t=t.adUnitCode,(u[t]||{})[e]||1)}}}var r,o={},n=c(e),e=e.waterfallConfig.currentSspConfig.tagId;for(r in u[e]=n)t(r);return i.rowrLogger.debug(l.LOGGER_COMPONENTS.SSP_COMPONENT,"prebid__setBidderSettings",null,{bidCpmAdjustmentMapping:u}),o},preparePrebidSizes:function(e){return s.adServerUtil.removeDfpCustomSizes(e)},addPrebidFloorsIfNeed:function(e,t,r){var o,e=(null===(o=null===(o=(o=e).waterfallConfig.currentSspConfig)||void 0===o?void 0:o.options)||void 0===o?void 0:o.prebidFloors)||0;e&&((o=n.variables.wrapperConfig.prebid.config||{}).floors||(o.floors={enforcement:{floorDeals:!1},data:{currency:"RUB",schema:{fields:["adUnitCode"]},values:{"*":0}}}),t=t[0].code,o.floors.data.values[t]=e,r.setConfig(o))}}},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../../../utils/utils":139,"../../dispatcherModule":84,"../../loadManagerModule":92,"../../loggers/rowrLoggerModule":97,"../adServerUtil":73}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdfoxUtil=void 0;var d=e("../../../../constants/variables"),u=e("../../../../utils/utils"),c=e("../../loggers/rowrLoggerModule"),f=e("../../../../constants/constants"),g=e("../../loggers/errorLoggerModule");function p(e){return"SSP "+e}r.AdfoxUtil={replaceMacrosIfNeed:function(e,t,r){var o=d.variables.wrapperConfig;if(!o.pageKeyValues.enabled)return e;c.rowrLogger.debug(f.LOGGER_COMPONENTS.SSP_COMPONENT,"Start replace adfox macros.",t,{adConfig:r});var n=o.pageKeyValues.keyList;n.length||(g.errorLogger.warning(p(t),"Feature pageKeyValues enabled, but keyList is empty.",{pageKeyValues:o.pageKeyValues,wrapperConfig:o,adConfig:r}),c.rowrLogger.warning(f.LOGGER_COMPONENTS.SSP_COMPONENT,"Feature pageKeyValues enabled, but keyList is empty.",t,{pageKeyValues:o.pageKeyValues,wrapperConfig:o,adConfig:r}));var i,a=!1;for(i in e){var s,l=e[i];l.includes("%")&&(s=u.utils.replaceAll(l,"%",""),n.includes(s)?(l=(r.options.customKeyValues||{})[s])?(e[i]=l,a=!0):(l=new URL(window.location.href).searchParams.get(s))?(e[i]=l,a=!0):(g.errorLogger.error(p(t),"Page URL or customKeyValues doesn't contain required key \""+s+'". Key will be removed from Adfox params.',{requiredKey:s,adConfig:r}),c.rowrLogger.error(f.LOGGER_COMPONENTS.SSP_COMPONENT,"Page URL or customKeyValues doesn't contain required key \""+s+'". Key will be removed from Adfox params.',t,{requiredKey:s,adConfig:r}),delete e[i]):(g.errorLogger.error(p(t),'AdfoxParams got "'+s+'" required key, but there is no such key in pageKeyValues.keyList. Key will be removed from Adfox Params.',{requiredKey:s,adConfig:r,pageKeyValues:o.pageKeyValues}),c.rowrLogger.error(f.LOGGER_COMPONENTS.SSP_COMPONENT,'AdfoxParams got "'+s+'" required key, but there is no such key in pageKeyValues.keyList. Key will be removed from Adfox Params.',t,{requiredKey:s,adConfig:r,pageKeyValues:o.pageKeyValues}),delete e[i]))}return a&&g.errorLogger.log(p(t),"Complete replace macros.",{adfoxParams:e,adConfig:r}),c.rowrLogger.debug(f.LOGGER_COMPONENTS.SSP_COMPONENT,"Complete replace macros.",t,{adfoxParams:e,adConfig:r}),e}}},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../../../utils/utils":139,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.googleUtil=void 0;var n=e("../../loadManagerModule"),i=e("../../../../constants/variables"),d=e("../../loggers/rowrLoggerModule"),a=e("../../loggers/errorLoggerModule"),s=e("../../repositories/adConfigRepository"),l=e("../../markers/waterfallMarkers"),u=e("../adServerUtil"),c=e("../../../../constants/constants");r.googleUtil={initGptIfNeeded:function(t,o,e){var r;!e&&n.loadManagerModule.isAlreadyLoaded("gptConfig")||(n.loadManagerModule.markAsAlreadyLoaded("gptConfig"),t.cmd=t.cmd||[],r=t,i.variables.wrapperConfig.isGoogleForceSafeFrame&&r.cmd.push(function(){r.pubads().setForceSafeFrame(!0)}),t.cmd.push(function(){var e;t.pubads().addEventListener("slotRequested",function(e){var t=e.slot;d.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google event slotRequested, ad request.",null,{slot:t,event:e})}),t.pubads().addEventListener("slotResponseReceived",function(e){var t=e.slot;d.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google event slotResponseReceived, ad response received.",null,{slot:t,event:e})}),t.pubads().addEventListener("slotRenderEnded",function(e){var t=o.getElementById(e.slot.getSlotElementId());if(t){t=t.getAttribute("data-ad-id");if(!t){var r={divId:e.slot.getSlotElementId(),event:e};return d.rowrLogger.warning(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google event slotRenderEnded for undefined (publisher, not Roxot) slot "+e.slot.getSlotElementId(),"Google",r),void a.errorLogger.warning("SSP Google","Google event slotRenderEnded for undefined (publisher, not Roxot) slot "+e.slot.getSlotElementId(),r)}r=s.adConfigRepository.get(t);e.isEmpty?(d.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google event slotRenderEnded, no ad.","Google",{adId:t,adConfig:r,event:e}),l.waterfallMarkers.markAsEmpty(r)):(d.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Google event slotRenderEnded, has ad.","Google",{adConfig:r,event:e}),l.waterfallMarkers.markAsRendered(r),l.waterfallMarkers.markAsVisible(r))}}),e=t,i.variables.wrapperConfig.rewriteDfpUrl&&(e.pubads().set("page_url",window.top.location.href),d.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Set page url "+window.top.location.href)),t.pubads().disableInitialLoad(),t.pubads().enableSingleRequest(),t.enableServices()}))},buildGptSlot:function(e,t,r){var o,n=r.waterfallConfig.currentSspConfig,i=e.defineSlot(n.tagId,((o=(o=n.sizes).slice(0)).unshift([1,1]),o),t).addService(e.pubads());i.clearTargeting(),n.options=n.options||{};var a,s=u.adServerUtil.extractPreparedKeyValues(r),l=!1;for(a in s)s.hasOwnProperty(a)&&(i.setTargeting(a,s[a]),l=!0);return l&&d.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Set key values for gpt request for "+r.adId+" block.","KeyValues",{adConfig:r,keyValues:i.getTargetingMap()}),i}}},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loadManagerModule":92,"../../loggers/errorLoggerModule":93,"../../loggers/rowrLoggerModule":97,"../../markers/waterfallMarkers":100,"../../repositories/adConfigRepository":105,"../adServerUtil":73}],81:[function(e,t,l){"use strict";var r=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},s=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(l,"__esModule",{value:!0}),l.OpenRtbUtil=void 0;var d=e("../../../../constants/variables"),u=e("../../loggers/rowrLoggerModule"),c=e("../../../../constants/constants"),n=e("../openRtb/userIdManager");function f(e,t,r,o){var n=t;Array.isArray(n)&&(n={});for(var i=0,a=e;i<a.length;i++){var s=a[i];Array.isArray(s.options)&&(s.options={})}t="";return l.OpenRtbUtil.isBrandBooster(e)&&(t=o),{site:new URL(location.href).host,bids:e,options:n,geo:{utcOffset:(new Date).getTimezoneOffset()},_site:{domain:new URL(location.href).host,page:location.href,ref:document.referrer},placementId:r,containerId:t,isRxtDebug:function(){try{return!!localStorage.getItem(c.LOCAL_STORAGE_KEYS.DEBUG.IS_AD_SERVER_DEBUG)}catch(e){return!1}}()}}l.OpenRtbUtil={isBrandBooster:function(e){if(1===e.length)return null===(e=e[0].options)||void 0===e?void 0:e.isBrandBooster},buildAndRequestAd:function(o){return r(this,void 0,void 0,function(){var t,r;return s(this,function(e){switch(e.label){case 0:return t=o.waterfallConfig.currentSspConfig.bids,[4,n.userIdManager.appendUserId(t)];case 1:return e.sent(),r=o.waterfallConfig.currentSspConfig.options,[4,l.OpenRtbUtil.requestAd(t,r,o)];case 2:return r=e.sent(),o.waterfallConfig.currentCpm=r.price,[2,r]}})})},requestAd:function(n,i,a){return r(this,void 0,void 0,function(){var t,r,o;return s(this,function(e){switch(e.label){case 0:return o=d.variables.wrapperConfig.openRtbHost,r=o+"/request-ad",o=f(n,i,a.details.placementId,a.waterfallConfig.currentRoxotAdContentId),[4,fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(o)})];case 1:if(204===(t=e.sent()).status)throw u.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Status 204, Server is busy.",[],{adConfig:a,response:t}),"Status 204, Server is busy.";return t.ok?[4,t.json()]:[3,3];case 2:if(!(r=e.sent()))throw u.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Cannot parse json response.",[],{adConfig:a,response:t,json:r}),"Cannot parse json response.";if(o=r.data||{},!Object.keys(o).length)throw u.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"No ad was found in response.",[],{adConfig:a,json:r,response:t}),"No ad was found in response.";return u.rowrLogger.debug(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Successfully parse response.",[],{adConfig:a,json:r,response:t}),[2,r.data];case 3:throw u.rowrLogger.error(c.LOGGER_COMPONENTS.SSP_COMPONENT,"Something went wrong with response.",[],{adConfig:a,response:t}),"Something went wrong with response."}})})}}},{"../../../../constants/constants":49,"../../../../constants/variables":51,"../../loggers/rowrLoggerModule":97,"../openRtb/userIdManager":74}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.counterModule=void 0;var r=e("../../constants/constants"),o=e("./loggers/rowrLoggerModule");function i(e,t){return(n.counterModule.adConfigCounters[e.adId]||{})[t]||0}function a(e,t){var r=i(e,t);e=e,t=t,r=++r,n.counterModule.adConfigCounters[e.adId]=n.counterModule.adConfigCounters[e.adId]||{},n.counterModule.adConfigCounters[e.adId][t]=r}function s(e,t,r){return((n.counterModule.adServerCounters[e.adId]||{})[t]||{})[r]||0}function l(e,t,r){var o=s(e,t,r);e=e,t=t,r=r,o=++o,n.counterModule.adServerCounters[e.adId]=n.counterModule.adServerCounters[e.adId]||{},n.counterModule.adServerCounters[e.adId][t]=n.counterModule.adServerCounters[e.adId][t]||{},n.counterModule.adServerCounters[e.adId][t][r]=o}function d(e){return e+"-"+r.COUNTERS.REQUEST_COUNT}function u(e){return e.waterfallConfig.currentSspConfig?e.waterfallConfig.currentSspConfig.name:(o.rowrLogger.error("Counters","Failed to extract current ssp name - currentSspConfig does not exists on waterfallConfig"),null)}n.counterModule={adConfigCounters:{},adServerCounters:{},getAdConfigCounterValue:i,incrementAdConfigCountValue:function(e,t){a(e,t)},getAdServerCounterValue:function(e,t){var r=u(e);return r?s(e,r,t):0},incrementCounterValue:function(e,t){var r=u(e);r&&l(e,r,t)},incrementTagRequestCounterValue:function(e,t){var r=u(e);r&&l(e,r,d(t))},getTagRequestCounterValue:function(e,t,r){return s(e,t,d(r))}}},{"../../constants/constants":49,"./loggers/rowrLoggerModule":97}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deferAdModule=void 0;var o=e("./loggers/errorLoggerModule"),n="rom-session-start",i="rom-site-opened-count";r.deferAdModule={updateSiteOpenedCount:function(){try{t=new Date(localStorage.getItem(n)),(r=new Date).getTime()-t.getTime()<18e5||(localStorage.setItem(n,r.toString()),localStorage.setItem(i,"0"));var e=Number(localStorage.getItem(i));e++,localStorage.setItem(i,String(e))}catch(e){o.errorLogger.warning("Defer Ad module","LocalStorage not available.")}var t,r},checkSiteOpenedCount:function(e){try{var t=e.formatWaterfall.formatsStack[0].formatTags[0].adConfig.options.deferAd;return t?Number(localStorage.getItem(i))>=t.minOpenSiteCount:!0}catch(e){return!0}}}},{"./loggers/errorLoggerModule":93}],84:[function(e,t,n){"use strict";var r=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},l=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.dispatcherModule=void 0;var o=e("../../constants/constants"),i=e("../../constants/variables"),a=e("../../utils/utils");function d(e,t){return(t=t||{}).event=e,t}function s(){return a.utils.generateId("callbackId-")}function u(e,t,r,o){n.dispatcherModule.callbacks[e]=n.dispatcherModule.callbacks[e]||{},n.dispatcherModule.callbacks[e][o]=n.dispatcherModule.callbacks[e][o]||{},n.dispatcherModule.callbacks[e][o][r]=t}n.dispatcherModule={callbacks:{},on:function(e,t,r,o){void 0===o&&(o=0),u(e,t,r=(r=void 0===r?void 0:r)||s(),o)},off:function(e,t){for(var r in this.callbacks[e]=this.callbacks[e]||{},this.callbacks[e])this.callbacks[e][r].hasOwnProperty(t)&&delete this.callbacks[e][t]},onAll:function(e){this.onAllWrapperEvents(e),this.onAllManagerEvents(e)},onAllWrapperEvents:function(t){Object.values(o.WRAPPER_EVENTS).forEach(function(e){Object.values(e).forEach(function(e){u(e,t,s(),0)})})},onAllManagerEvents:function(t){Object.values(o.MANAGER_EVENTS).forEach(function(e){u(e,t,s(),0)})},dispatch:function(e,t){for(var r in this.callbacks[e]=this.callbacks[e]||{},this.callbacks[e])for(var r=this.callbacks[e][r],o=0,n=Object.values(r);o<n.length;o++)(0,n[o])(d(e,t))},dispatchAsync:function(a,s){return r(this,void 0,void 0,function(){var t,r,o,n,i;return l(this,function(e){switch(e.label){case 0:for(r in this.callbacks[a]=this.callbacks[a]||{},t=[],this.callbacks[a])t.push(r);o=0,e.label=1;case 1:if(!(o<t.length))return[3,6];n=t[o],i=this.callbacks[a][n],n=0,i=Object.values(i),e.label=2;case 2:return n<i.length?[4,(0,i[n])(d(a,s))]:[3,5];case 3:e.sent(),e.label=4;case 4:return n++,[3,2];case 5:return o++,[3,1];case 6:return[2]}})})}},window.roxotDispatcher=window.roxotDispatcher||n.dispatcherModule;var c=window.roxotDispatcher;function f(e,t){return e+" deprecated, use "+t}e=i.variables.rom;e.on=function(e){console.warn(f("rom.on","roxotDispatcher.on")),c.onAll(e)},e.off=function(e){for(var t in console.warn(f("rom.off","roxotDispatcher.off")),n.dispatcherModule.callbacks)if(n.dispatcherModule.callbacks.hasOwnProperty(t))for(var r in n.dispatcherModule.callbacks[t]){var o;n.dispatcherModule.callbacks[t].hasOwnProperty(r)&&(-1<(r=(o=n.dispatcherModule.callbacks[t][r]).indexOf(e))&&o.splice(r,1))}},e.dispatch=function(e){console.warn(f("rom.dispatch","roxotDispatcher.dispatch"));var t=(e=e||{}).event||"unknown";c.dispatch(t,e)};i=i.variables.rowr;i.on=function(e,t){console.warn(f("rowr.on","roxotDispatcher.on")),c.on(e,t)},i.onAll=function(e){console.warn(f("rowr.onAll","roxotDispatcher.onAll")),c.onAll(e)},i.off=function(e,t){if("string"!=typeof t)return console.warn(f("rowr.off","roxotDispatcher.off")),void console.error("Second argument of rowr.off must be a string");console.warn(f("rowr.off","roxotDispatcher.off")),c.off(e,t)}},{"../../constants/constants":49,"../../constants/variables":51,"../../utils/utils":139}],85:[function(e,t,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.flyRollFormatTypeModule=void 0;var d=e("../loggers/errorLoggerModule"),a=e("../dispatcherModule"),s=e("../../../constants/constants"),u=e("../../../utils/utils"),f=e("../../../utils/formatUtils"),o=300,r=300,g=100,p="rightBottom",l="flyRollTransformListener";function m(e){var t=e.placementDiv.getAttribute("id");return t||(d.errorLogger.error("FlyRoll","Id attribute not found at placementDiv",{placementConfig:e,placementDiv:e.placementDiv}),"")}function E(e){return m(e)+"__wrap"}function h(e){return m(e)+"__inner"}function v(e){return m(e)+"__close"}function S(s,l,d){var e,t,r,u;c.flyRollFormatTypeModule.lockTransform||c.flyRollFormatTypeModule.isFixedStick||c.flyRollFormatTypeModule.isTransitionInProgress||(c.flyRollFormatTypeModule.isFixedStick=!0,c.flyRollFormatTypeModule.isTransitionInProgress=!0,s.style.position="fixed",s.style.right="50%",s.style.bottom="100%",s.style.transition="all "+o+"ms ease-in-out",(e=(null===(e=null==d?void 0:d.flyRoll)||void 0===e?void 0:e.stickWidth)||0)&&(t=s.offsetWidth,s.style.transform="scale("+e/t+")"),r=(null===(t=null==d?void 0:d.flyRoll)||void 0===t?void 0:t.position)||p,u="right bottom",setTimeout(function(){switch(r){case"rightBottom":s.style.left="auto",s.style.top="auto",s.style.right="0",s.style.bottom="0",u="right bottom";break;case"leftBottom":s.style.left="0",s.style.top="auto",s.style.right="auto",s.style.bottom="0",u="left bottom";break;case"leftTop":s.style.left="0",s.style.top="0",s.style.right="auto",s.style.bottom="auto",u="left top";break;case"rightTop":s.style.left="auto",s.style.top="0",s.style.right="0",s.style.bottom="auto",u="right top"}s.style.transformOrigin=u}),setTimeout(function(){c.flyRollFormatTypeModule.isTransitionInProgress=!1;var e,t,r,o,n,i=Object.keys(l.formatWaterfall.currentAdUnitsIds)[0]||"",a=document.getElementById(i);t=d,r=l,o=function(){b(s,l),c.flyRollFormatTypeModule.lockTransform=!0},n=u,(e=a)&&(i=v(r),document.getElementById(i)||((a=function(e){var t=21,r=f.formatUtils.buildCloseWithStyles(t);"leftBottom"===e||"rightBottom"===e?r.style.top="-"+--t+"px":r.style.bottom="-"+--t+"px";return r}((null===(a=null==t?void 0:t.flyRoll)||void 0===a?void 0:a.position)||p)).setAttribute("id",i),a.classList.add("roxotFlyRollCloseButton"),e=(a=e.insertAdjacentElement("afterend",a)).getBoundingClientRect().width,e=a.offsetWidth/e,a.style.transform="scale("+e+")",a.style.transformOrigin=n,n=(null===(n=null==t?void 0:t.flyRoll)||void 0===n?void 0:n.closeTimeoutSeconds)||0,f.formatUtils.runCloseButtonTimer(a,n,h(r),t.onAdClose,o)))},o))}function b(e,t){c.flyRollFormatTypeModule.lockTransform||c.flyRollFormatTypeModule.isFixedStick&&(c.flyRollFormatTypeModule.isTransitionInProgress||(c.flyRollFormatTypeModule.isFixedStick=!1,c.flyRollFormatTypeModule.isTransitionInProgress=!0,(t=document.getElementById(v(t)))&&t.remove(),e.style.transition="all "+r+"ms ease-in-out",e.style.zIndex="100",e.style.position="fixed",e.style.right="50%",e.style.bottom="100%",e.style.top="auto",e.style.left="auto",setTimeout(function(){e.style.transition="none",e.style.position="static",e.style.right="auto",e.style.bottom="auto",e.style.left="auto",e.style.top="auto",e.style.transform="none",c.flyRollFormatTypeModule.isTransitionInProgress=!1},r)))}function y(e,t,r){var o,n,i,a,s,l;u.utils.isEventMatchesPlacement(e,t.placementId)&&(o=document.getElementById(E(t)),n=document.getElementById(h(t)),o&&n?(setTimeout(function(){o&&n&&(o.style.height=n.offsetHeight+"px",o.style.width=n.offsetWidth+"px")}),c.flyRollFormatTypeModule.removeAllScrollListeners(),i=o,a=n,s=t,l=r,c.flyRollFormatTypeModule.scrollListeners.push(r=function(){i.getBoundingClientRect().bottom<-g?S(a,s,l):b(a,s)}),document.addEventListener("scroll",r,!1)):d.errorLogger.error("FlyRoll","Can not enable block transformation - div not found.",{placementConfig:t,placementDiv:t.placementDiv}))}c.flyRollFormatTypeModule={scrollListeners:[],removeAllScrollListeners:function(){for(var e=0,t=this.scrollListeners;e<t.length;e++){var r=t[e];document.removeEventListener("scroll",r,!1)}},isFixedStick:!1,isTransitionInProgress:!1,lockTransform:!1,setup:function(t){if(!t.formatWaterfall.currentFormat)return null;var e=t.formatWaterfall.currentFormat.formatTags;if(!e.length)return null;var r=e[0].adConfig.options,o=document.getElementById(m(t));if(!o)return null;e=document.getElementById(E(t));e||(i=E(t),(n=document.createElement("div")).setAttribute("id",i),n.style.minHeight="1px",n.style.minWidth="1px",o.insertAdjacentElement("beforeend",e=n));var n,i=document.getElementById(h(t));return i||(o=h(t),(n=document.createElement("div")).setAttribute("id",o),n.style.position="static",n.style.zIndex="100",e.insertAdjacentElement("beforeend",i=n)),a.dispatcherModule.off(s.MANAGER_EVENTS.PLACEMENT_VISIBLE,l),a.dispatcherModule.on(s.MANAGER_EVENTS.PLACEMENT_VISIBLE,function(e){return y(e,t,r)},l),i},deleteOldBlocks:function(e){this.removeAllScrollListeners(),a.dispatcherModule.off(s.MANAGER_EVENTS.PLACEMENT_VISIBLE,l);e=document.getElementById(E(e));e&&e.remove()}}},{"../../../constants/constants":49,"../../../utils/formatUtils":136,"../../../utils/utils":139,"../dispatcherModule":84,"../loggers/errorLoggerModule":93}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fullScreenFormatTypeModule=void 0;var a=e("../../../utils/utils"),s=e("../../../constants/constants"),l=e("../../../constants/variables"),d=e("../loggers/romLoggerModule"),u=e("../loggers/errorLoggerModule"),c=e("../dispatcherModule"),i=e("../../../utils/formatUtils"),o=e("../loggers/rowrLoggerModule"),f="rom-fullscreen-showtime-",g="adTimeoutMinutes",p="maxScreenWidth",m="closeTimeoutSeconds",E=750,h=30,v=0,S="fullScreenOnAdVisibleCallback",b="fullScreenOnAdEmptyCallback";function y(e){return"roxotFullScreen-"+e.placementId}function O(e,t){(r=document.createElement("div")).setAttribute("id",y(e)),r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.backgroundColor="#4d4d4d",r.style.background="rgb(0 0 0 / 0.7)",r.style.opacity="0",r.style.pointerEvents="none",r.style.width="100%",r.style.height="100vh",r.style.zIndex="100000",r.style.textAlign="center";var r=document.body.insertAdjacentElement("beforeend",r),o=document.createElement("div"),n="roxotFullScreenClose-"+e.placementId;o.style.cursor="pointer",o.setAttribute("id",n),o.style.color="#000",o.style.background="#000",o.style.display="inline-block",o.style.lineHeight="0px",o.style.height="26px",o.style.width="26px",o.style.position="absolute",o.style.right="0",o.style.margin="13px",o.style.textAlign="center",o.style.fontSize="26px",o.style.boxSizing="content-box";o=r.insertAdjacentElement("beforeend",o),n=t.fullScreen||{},n=a.utils.getOptionFromConfigs(m,[n],v);i.formatUtils.runCloseButtonTimer(o,n,r.id,t.onAdClose);t=document.createElement("div");return t.setAttribute("id",(e=e,s.ROXOT_ID_PREFIXES.ROXOT_AD+e.placementId)),t.style.marginTop="52px",t.style.display="inline-block",r.insertAdjacentElement("beforeend",t),t}r.fullScreenFormatTypeModule={setup:function(r){if(!r.formatWaterfall.currentFormat)return null;var e=r.formatWaterfall.currentFormat.formatTags;if(!e.length)return null;var t=e[0].adConfig.options,o=t.fullScreen||{},e=a.utils.getOptionFromConfigs(p,[o],E);if(!a.utils.isCorrectScreenWidth(e)){var n="Device has incorrect width for Full Screen Placement. Aborting.",i={placementId:r.placementId,maxScreenWidth:e,currentScreenWidth:window.innerWidth,config:r.formatWaterfall.currentFormat,managerConfig:l.variables.romConfig};return d.romLogger.warning(n,i),u.errorLogger.warning(y(r),n,i),null}e=a.utils.getOptionFromConfigs(g,[o],h),o=Number(localStorage.getItem(f+r.placementId));if(!a.utils.isCorrectTimeout(e,o)){i={placementId:r.placementId,adTimeoutMinutes:e,config:r.formatWaterfall.currentFormat,managerConfig:l.variables.romConfig};return d.romLogger.warning(n="Full Screen Placement has active adTimeoutMinutes. Aborting.",i),u.errorLogger.warning(y(r),n,i),null}i=(i=document.getElementById(y(r)))||O(r,t);return c.dispatcherModule.off(s.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,S),c.dispatcherModule.off(s.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,b),c.dispatcherModule.on(s.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,function(e){var t;t=e,e=r,!a.utils.isEventMatchesPlacement(t,e.placementId)||(t=document.getElementById(y(e)))&&(t.style.opacity="1",t.style.pointerEvents="auto",e=f+e.placementId,localStorage.setItem(e,""+Date.now()))},S),c.dispatcherModule.on(s.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,function(e){var t;t=e,e=r,!a.utils.isEventMatchesPlacement(t,e.placementId)||(e=document.getElementById(y(e)))&&e.remove()},b),i},deleteOldBlocks:function(e){c.dispatcherModule.off(s.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,S),c.dispatcherModule.off(s.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,b);var t=document.getElementById(y(e));t&&t.remove(),o.rowrLogger.log(s.LOGGER_COMPONENTS.STICK_COMPONENT,"Fullscreen old blocks deleted successfully.",[e.placementTitle],{placementConfig:e})}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/formatUtils":136,"../../../utils/utils":139,"../dispatcherModule":84,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96,"../loggers/rowrLoggerModule":97}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.googleFullScreenFormatTypeModule=void 0;var n=e("../../../utils/utils"),i=e("../../../constants/constants"),a=e("../../../constants/variables"),s=e("../loggers/romLoggerModule"),l=e("../loggers/errorLoggerModule"),d=e("../dispatcherModule"),u=e("../loggers/rowrLoggerModule"),c="maxScreenWidth",f=750,g="googleFullScreenOnAdVisibleCallback",p="googleFullScreenOnAdEmptyCallback",m={};function E(e){return"roxotGoogleFullScreen-"+e.placementId}function h(e){(t=document.createElement("div")).setAttribute("id",E(e)),t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.top="0",t.style.left="0";var t=document.body.insertAdjacentElement("beforeend",t),r=document.createElement("div");return r.setAttribute("id",(e=e,i.ROXOT_ID_PREFIXES.ROXOT_AD+e.placementId)),t.insertAdjacentElement("beforeend",r),r}r.googleFullScreenFormatTypeModule={setup:function(r){if(!r.formatWaterfall.currentFormat)return null;var e=r.formatWaterfall.currentFormat.formatTags;if(!e.length)return null;var t=e[0].adConfig.options.googleFullscreen||{},e=n.utils.getOptionFromConfigs(c,[t],f);if(!n.utils.isCorrectScreenWidth(e)){var t="Device has incorrect width for Google Full Screen Placement. Aborting.",o={placementId:r.placementId,maxScreenWidth:e,currentScreenWidth:window.innerWidth,config:r.formatWaterfall.currentFormat,managerConfig:a.variables.romConfig};return s.romLogger.warning(t,o),l.errorLogger.warning(i.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,t,o),null}if(m[r.placementId]=m[r.placementId]||{},m[r.placementId].hasAd)return u.rowrLogger.debug(i.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,"Format already has ad.",null,{placementConfig:r}),null;if(!function(){if(!(t=window.localStorage.getItem("__lsv__")))return!0;var e=parseInt(t.replace("[","").replace("]","")),t=new Date(e+36e5),e=new Date;return!(new Date<t)||(u.rowrLogger.warning(i.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,"Google Full Screen Placement has active timeout (lsv). Aborting.",null,{now:e,estimateTime:t}),!1)}())return null;o=(o=document.getElementById(E(r)))||h(r);return d.dispatcherModule.off(i.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,g),d.dispatcherModule.off(i.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,p),d.dispatcherModule.on(i.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,function(e){var t;t=e,e=r,n.utils.isEventMatchesPlacement(t,e.placementId)&&document.getElementById(E(e))&&(m[e.placementId]={},m[e.placementId].hasAd=!0)},g),d.dispatcherModule.on(i.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,function(e){var t;t=e,e=r,!n.utils.isEventMatchesPlacement(t,e.placementId)||(e=document.getElementById(E(e)))&&e.remove()},p),o},deleteOldBlocks:function(e){d.dispatcherModule.off(i.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,g),d.dispatcherModule.off(i.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,p);var t=document.getElementById(E(e));t&&t.remove(),u.rowrLogger.log(i.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,"Google Fullscreen old blocks deleted successfully.",[e.placementTitle],{placementConfig:e})}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../dispatcherModule":84,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96,"../loggers/rowrLoggerModule":97}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.interScrollerFormatTypeModule=void 0;var i=e("../../../utils/utils"),a=e("../../../constants/variables"),s=e("../loggers/romLoggerModule"),l=e("../loggers/errorLoggerModule"),d="maxScreenWidth",u="height",c=750,f=600;function g(e){return"roxotAd-"+e}function p(e){return g(e)+"__wrapper"}function m(e,t,r){var o=document.getElementById(e);if(!o)return null;o.style.height=r+"px",o.style.zIndex="2";var n=document.createElement("div");n.setAttribute("id",p(e)),n.style.display="block",n.style.position="relative",n.style.height=r+"px",o.insertAdjacentElement("beforeend",n);o=document.createElement("div");o.setAttribute("id",p(e)+"__abs"),o.style.display="block",o.style.position="absolute",o.style.height=r+"px",o.style.clip="rect(0 auto auto 0)",o.style.width="100%",n.insertAdjacentElement("beforeend",o);n=document.createElement("div");return n.setAttribute("id",t),n.style.display="block",n.style.position="fixed",n.style.height=r+"px",n.style.left="0",n.style.top="0",n.style.bottom="0",n.style.display="flex",n.style.alignItems="center",n.style.width="100%",n.style.margin="auto",o.insertAdjacentElement("beforeend",n),n}r.interScrollerFormatTypeModule={deleteOldBlocks:function(e){e=e.placementDiv.getAttribute("id");!e||(e=document.getElementById(p(e)))&&e.remove()},setup:function(e){if(!e.formatWaterfall.currentFormat)return null;var t=e.formatWaterfall.currentFormat.formatTags;if(!t.length)return null;var r=t[0].adConfig.options.interscroller||{},o=e.placementDiv.getAttribute("id");if(!o)return l.errorLogger.error(o,"Id attribute not found at placementDiv",{placementConfig:e,placementDiv:e.placementDiv}),null;var n=i.utils.getOptionFromConfigs(d,[r],c);if(!i.utils.isCorrectScreenWidth(n)){t="Device has incorrect width for Interscroller Placement. Aborting.",e={placement:e.placementId,maxScreenWidth:n,currentScreenWidth:window.innerWidth,config:e.casesConfig,managerConfig:a.variables.romConfig};return s.romLogger.warning(t,e),l.errorLogger.warning(o,t,e),null}r=i.utils.getOptionFromConfigs(u,[r],f);return document.getElementById(p(o))||m(o,g(o),r)}}},{"../../../constants/variables":51,"../../../utils/utils":139,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stickFormatTypeModule=void 0;var l=e("../../../utils/utils"),d=e("../../../constants/constants"),u=e("../../../constants/variables"),c=e("../loggers/romLoggerModule"),f=e("../loggers/errorLoggerModule"),g=e("../dispatcherModule"),a=e("../../../utils/formatUtils"),p=e("../loggers/rowrLoggerModule"),m="rom-stick-showtime-",E={BOTTOM:"bottom",TOP:"top",RIGHT_BOTTOM:"rightBottom",RIGHT_TOP:"rightTop"},h={MAX_SCREEN_WIDTH:"maxScreenWidth",AD_TIMEOUT_MINUTES:"adTimeoutMinutes",POSITION:"position",INDENT:"indent",CLOSE_TIMEOUT_SECONDS:"closeTimeoutSeconds",STYLE:"style",WIDTH100:"width100",HEIGHT:"height"},v={MAX_SCREEN_WIDTH:5e3,AD_TIMEOUT_MINUTES:0,POSITION:E.BOTTOM,INDENT:0,CLOSE_TIMEOUT_SECONDS:0,STYLE:{},WIDTH100:!1,HEIGHT:0},s="roxotStickCloseButton";function S(e){return"roxotStick-"+e.placementId}function b(e){return"stickOnAdVisibleCallback-"+e.placementId}function y(e){return"stickOnAdEmptyCallback-"+e.placementId}function O(e,t,r,o){var n,i;l.utils.isEventMatchesPlacement(e,t.placementId)&&(n=m+t.placementId,localStorage.setItem(n,""+Date.now()),(i=document.getElementById(e.eventAdData.adId))&&(n=i,e=r,i=o,o="roxotStickClose-"+(r=t).placementId,document.getElementById(o)||((e=function(e){var t=21,r=a.formatUtils.buildCloseWithStyles(t);e===E.BOTTOM||e===E.RIGHT_BOTTOM?r.style.top="-"+--t+"px":r.style.bottom="-"+--t+"px";return r}(e)).setAttribute("id",o),e.classList.add(s),e=n.insertAdjacentElement("afterend",e),n=i.stick||i.bottomStick||{},n=l.utils.getOptionFromConfigs(h.CLOSE_TIMEOUT_SECONDS,[n],v.CLOSE_TIMEOUT_SECONDS),a.formatUtils.runCloseButtonTimer(e,n,S(r),i.onAdClose)),p.rowrLogger.log(d.LOGGER_COMPONENTS.STICK_COMPONENT,"Stick onAdVisible callback executed.",[t.placementTitle],{placementConfig:t})))}r.stickFormatTypeModule={setup:function(r){if(!r.formatWaterfall.currentFormat)return null;var e=r.formatWaterfall.currentFormat.formatTags;if(!e.length)return null;var t=e[0].adConfig.options,o=t.stick||t.bottomStick||{},n=l.utils.getOptionFromConfigs(h.MAX_SCREEN_WIDTH,[o],v.MAX_SCREEN_WIDTH);if(!l.utils.isCorrectScreenWidth(n)){var i="Device has incorrect width for Stick Placement. Aborting.",a={placement:r.placementId,maxScreenWidth:n,currentScreenWidth:window.innerWidth,config:r.casesConfig,managerConfig:u.variables.romConfig};return c.romLogger.warning(i,a),f.errorLogger.warning(S(r),i,a),null}e=l.utils.getOptionFromConfigs(h.AD_TIMEOUT_MINUTES,[o],v.AD_TIMEOUT_MINUTES),n=Number(localStorage.getItem(m+r.placementId));if(!l.utils.isCorrectTimeout(e,n)){a={placement:r.placementId,adTimeoutMinutes:e,config:r.casesConfig,managerConfig:u.variables.romConfig};return c.romLogger.warning(i="Stick Placement has active adTimeoutMinutes. Aborting.",a),f.errorLogger.warning(S(r),i,a),null}var s=l.utils.getOptionFromConfigs(h.POSITION,[o],v.POSITION),n=l.utils.getOptionFromConfigs(h.INDENT,[o],v.INDENT),e=l.utils.getOptionFromConfigs(h.STYLE,[o],v.STYLE),i=l.utils.getOptionFromConfigs(h.WIDTH100,[o],v.WIDTH100),a=l.utils.getOptionFromConfigs(h.HEIGHT,[o],v.HEIGHT),o=(o=document.getElementById(S(r)))||function(e,t,r,o,n,i){var a,e=S(e),s=document.createElement("div");for(a in s.setAttribute("id",e),s.style.position="fixed",s.style.zIndex="100000",s.style.left="50%",s.style.transform="translateX(-50%)",s.classList.add("roxotStickMainContainer"),n&&(s.style.width="100%"),i&&(s.style.height=i+"px"),t===E.BOTTOM?(s.style.bottom=o.bottom||r.toString(),delete o.bottom,s.style.top="auto"):t===E.TOP?(s.style.top=o.top||r.toString(),delete o.top,s.style.bottom="auto"):t===E.RIGHT_BOTTOM?(s.style.bottom=o.bottom||r.toString(),delete o.bottom,s.style.top="auto",s.style.removeProperty("left"),s.style.removeProperty("transform"),s.style.right="0"):t===E.RIGHT_TOP?(s.style.top=o.top||r.toString(),delete o.top,s.style.bottom="auto",s.style.removeProperty("left"),s.style.removeProperty("transform"),s.style.right="0"):(s.style.bottom=o.bottom||r.toString(),delete o.bottom,s.style.top="auto",f.errorLogger.error(e,'Unknown stick position "'+t+'".',{stickPosition:t})),o)o.hasOwnProperty(a)&&(s.style[a]=o[a]);return s=document.body.insertAdjacentElement("beforeend",s)}(r,s,n,e,i,a);return g.dispatcherModule.off(d.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,b(r)),g.dispatcherModule.off(d.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,y(r)),g.dispatcherModule.on(d.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,function(e){return O(e,r,s,t)},b(r)),g.dispatcherModule.on(d.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,function(e){var t;t=e,e=r,l.utils.isEventMatchesPlacement(t,e.placementId)&&((t=document.getElementById(S(e)))&&t.remove(),p.rowrLogger.log(d.LOGGER_COMPONENTS.STICK_COMPONENT,"Stick onAdEmpty callback executed.",[e.placementTitle],{placementConfig:e,stickBlock:t}))},y(r)),p.rowrLogger.log(d.LOGGER_COMPONENTS.STICK_COMPONENT,"Stick block built successfully.",[r.placementTitle],{placementConfig:r,stickBlock:o}),o},deleteOldBlocks:function(e){g.dispatcherModule.off(d.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,b(e)),g.dispatcherModule.off(d.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,y(e));var t=document.getElementById(S(e));t&&t.remove(),p.rowrLogger.log(d.LOGGER_COMPONENTS.STICK_COMPONENT,"Stick old blocks deleted successfully.",[e.placementTitle],{placementConfig:e})}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/formatUtils":136,"../../../utils/utils":139,"../dispatcherModule":84,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96,"../loggers/rowrLoggerModule":97}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.yandexFullScreenFormatTypeModule=void 0;var i=e("../../../utils/utils"),a=e("../../../constants/constants"),s=e("../../../constants/variables"),l=e("../loggers/romLoggerModule"),d=e("../loggers/errorLoggerModule"),u=e("../dispatcherModule"),o=e("../loggers/rowrLoggerModule"),c="rom-yandex-fullscreen-showtime-",f="adTimeoutMinutes",g="maxScreenWidth",p=750,m=30,E="yandexFullScreenOnAdVisibleCallback",h="yandexFullScreenOnAdEmptyCallback";function v(e){return"rxtYandexFullScreen-"+e.placementId}function S(e){(t=document.createElement("div")).setAttribute("id",v(e)),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="1px",t.style.height="1px";var t=document.body.insertAdjacentElement("beforeend",t),r=document.createElement("div");return r.setAttribute("id",(e=e,a.ROXOT_ID_PREFIXES.ROXOT_AD+e.placementId)),t.insertAdjacentElement("beforeend",r),r}r.yandexFullScreenFormatTypeModule={setup:function(r){if(!r.formatWaterfall.currentFormat)return null;var e=r.formatWaterfall.currentFormat.formatTags;if(!e.length)return null;var t=e[0].adConfig.options.yandexFullscreen||{},e=i.utils.getOptionFromConfigs(g,[t],p);if(!i.utils.isCorrectScreenWidth(e)){var o="Device has incorrect width for Full Screen Placement. Aborting.",n={placementId:r.placementId,maxScreenWidth:e,currentScreenWidth:window.innerWidth,config:r.formatWaterfall.currentFormat,managerConfig:s.variables.romConfig};return l.romLogger.warning(o,n),d.errorLogger.warning(a.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,o,n),null}e=i.utils.getOptionFromConfigs(f,[t],m),t=Number(localStorage.getItem(c+r.placementId));if(!i.utils.isCorrectTimeout(e,t)){n={placementId:r.placementId,adTimeoutMinutes:e,config:r.formatWaterfall.currentFormat,managerConfig:s.variables.romConfig};return l.romLogger.warning(o="Yandex Full Screen Placement has active adTimeoutMinutes. Aborting.",n),d.errorLogger.warning(a.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,o,n),null}n=(n=document.getElementById(v(r)))||S(r);return u.dispatcherModule.off(a.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,E),u.dispatcherModule.off(a.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,h),u.dispatcherModule.on(a.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,function(e){var t;t=e,e=r,!i.utils.isEventMatchesPlacement(t,e.placementId)||(t=document.getElementById(v(e)))&&(t.style.opacity="1",t.style.pointerEvents="auto",e=c+e.placementId,localStorage.setItem(e,""+Date.now()))},E),u.dispatcherModule.on(a.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,function(e){var t;t=e,e=r,!i.utils.isEventMatchesPlacement(t,e.placementId)||(e=document.getElementById(v(e)))&&e.remove()},h),n},deleteOldBlocks:function(e){u.dispatcherModule.off(a.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,E),u.dispatcherModule.off(a.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,h);var t=document.getElementById(v(e));t&&t.remove(),o.rowrLogger.log(a.LOGGER_COMPONENTS.STICK_COMPONENT,"Yandex Fullscreen old blocks deleted successfully.",[e.placementTitle],{placementConfig:e})}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../dispatcherModule":84,"../loggers/errorLoggerModule":93,"../loggers/romLoggerModule":96,"../loggers/rowrLoggerModule":97}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatWaterfallModule=void 0;var s=e("./repositories/adConfigRepository"),l=e("../../utils/adBlockBuilder"),d=e("./dispatcherModule"),u=e("../../constants/constants"),c=e("./loggers/romLoggerModule"),f=e("./loggers/errorLoggerModule"),g=e("../../constants/variables"),p=e("./placementModule"),m=e("./markers/placementMarkers"),E=e("./formatTypes/fullScreenFormatTypeModule"),h=e("./formatTypes/stickFormatTypeModule"),v=e("./formatTypes/interScrollerFormatTypeModule"),S=e("./deferAdModule"),b=e("./loggers/rowrLoggerModule"),y=e("../../utils/adConfigUtils"),O=e("../../utils/placementConfigUtils"),C=e("./formatTypes/flyRollFormatTypeModule"),A=e("./formatTypes/googleFullScreenFormatTypeModule"),_=e("./formatTypes/yandexFullScreenFormatTypeModule"),N={};function M(e){var t=e.formatWaterfall.currentFormat.type;if(t===u.COMMON_FORMAT_TYPE||t===u.MULTI_AD_SLIDER_FORMAT_TYPE)return(r=(r=e).placementDiv.getAttribute("id"))&&!!r.includes(u.ROXOT_ID_PREFIXES.ROXOT_AUTOGENERATED)?(f.errorLogger.error(e.placementId,"Placement div was auto-generated. Only formats with types: fullscreen/stick/bottomStick are supported for auto-generated divs.",{placementTitle:e.placementTitle,placementId:e.placementId,placementConfig:e}),null):e.placementDiv;if(t===u.FULLSCREEN_FORMAT_TYPE){var r=E.fullScreenFormatTypeModule.setup(e);return r?r:null}if(t===u.GOOGLE_FULLSCREEN_FORMAT_TYPE){var o=A.googleFullScreenFormatTypeModule.setup(e);return o?o:null}if(t===u.YANDEX_FULLSCREEN_FORMAT_TYPE){o=_.yandexFullScreenFormatTypeModule.setup(e);return o?o:null}if(t===u.STICK_FORMAT_TYPE){var n=h.stickFormatTypeModule.setup(e);return n?n:null}if(t===u.INTERSCROLLER_FORMAT_TYPE){n=v.interScrollerFormatTypeModule.setup(e);return n?n:null}if(t!==u.FLY_ROLL_FORMAT_TYPE)return f.errorLogger.error(e.placementId,"Format type not supported",{placementConfig:e,formatType:t}),null;e=C.flyRollFormatTypeModule.setup(e);return e||null}r.formatWaterfallModule={requestFormatAds:function(e,t){if(void 0===t&&(t=!1),b.rowrLogger.debug(u.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,"Start requestNextFormatAds.",e.placementTitle,{placementConfig:e}),S.deferAdModule.checkSiteOpenedCount(e)){p.placementModule.resetPlacementCounters(e),e.formatWaterfall.currentAdHaveSeenByUser=!1;var r=e.formatWaterfall.formatsStack;if(t&&(function(e){for(var t=Object.values(e.formatWaterfall.currentAdUnitsIds),r=0;r<t.length;r++){var o=t[r],n=s.adConfigRepository.find(o);n&&(r===t.length-1&&O.placementConfigUtils.saveLastAdConfig(e,n),delete N[o],y.adConfigUtils.deleteNotExistsAdTag(n))}e.placementDiv.innerHTML="",e.formatWaterfall.currentAdUnitsIds={};var i=e.formatWaterfall.currentFormat;i&&((i=i.type)===u.INTERSCROLLER_FORMAT_TYPE?v.interScrollerFormatTypeModule.deleteOldBlocks(e):i===u.FULLSCREEN_FORMAT_TYPE?E.fullScreenFormatTypeModule.deleteOldBlocks(e):i===u.GOOGLE_FULLSCREEN_FORMAT_TYPE?A.googleFullScreenFormatTypeModule.deleteOldBlocks(e):i===u.YANDEX_FULLSCREEN_FORMAT_TYPE?_.yandexFullScreenFormatTypeModule.deleteOldBlocks(e):i===u.STICK_FORMAT_TYPE?h.stickFormatTypeModule.deleteOldBlocks(e):i===u.FLY_ROLL_FORMAT_TYPE&&C.flyRollFormatTypeModule.deleteOldBlocks(e))}(e),e.formatWaterfall.currentFormat=null),e.formatWaterfall.currentFormat||(e.formatWaterfall.currentFormat=(o=(o=r).shift(),b.rowrLogger.debug(u.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,"Get next ads format.",null,{format:o}),o)),e.formatWaterfall.currentFormat){var o=function(t){var e=M(t);if(!e)return[];for(var r=[],o=0,n=t.formatWaterfall.currentFormat.formatTags;o<n.length;o++){var i=n[o];try{i.adConfig.details.roxotPlacementId=t.roxotPlacementId;var a=i.adUnitId;N[a]||(N[a]=!0,l.adBlockBuilder.createAdHtmlBlocks(i,e,a)),d.dispatcherModule.dispatch(u.MANAGER_EVENTS.BEFORE_AD_BLOCK_DATA_PUSH,{placementConfig:t,adBlockDivId:a,tag:i}),r.push({divId:a,adConfig:i.adConfig})}catch(e){c.romLogger.error("Error in process tag: "+e,{placementId:t.placementId,placementTitle:t.placementTitle,placementDataId:t.roxotPlacementId,tag:i}),f.errorLogger.error(t.placementId,"Error in process tag: "+e,{placementId:t.placementId,placementTitle:t.placementTitle,placementDataId:t.roxotPlacementId,tag:i})}}return r}(e);if(o.length){f.errorLogger.log(e.placementTitle,"Built ads for format.",{placementConfig:e,ads:o,currentFormat:e.formatWaterfall.currentFormat});for(var n=0,i=o;n<i.length;n++){var a=i[n];e.formatWaterfall.currentAdUnitsIds[a.divId]=a.divId,g.variables.rowr.setAdConfig(a.divId,a.adConfig)}}else this.requestFormatAds(e,!0)}else m.placementMarkers.markAsNoServer(e)}},resetFormatWaterfall:function(e){b.rowrLogger.debug(u.LOGGER_COMPONENTS.FORMAT_WATERFALL_COMPONENT,"Start resetFormatWaterfall.",e.placementTitle,{placementConfig:e}),e.formatWaterfall.formatsStack=[];for(var t=0,r=e.formats;t<r.length;t++){var o=r[t];e.formatWaterfall.formatsStack.push(o)}}}},{"../../constants/constants":49,"../../constants/variables":51,"../../utils/adBlockBuilder":133,"../../utils/adConfigUtils":134,"../../utils/placementConfigUtils":138,"./deferAdModule":83,"./dispatcherModule":84,"./formatTypes/flyRollFormatTypeModule":85,"./formatTypes/fullScreenFormatTypeModule":86,"./formatTypes/googleFullScreenFormatTypeModule":87,"./formatTypes/interScrollerFormatTypeModule":88,"./formatTypes/stickFormatTypeModule":89,"./formatTypes/yandexFullScreenFormatTypeModule":90,"./loggers/errorLoggerModule":93,"./loggers/romLoggerModule":96,"./loggers/rowrLoggerModule":97,"./markers/placementMarkers":99,"./placementModule":103,"./repositories/adConfigRepository":105}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loadManagerModule=void 0,r.loadManagerModule={loadManagerModules:[],isAlreadyLoaded:function(e){return-1!==this.loadManagerModules.indexOf(e)},markAsAlreadyLoaded:function(e){this.loadManagerModules.push(e)}}},{}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.errorLogger=void 0;var o=e("../../../constants/constants"),n=e("./loggerUtils");function i(e,t,r){var o=[],n=(r.adConfig||{}).details||{},r=n.placement,n=n.tagTitle||!1;return n&&o.push('"'+n+'"'),o.length||(o=['"main"']),a(t='| Block "'+e+'" '+(r?'| Placement "'+r+'", AdTag '+o.join(", "):"")+" : "+t)}function a(e){var t=new Date,r=[t.getHours(),t.getMinutes(),t.getSeconds()].join(":");return(r+="."+t.getMilliseconds())+": RoxotEngine ("+o.VERSION+") "+e}r.errorLogger={enabled:!1,init:function(){try{this.enabled=!!localStorage.getItem(o.LOCAL_STORAGE_KEYS.DEBUG.ERROR_LOGGER_DEBUG)}catch(e){this.enabled=!1}},forceInit:function(){this.enabled=!0},forceDisable:function(){this.enabled=!1},forceSetInitLsKey:function(){try{localStorage.setItem(o.LOCAL_STORAGE_KEYS.DEBUG.ERROR_LOGGER_DEBUG,"1")}catch(e){console.error(n.loggerUtils.buildLocalStorageErrorMessage([o.LOCAL_STORAGE_KEYS.DEBUG.ERROR_LOGGER_DEBUG]))}},error:function(e,t,r){void 0===r&&(r={}),this.enabled&&(t=i(e,t,r),console.error(t,r))},warning:function(e,t,r){void 0===r&&(r={}),this.enabled&&(t=i(e,t,r),console.warn(t,r))},log:function(e,t,r){void 0===r&&(r={}),this.enabled&&(t=i(e,t,r),console.log(t,r))},simpleLog:function(e,t){void 0===t&&(t={}),this.enabled&&(e=a(e),console.log(e,t))}}},{"../../../constants/constants":49,"./loggerUtils":94}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loggerUtils=void 0,r.loggerUtils={buildLocalStorageErrorMessage:function(e){return"Cannot set "+e.join(", ")+" LS keys."}}},{}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.profilerLogger=void 0;var a=e("../../../constants/constants"),o=e("./loggerUtils");r.profilerLogger={events:{},enabled:!1,init:function(){try{this.enabled=!!localStorage.getItem(a.LOCAL_STORAGE_KEYS.DEBUG.PROFILER_LOGGER_DEBUG)}catch(e){this.enabled=!1}},forceInit:function(){this.enabled=!0},forceDisable:function(){this.enabled=!1},forceSetInitLsKey:function(){try{localStorage.setItem(a.LOCAL_STORAGE_KEYS.DEBUG.PROFILER_LOGGER_DEBUG,"1")}catch(e){console.error(o.loggerUtils.buildLocalStorageErrorMessage([a.LOCAL_STORAGE_KEYS.DEBUG.PROFILER_LOGGER_DEBUG]))}},profile:function(e){if(this.enabled){var t=e.eventAdData||{},r=t.adId||!1;if(r){var o=(null===(i=t.details)||void 0===i?void 0:i.tagTitle)||!1;if(o){if(e.event===a.WRAPPER_EVENTS.AD_LEVEL.REQUEST)return this.events[r]=[],void this.events[r].push({date:new Date,event:e});if(this.events.hasOwnProperty(r)){if([a.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,a.WRAPPER_EVENTS.AD_LEVEL.VISIBLE].includes(e.event)){this.events[r].push({date:new Date,event:e});var n=this.events[r],i=n[0],i=(n[n.length-1].date.getTime()-i.date.getTime())/1e3,o="ROWR Profiler for "+o+" ("+r+"). Time: "+i+" sec.";return(10<i?console.error(o,n):5<i?console.warn(o,n):console.log(o,n),e.event===a.WRAPPER_EVENTS.AD_LEVEL.VISIBLE&&(null===(t=t.adServer)||void 0===t?void 0:t.name)===a.SSP_NAMES.THIRD_PARTY)?void 0:void delete this.events[r]}this.events[r].push({date:new Date,event:e})}}}}}}},{"../../../constants/constants":49,"./loggerUtils":94}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.romLogger=void 0;var o=e("../../../constants/constants"),n=e("./loggerUtils");function i(e){var t=new Date,r=[t.getHours(),t.getMinutes(),t.getSeconds()].join(":");return(r+="."+t.getMilliseconds())+": RoxotManager ("+o.VERSION+"): "+e}r.romLogger={enabled:!1,init:function(){try{this.enabled=!!localStorage.getItem("rom.debug.consoleDebug")}catch(e){this.enabled=!1}},forceSetInitLsKey:function(){try{localStorage.setItem(o.LOCAL_STORAGE_KEYS.DEBUG.ROM_LOGGER_DEBUG,"1")}catch(e){console.error(n.loggerUtils.buildLocalStorageErrorMessage([o.LOCAL_STORAGE_KEYS.DEBUG.ROM_LOGGER_DEBUG]))}},log:function(e,t){void 0===t&&(t={}),this.enabled&&(e=i(e),console.log(e,t))},error:function(e,t){void 0===t&&(t={}),this.enabled&&(e=i(e),console.error(e,t))},warning:function(e,t){void 0===t&&(t={}),this.enabled&&(e=i(e),console.warn(e,t))}}},{"../../../constants/constants":49,"./loggerUtils":94}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rowrLogger=void 0;var a=e("../../../constants/constants"),o=e("./loggerUtils"),n=e("../repositories/placementConfigRepository");function i(e,t,r,o){var n=new Date,i=[n.getHours(),n.getMinutes(),n.getSeconds()].join(":");i+="."+n.getMilliseconds(),Array.isArray(r)||(r=r?[r]:[]);o=((o.adConfig||{}).details||{}).tagTitle||!1;return o&&r.push(o),r.length||(r=["main"]),i+": ROWR ("+a.VERSION+") | "+e+" | "+r.join(", ")+": "+t}function s(e){return e.split(",").map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e})}function l(e,t){e&&(console.log("ROWR log enabled"),t.length?console.log("ROWR components: "+t.join(", ")):console.warn('ROWR: You should set components list "," separated or "all" in '+a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG_COMPONENTS+' local storage key. For example: "wrapper, waterfall" or "all".'))}r.rowrLogger={enabled:!1,components:[],init:function(){try{this.enabled=!!localStorage.getItem(a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG),this.components=s(localStorage.getItem(a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG_COMPONENTS)||"")}catch(e){this.enabled=!1,this.components=[]}l(this.enabled,this.components)},forceInit:function(e){void 0===e&&(e=""),this.enabled=!0,this.components=s(e),l(this.enabled,this.components)},forceDisable:function(){this.enabled=!1},forceSetInitLsKeys:function(e){try{localStorage.setItem(a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG,"1"),localStorage.setItem(a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG_COMPONENTS,e)}catch(e){console.error(o.loggerUtils.buildLocalStorageErrorMessage([a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG,a.LOCAL_STORAGE_KEYS.DEBUG.ROWR_LOGGER_DEBUG_COMPONENTS]))}l(this.enabled,this.components)},logEvent:function(e){var t,r='Event "'+e.event+'"',o=[];e.eventAdData&&(r+=' in "'+e.eventAdData.details.tagTitle+'" tag/format.',t=n.placementConfigRepository.get(e.eventAdData.details.roxotPlacementId),o.push(t.placementTitle)),this.log(a.LOGGER_COMPONENTS.EVENT_COMPONENT,r,o,{event:e})},log:function(e,t,r,o){void 0===r&&(r=[]),void 0===o&&(o={}),this._isEnabled(e)&&(r=i(e,t,r,o),console.log(r,o))},warning:function(e,t,r,o){void 0===r&&(r=[]),void 0===o&&(o={}),this._isEnabled(e)&&(r=i(e,t,r,o),console.warn(r,o))},error:function(e,t,r,o){void 0===r&&(r=[]),void 0===o&&(o={}),this._isEnabled(e)&&(r=i(e,t,r,o),console.error(r,o))},debug:function(e,t,r,o){void 0===r&&(r=[]),void 0===o&&(o={}),this._isEnabled(e)&&(r=i(e,t,r,o),console.debug(r,o))},_isEnabled:function(e){return!!this.enabled&&(!!this.components.includes(e.toLowerCase())||!!this.components.includes("all"))}}},{"../../../constants/constants":49,"../repositories/placementConfigRepository":106,"./loggerUtils":94}],98:[function(u,e,t){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,a=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},f=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.managerModule=void 0;var g=u("../../constants/constants"),p=u("../../utils/utils"),m=u("./loggers/errorLoggerModule"),E=u("./loggers/romLoggerModule"),s=u("./placementSettingsModule"),h=u("../../constants/variables"),v=u("./dispatcherModule"),S=u("./loggers/rowrLoggerModule"),b=u("./placementModule"),o=u("./loggers/profilerModule"),y=u("./repositories/placementConfigRepository"),O=u("./markers/placementMarkers"),n=u("./repositories/adConfigRepository"),i=u("./counterModule"),C=u("./deferAdModule"),A=u("./wrapperModule"),_={ENABLED:!1,OFFSET:100,RERUN_TIMEOUT:1e3};function l(e,t,r){var o,n,i=r.experiments.filter(function(e){return e.hasOwnProperty("chance")&&0<e.chance}),a=function e(t){if(0===t.length)return!1;if(1===t.length)return t[0];var r=d(t);var o=p.utils.getRandomNumber(r);t=t.slice(0);var r=t.shift();if(o<=r.chance)return r;return e(t)}(i);o=e,n=t,r.experiments.forEach(function(e){isNaN(e.chance)&&m.errorLogger.warning(o,'Experiment has an incorrect chance value "'+e.chance+'".',{div:o,config:n,managerConfig:h.variables.romConfig,experiment:e})});i={div:e,config:t,managerConfig:h.variables.romConfig,sizeCase:r,experiments:i,experiment:a};return a?(E.romLogger.log("Experiment has been chosen in "+e+" block",i),v.dispatcherModule.dispatch(g.MANAGER_EVENTS.EXPERIMENT_CHOSEN,{config:t,experiment:a}),a):(m.errorLogger.error(e,"Experiments with chance > 0 not found.",i),!1)}function d(e){return e.map(function(e){return e.chance}).reduce(function(e,t){return e+t})}function N(e,t,r,o){return t.options=t.options||{},t.options.lazyLoading=t.options.lazyLoading||{},e.options=e.options||{},e.options.lazyLoading=e.options.lazyLoading||{},p.utils.getOptionFromConfigs(r,[t.options.lazyLoading,e.options.lazyLoading,h.variables.romConfig.lazyLoading],o)}function M(e,t,r){var o={div:e,config:t,managerConfig:h.variables.romConfig},n=w(e);if(!n)return E.romLogger.warning('Roxot Manager: Lazy loading: Block was removed "'+e+'".',o),void m.errorLogger.warning(e,'Lazy loading: Block was removed "'+e+'".',o);if(!N(t,r,"enabled",_.ENABLED))return 1;var i=N(t,r,"offset",_.OFFSET),a=window.pageYOffset-i,t=window.pageYOffset+window.innerHeight+i,r=function e(t){if(!t)return 0;return t.offsetTop+e(t.offsetParent)}(n),n=r+n.offsetHeight;if(o.windowOffset=i,o.windowTop=a,o.windowBottom=t,o.blockTop=r,(o.blockBottom=n)<a)E.romLogger.log('Roxot Manager: Lazy loading: Ad block "'+e+'" above window on '+(a-n)+"px",o);else{if(!(t<r))return E.romLogger.log('Roxot Manager: Lazy loading: Ad block "'+e+'" into window',o),1;E.romLogger.log('Roxot Manager: Lazy loading: Ad block "'+e+'" below window on '+(r-t)+"px",o)}}function T(e,t,r){var o,n={div:e,config:t,managerConfig:h.variables.romConfig};if(M(e,t,r)){m.errorLogger.log(e,"Run experiment.",n);var i=w(e);if(i){var a=p.utils.generateId(g.ROXOT_ID_PREFIXES.ROXOT_PLACEMENT);i.dataset.roxotPlacementId=a;var s=r.formatWaterfall;if(!s){var l=r.tags||[];if(!l.length)return void m.errorLogger.error(e,"Placement does not has any formats or tags in config.");s=[{type:null!==(o=t.placementType)&&void 0!==o?o:"common",formatTags:l}]}var d,i=b.placementModule.buildConfig(a,s,i,t);y.placementConfigRepository.add(i.roxotPlacementId,i),n.placementConfig=i,m.errorLogger.log(e,"Placement built. Run Placement config...",n),E.romLogger.log("Run placement config for "+e+" block.",n),d=i,(i=t).options=i.options||{},(i=i.options.loadDelaySeconds||0)?(m.errorLogger.log(d.placementId,"Load delay seconds is set. Start loading in "+i+" sec(s).",{div:d.placementId,placementConfig:d,managerConfig:h.variables.romConfig}),setTimeout(function(){O.placementMarkers.markAsNeedRefresh(d)},1e3*i)):O.placementMarkers.markAsNeedRefresh(d)}else m.errorLogger.error(e,'Run experiment: Block was removed "'+e+'".',n)}else setTimeout(function(){T(e,t,r)},N(t,r,"rerunTimeout",_.RERUN_TIMEOUT))}function w(e){return document.getElementById(e)}function R(e,t){var r=function e(t,r){if(!r.includes("."))return{};var o=t[r];o=o||e(t,P(r));return o}(e.hostConfig||{},t);h.variables.romConfig.isAcceptableAdsEnabled=r.isAcceptableAdsEnabled||!1;r=r.wrapperOptions||{};Object.keys(r).length?(E.romLogger.log('Found Wrapper Options host config for host "'+t+'".',{config:e,host:t}),p.utils.mergeConfigs(h.variables.romConfig.wrapperConfig,r)):E.romLogger.log('No Wrapper Options in host config for host "'+t+'".',{config:e,host:t})}function P(e){e=e.split(".");return e.shift(),e.join(".")}function L(e,t){var r=document.createElement("div"),o=p.utils.generateId(g.ROXOT_ID_PREFIXES.ROXOT_AUTOGENERATED);r.setAttribute("id",o),r.style.width="100%",document.body.insertAdjacentElement("beforeend",r),(t=t||{}).placementType="stick",k.displayPlacement(o,e,t)}function I(e){for(var t=0,r=((e.formatWaterfall||{}).currentFormat||{}).formatTags||[];t<r.length;t++)for(var o=0,n=(r[t].adConfig||{}).adServersConfig||[];o<n.length;o++){var i=n[o];if(x[i.name])return 1}}var x=((r={})[g.SSP_NAMES.VIDEO_NOW]=g.SSP_NAMES.VIDEO_NOW,r[g.SSP_NAMES.ROXOT_IN_OUT_STREAM]=g.SSP_NAMES.ROXOT_IN_OUT_STREAM,r[g.SSP_NAMES.ROXOT_OUT_STREAM]=g.SSP_NAMES.ROXOT_OUT_STREAM,r[g.SSP_NAMES.ROXOT_AD_FOX_VIDEO]=g.SSP_NAMES.ROXOT_AD_FOX_VIDEO,r);var k=h.variables.rom,G=h.variables.romDebug;t.managerModule={init:function(){k.displayPlacement=function(o,n,i){return a(this,void 0,void 0,function(){var t,r;return f(this,function(e){switch(e.label){case 0:return p.utils.isCorrectPlacementId(n)?(i=i||(s.placementSettingsModule.extractPlacementSettingsFromFunction(o,n)||{}),t=p.utils.deepClone(i),s.placementSettingsModule.validateSettings(o,t),[4,v.dispatcherModule.dispatchAsync(g.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,{event:g.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,publisherDivId:o,placementId:n,settings:t})]):[2];case 1:return e.sent(),[4,p.utils.getPlacementConfigUrl(n)];case 2:return r=e.sent(),E.romLogger.log('Load placement config for "'+o+'"',{div:o,placement:n,settings:i,clonedSettings:t,url:r,managerConfig:h.variables.romConfig}),p.utils.jsonAjax(r,function(e){v.dispatcherModule.dispatch(g.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG,{event:g.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG,div:o,placement:n,config:e,settings:t}),t.placementType&&(e.placementType=t.placementType),k.displayConfig(o,e)}),[2]}})})},k.displayFullScreenPlacement=function(e,t){var r=document.createElement("div"),o=p.utils.generateId(g.ROXOT_ID_PREFIXES.ROXOT_AUTOGENERATED);r.setAttribute("id",o),r.style.width="100%",document.body.insertAdjacentElement("beforeend",r),(t=t||{}).placementType="fullscreen",k.displayPlacement(o,e,t)},k.displayFullScreenConfig=function(){console.error("ROM: rom.displayFullScreenConfig is deprecated")},k.displayStickPlacement=L,k.displayBottomStickPlacement=L,k.displayStickConfig=function(){console.error("ROM: rom.displayStickConfig is deprecated")},k.displayInterscrollerPlacement=function(e,t,r){(r=r||{}).placementType="interscroller",k.displayPlacement(e,t,r)},k.displayInterscrollerConfig=function(){console.error("ROM: rom.displayInterscrollerConfig is deprecated")},k.displayConfig=function(e,t){var r={div:e,config:t,managerConfig:h.variables.romConfig};m.errorLogger.log(e,"Start loading block.",r);var o=w(e);if(!o)return E.romLogger.warning('Can not found div with id "'+e+'"',r),void m.errorLogger.warning(e,'Can not found div with id "'+e+'"',r);var n=function(e){var t=!1;e.offsetWidth||(t=e.style.width,e.style.width="100%");var r=e.offsetWidth;return!1!==t&&(e.style.width=t),r}(o);E.romLogger.log('Publisher placement "'+e+'" has size '+n+".",r);o=t.cases.filter(function(e){return e.size<=n}).sort(function(e,t){return e.size-t.size});if(!o.length)return E.romLogger.warning("Not found support sizeCase for "+n+" size of "+e+" block.",r),void m.errorLogger.warning(e,"Not found support sizeCase for "+n+" size of "+e+" block.",r);o=o.pop();r.sizeCase=o,E.romLogger.log("Use sizeCase with size "+o.size+" for "+e+" block.",r);r=l(e,t,o);r&&(o={enabled:N(t,r,"enabled",_.ENABLED),offset:N(t,r,"offset",_.OFFSET),rerunTimeout:N(t,r,"rerunTimeout",_.RERUN_TIMEOUT)},m.errorLogger.log(e,"Prepare to run experiment. "+(o.enabled?"LazyLoading is enabled.":"LazyLoading is disabled."),{div:e,config:t,managerConfig:h.variables.romConfig,lazyLoadingOptions:o}),T(e,t,r))},k.setKeyValue=function(e,t){var r,o;r=e,o=t,h.variables.rowr.cmd.push(function(){h.variables.rowr.setKeyValue(r,o)}),h.variables.romConfig.keyValues=h.variables.romConfig.keyValues||{},h.variables.romConfig.keyValues[r]=o,E.romLogger.log("Set KeyValues",{key:r,value:o})},k.version=function(){return g.VERSION},k.forceSetAllLoggersInitLsKeys=function(e){m.errorLogger.forceSetInitLsKey(),o.profilerLogger.forceSetInitLsKey(),S.rowrLogger.forceSetInitLsKeys(e),E.romLogger.forceSetInitLsKey()},k.forceInitRowrLogger=function(e){S.rowrLogger.forceInit(e)},k.forceDisableRowrLogger=function(){S.rowrLogger.forceDisable()},k.forceInitProfilerLogger=function(){o.profilerLogger.forceInit()},k.forceDisableProfilerLogger=function(){o.profilerLogger.forceDisable()},k.forceInitErrorLogger=function(){m.errorLogger.forceInit()},k.forceDisableErrorLogger=function(){m.errorLogger.forceDisable()},k.refreshAllVisibleAds=function(){for(var e=0,t=y.placementConfigRepository.getAll();e<t.length;e++){var r=t[e];document.getElementById(r.placementTitle)&&(I(r)||O.placementMarkers.markAsNeedRefresh(r))}},k.refreshAllVisibleVideoAds=function(){for(var e=0,t=y.placementConfigRepository.getAll();e<t.length;e++){var r=t[e];document.getElementById(r.placementTitle)&&I(r)&&r.isReadyToHardRefreshVideoAd&&O.placementMarkers.markAsNeedRefresh(r)}},G.showPlacementConfig=function(e){m.errorLogger.log("Debug","",{placementConfig:y.placementConfigRepository.get(e)})},G.showAllPlacementsConfigs=function(){m.errorLogger.log("Debug","",{placementsConfigs:y.placementConfigRepository.getAll()})},G.showAdConfig=function(e){m.errorLogger.log("Debug","",{adConfig:n.adConfigRepository.get(e)})},G.showAllAdsConfigs=function(){m.errorLogger.log("Debug","",{adsConfigs:n.adConfigRepository.getAll()})},G.showAllCounters=function(){m.errorLogger.log("Debug","",{adConfigCounters:i.counterModule.adConfigCounters,adServerCounters:i.counterModule.adServerCounters})}},run:function(d){return a(this,void 0,void 0,function(){var o,n,i,a,s,l;return f(this,function(e){switch(e.label){case 0:o=[],void 0===c(d.iframeSspList)?"iframe"===d.adBlockMode&&(o=[g.SSP_NAMES.GOOGLE,g.SSP_NAMES.PREBID,g.SSP_NAMES.GOOGLE_PREBID]):o=d.iframeSspList,function(e,t){if(t.length&&"frame-engine.js"===(e.wrapperConfig||{}).engineFileName)throw"Frame engine works only when iframe mode turned off for all ssp in company."}(d,o),v.dispatcherModule.onAllManagerEvents(function(e){S.rowrLogger.logEvent(e)});try{a=u("ua-parser-js"),s=new a,n=s.getBrowser().name,i=s.getOS().name,l=s.getDevice().type?s.getDevice().type:"desktop"}catch(e){m.errorLogger.error("Manager","Error defining specific settings",e)}return h.variables.romConfig={publisherId:d.publisherId||null,publisher:d.publisher||null,iframeSspList:o,dynamicUrlTemplate:d.dynamicUrlTemplate||null,wrapperConfig:d.wrapperConfig||{},wrapperUrl:d.wrapperUrl,engineUrl:d.managerUrl,monetizationStatsUrl:d.monetizationStatsUrl||"https://worker.sttsmntz.ru/stats/format",placementConfigTemplate:d.placementConfigTemplate,gfsPlacementOptionsTemplate:d.gfsPlacementOptionsTemplate,isLanguageSpecific:d.isLanguageSpecific||!1,isBrowserSpecific:d.isBrowserSpecific||!1,isOsSpecific:d.isOsSpecific||!1,isDeviceTypeSpecific:d.isDeviceTypeSpecific||!1,isGeoSpecific:d.isGeoSpecific||!1,isGetParamSpecific:d.isGetParamSpecific||!1,lazyLoading:d.lazyLoading||{},isAcceptableAdsEnabled:!1,geoSpecificUrl:d.geoSpecificUrl,openRtbApiGetUserInfoUrl:d.openRtbApiGetUserInfoUrl,syncCookiesUrl:d.syncCookiesUrl,language:(r=navigator.language||navigator.userLanguage)?r.slice(0,2).toLowerCase():"no",browser:n,os:i,device:l,umeUrl:d.umeUrl,umeCryptoUrl:d.umeCryptoUrl},h.variables.romConfig.wrapperConfig.browser=n,h.variables.romConfig.wrapperConfig.os=i,h.variables.romConfig.wrapperConfig.device=l,l={host:""},v.dispatcherModule.dispatch(g.MANAGER_EVENTS.NEED_DEFINE_HOST,{pageUrlVariableName:h.variables.romConfig.wrapperConfig.pageUrlVariableName,hostObject:l}),R(d,l=l.host),h.variables.romConfig.wrapperConfig.host=h.variables.romConfig.wrapperConfig.host||l,v.dispatcherModule.dispatch(g.MANAGER_EVENTS.NEED_SET_PAGE_URL,{pageUrlVariableName:h.variables.romConfig.wrapperConfig.pageUrlVariableName,romConfig:h.variables.romConfig}),b.placementModule.run(),E.romLogger.log("Rom Init",{setConfig:d,resultConfig:h.variables.romConfig}),m.errorLogger.simpleLog("Roxot manager init",{config:h.variables.romConfig}),h.variables.romConfig.dynamicUrlTemplate&&(t=h.variables.romConfig.dynamicUrlTemplate,r=l,r=t.replace("__HOST__",r),p.utils.loadScript(r)),[4,A.wrapperModule.run(h.variables.romConfig.wrapperConfig)];case 1:return e.sent(),E.romLogger.log("Load Roxot Wrapper globally."),C.deferAdModule.updateSiteOpenedCount(),[2]}var t,r})})}}},{"../../constants/constants":49,"../../constants/variables":51,"../../utils/utils":139,"./counterModule":82,"./deferAdModule":83,"./dispatcherModule":84,"./loggers/errorLoggerModule":93,"./loggers/profilerModule":95,"./loggers/romLoggerModule":96,"./loggers/rowrLoggerModule":97,"./markers/placementMarkers":99,"./placementModule":103,"./placementSettingsModule":104,"./repositories/adConfigRepository":105,"./repositories/placementConfigRepository":106,"./wrapperModule":117,"ua-parser-js":32}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.placementMarkers=void 0;var n=e("../../../constants/constants"),i=e("../dispatcherModule"),a=e("../loggers/errorLoggerModule"),s=e("../timerManagerModule"),o=e("../formatWaterfallModule"),l=e("../../../utils/adConfigUtils"),d=e("../../../utils/placementConfigUtils"),u=e("../repositories/placementConfigRepository"),c=e("../loggers/rowrLoggerModule"),f=e("../../../constants/variables"),g=e("../placementModule");r.placementMarkers={markAsNeedRefresh:function(e){if(c.rowrLogger.debug(n.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Placement ready",null,{placementConfig:e}),e.status!==n.PLACEMENT_CONFIG_STATUSES.STOPPED)if((t=(t=e).status===n.PLACEMENT_CONFIG_STATUSES.INIT)&&f.variables.wrapperConfig.enableAdFirstLoadInHiddenTab||(!t&&f.variables.wrapperConfig.enableAdRefreshInHiddenTab||f.variables.wrapperConfig.pageStatus===n.PAGE_STATUSES.ACTIVE_TAB)){var t;if(!document.querySelector('[data-roxot-placement-id="'+e.roxotPlacementId+'"]'))return a.errorLogger.log(e.placementTitle,"Placement div-element was deleted. Stop format waterfall",{placementConfig:e}),c.rowrLogger.debug(n.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Placement div-element was deleted. Stop format waterfall",null,{placementConfig:e}),void u.placementConfigRepository.delete(e.roxotPlacementId);e.status=n.PLACEMENT_CONFIG_STATUSES.READY,i.dispatcherModule.dispatch(n.MANAGER_EVENTS.PLACEMENT_READY,{placementConfig:e}),a.errorLogger.log(e.placementTitle,"Start format waterfall.",{placementConfig:e}),o.formatWaterfallModule.resetFormatWaterfall(e),o.formatWaterfallModule.requestFormatAds(e)}else c.rowrLogger.debug(n.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Page status is "+f.variables.wrapperConfig.pageStatus+". Stop format waterfall",null,{placementConfig:e});else c.rowrLogger.debug(n.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Placement status is "+e.status+". Stop format waterfall",null,{placementConfig:e})},markAsRequested:function(e,t){e.status=n.PLACEMENT_CONFIG_STATUSES.REQUESTED,a.errorLogger.log("Wrapper","Placement have been requested.",{placementConfig:e}),i.dispatcherModule.dispatch(n.MANAGER_EVENTS.PLACEMENT_REQUEST,{placementConfig:e,eventAdData:t})},markAsRendered:function(e,t){e.status=n.PLACEMENT_CONFIG_STATUSES.RENDERED,a.errorLogger.log("Wrapper","Placement have been rendered.",{placementConfig:e}),i.dispatcherModule.dispatch(n.MANAGER_EVENTS.PLACEMENT_RENDER,{placementConfig:e,eventAdData:t})},markAsVisible:function(e,t){i.dispatcherModule.dispatch(n.MANAGER_EVENTS.PLACEMENT_VISIBLE,{placementConfig:e,eventAdData:t})},markAsNoServer:function(e){var t=this;e.status=n.PLACEMENT_CONFIG_STATUSES.NO_AD;var r=1e3*g.placementModule.getNoServerTimeoutLimit(e),o="noAd_"+e.placementId;s.timerManagerModule.replaceTimeout(o,function(){t.markAsNeedRefresh(e)},r,["placement-"+e.placementId]),a.errorLogger.error("Manager","None of the servers responded with ads",{placementConfig:e});r=d.placementConfigUtils.findLastAdConfig(e);r||a.errorLogger.warning("PlacementMarkers.markAsNoServer",'Last ad config not found. Sent "placement no ad" event without adConfig.',{placementConfig:e}),i.dispatcherModule.dispatch(n.MANAGER_EVENTS.PLACEMENT_NO_AD,{placementConfig:e,eventAdData:l.adConfigUtils.buildEventAdDataForPlacement(r)})}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adConfigUtils":134,"../../../utils/placementConfigUtils":138,"../dispatcherModule":84,"../formatWaterfallModule":91,"../loggers/errorLoggerModule":93,"../loggers/rowrLoggerModule":97,"../placementModule":103,"../repositories/placementConfigRepository":106,"../timerManagerModule":113}],100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waterfallMarkers=void 0;var o=e("../dispatcherModule"),n=e("../../../constants/constants"),i=e("../timerManagerModule"),a=e("../../../utils/adConfigUtils"),s=e("../waterfallModule"),l=e("./wrapperMarkers"),d=e("../adservers/adServerUtil"),u=e("../../../utils/adBlockBuilder"),c=e("../multiAdSliderModule"),f=e("../../../utils/adDisplayStatusUpdater");r.waterfallMarkers={markAsRequested:function(e){o.dispatcherModule.dispatch(n.WRAPPER_EVENTS.WATERFALL_LEVEL.REQUEST,a.adConfigUtils.buildWrapperExtendedEventData(e))},markAsEmpty:function(e){o.dispatcherModule.dispatch(n.WRAPPER_EVENTS.WATERFALL_LEVEL.EMPTY_AD,a.adConfigUtils.buildWrapperEventData(e)),f.adDisplayStatusUpdater.markAdAsNotDisplayed(e),s.waterfallModule.requestAd(e)},markAsTimeout:function(e){o.dispatcherModule.dispatch(n.WRAPPER_EVENTS.WATERFALL_LEVEL.TIMEOUT,a.adConfigUtils.buildWrapperEventData(e))},markAsRendered:function(e){o.dispatcherModule.dispatch(n.WRAPPER_EVENTS.WATERFALL_LEVEL.RENDER,a.adConfigUtils.buildWrapperEventData(e)),i.timerManagerModule.clearTimerIfExists(i.timerManagerModule.buildRequestTimeoutTimerKey(e)),l.wrapperMarkers.markAsRendered(e)},markAsVisible:function(e){var t,r=c.multiAdSliderModule.runAnimationIfNeed(e);r=r,t=e,i.timerManagerModule.replaceTimeout("adsTransitionTimeout-"+t.adId,function(){d.adServerUtil.destroyPreviousAds(t),u.adBlockBuilder.setPositionToCurrentSspAdContentBlock(t)},1e3*r,["ad-"+t.adId]),o.dispatcherModule.dispatch(n.WRAPPER_EVENTS.WATERFALL_LEVEL.VISIBLE,a.adConfigUtils.buildWrapperEventData(e)),l.wrapperMarkers.markAsVisible(e),f.adDisplayStatusUpdater.markAdAsDisplayed(e),c.multiAdSliderModule.setNextSspTimerIfNeed(e)}}},{"../../../constants/constants":49,"../../../utils/adBlockBuilder":133,"../../../utils/adConfigUtils":134,"../../../utils/adDisplayStatusUpdater":135,"../adservers/adServerUtil":73,"../dispatcherModule":84,"../multiAdSliderModule":102,"../timerManagerModule":113,"../waterfallModule":115,"./wrapperMarkers":101}],101:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapperMarkers=void 0;var o=e("../../../constants/constants"),n=e("../dispatcherModule"),i=e("../loggers/errorLoggerModule"),a=e("../../../utils/adConfigUtils"),s=e("../waterfallModule"),l=e("../../../utils/wrapperUtils");r.wrapperMarkers={markAsNeedRefresh:function(e){l.wrapperUtils.getRoxotAdBlock(document,e)?(e.adStatus=o.AD_STATUSES.READY,n.dispatcherModule.dispatch(o.WRAPPER_EVENTS.AD_LEVEL.READY,a.adConfigUtils.buildWrapperEventData(e)),s.waterfallModule.refreshAd(e)):a.adConfigUtils.deleteNotExistsAdTag(e)},markAsRendered:function(e){e.adStatus=o.AD_STATUSES.RENDERED,i.errorLogger.log("Wrapper","AdTag have been rendered.",e),n.dispatcherModule.dispatch(o.WRAPPER_EVENTS.AD_LEVEL.RENDER,a.adConfigUtils.buildWrapperEventData(e))},markAsVisible:function(e){e=a.adConfigUtils.buildWrapperEventData(e);i.errorLogger.log("Wrapper","AdTag visible.",e),n.dispatcherModule.dispatch(o.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,e)},markAsNoServer:function(e){e.adStatus=o.AD_STATUSES.NO_SERVER,i.errorLogger.error("Wrapper","None of the servers responded with ads",{adConfig:e}),n.dispatcherModule.dispatch(o.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,a.adConfigUtils.buildWrapperExtendedEventData(e))}}},{"../../../constants/constants":49,"../../../utils/adConfigUtils":134,"../../../utils/wrapperUtils":141,"../dispatcherModule":84,"../loggers/errorLoggerModule":93,"../waterfallModule":115}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.multiAdSliderModule=void 0;var l=e("../../utils/wrapperUtils"),d=e("../../utils/adBlockBuilder"),u=e("../../constants/limits"),i=e("./timerManagerModule"),a=e("./loggers/romLoggerModule"),s=e("./waterfallModule");function c(e){return"multi-ad-slider"===e.details.formatType||!(null===(e=e.options.multiAdSlider)||void 0===e||!e.enabled)}r.multiAdSliderModule={runAnimationIfNeed:function(e){if(!c(e))return 0;var t=l.wrapperUtils.getRoxotAdBlock(document,e);if(!t)return 0;var r=d.adBlockBuilder.getRoxotAdContentBlock(e);if(!r)return 0;var o=d.adBlockBuilder.getRoxotAdContentBlockPrevious(e);if(!o)return 0;var n,i,a,s,e=(null===(e=e.options.multiAdSlider)||void 0===e?void 0:e.transitionSeconds)||u.MULTI_AD_SLIDER_DEFAULT_TRANSITION_SECONDS;return i=o,a=t,s="all "+e+"s",(n=r).style.left=a.offsetWidth.toString()+"px",setTimeout(function(){i&&(i.style.transition=s,i.style.left="-"+a.offsetWidth+"px"),n.style.transition=s,n.style.left="0px"},0),e},requestNextAdIfNeed:function(e){return!!c(e)&&(!!e.waterfallConfig.sspsStack.length&&(s.waterfallModule.requestAd(e),!0))},setNextSspTimerIfNeed:function(e){if(!c(e))return!1;if(!e.waterfallConfig.sspsStack.length)return!1;var t,r,o,n=(null===(n=e.options.multiAdSlider)||void 0===n?void 0:n.nextSspTimeoutSeconds)||u.MULTI_AD_SLIDER_DEFAULT_NEXT_SSP_TIMEOUT_SECONDS;return r=n,o="nextSspTimeout-"+(t=e).adId,i.timerManagerModule.replaceInterval(o,function(){t.waterfallConfig.currentVisibleSeconds>r&&(i.timerManagerModule.clearTimerIfExists(o),s.waterfallModule.requestAd(t))},1e3,["ad-"+t.adId]),a.romLogger.log('Format "'+t.details.formatTitle+'" : Set multi-ad-slider next ad timeout for '+r+" seconds.",{multiAdSliderRefreshTimeSeconds:r,adConfig:t}),!0}}},{"../../constants/limits":50,"../../utils/adBlockBuilder":133,"../../utils/wrapperUtils":141,"./loggers/romLoggerModule":96,"./timerManagerModule":113,"./waterfallModule":115}],103:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.placementModule=void 0;var s=e("../../constants/constants"),o=e("./loggers/errorLoggerModule"),l=e("./repositories/placementConfigRepository"),n=e("./timerManagerModule"),d=e("./repositories/adConfigRepository"),u=e("./markers/placementMarkers"),r=e("./dispatcherModule"),i=e("./formatWaterfallModule"),c=e("../../constants/limits"),f=e("../../utils/utils"),g=e("./loggers/rowrLoggerModule"),p=e("../../utils/adConfigUtils"),m=e("../../utils/adDisplayStatusUpdater");function E(e,t,r,o){var n=function(e){for(var t="",r="",o=0,n=e;o<n.length;o++){var i=n[o];if(i.formatTags.length){t=i.formatTags[0].adConfig.details.placementId,r=i.formatTags[0].adConfig.details.placement;break}}return{placementId:t,placementTitle:r}}(t);return{roxotPlacementId:e,placementDiv:r,placementId:n.placementId,placementTitle:n.placementTitle,status:s.PLACEMENT_CONFIG_STATUSES.INIT,casesConfig:o,formats:function(e){for(var t=[],r=0,o=e;r<o.length;r++){for(var n=o[r],n=Object.assign({},n),i=0,a=n.formatTags;i<a.length;i++)a[i].adUnitId=f.utils.generateId(s.ROXOT_ID_PREFIXES.ROXOT_AD);t.push(n)}return t}(t),isNeedRefreshVideoAd:!1,isReadyToHardRefreshVideoAd:!1,formatWaterfall:{formatsStack:[],currentFormat:null,currentAdUnitsIds:{},currentAdHaveSeenByUser:!1},counters:{tagsRequestedCount:0,tagsRenderedCount:0,tagsVisibleCount:0,tagsNoAdCount:0},lastAdConfig:null}}function h(){for(var e=0,t=l.placementConfigRepository.getAll();e<t.length;e++){var r=t[e];if(r.isNeedRefreshVideoAd){u.placementMarkers.markAsNeedRefresh(r);break}if([s.PLACEMENT_CONFIG_STATUSES.READY,s.PLACEMENT_CONFIG_STATUSES.RENDERED].includes(r.status)){var o,n=a.placementModule.getRefreshTimeSecondsLimit(r);for(o in r.formatWaterfall.currentAdUnitsIds)if(r.formatWaterfall.currentAdUnitsIds.hasOwnProperty(o)){var i=d.adConfigRepository.find(o);if(i)if(m.adDisplayStatusUpdater.isAnyAdWasDisplayed(i))if(i.visibleSeconds){if(!(i.visibleSeconds<n)){g.rowrLogger.debug(s.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Ad visible more then "+n+" sec. Mark placement as need refresh...",null,{adConfig:i}),u.placementMarkers.markAsNeedRefresh(r);break}g.rowrLogger.debug(s.LOGGER_COMPONENTS.PLACEMENT_REFRESH,"adConfig.visibleSeconds < refreshTimeSecondsLimit",null,{adConfig:i,visibleSeconds:i.visibleSeconds,refreshTimeSecondsLimit:n,placementConfig:r,allAdConfigs:d.adConfigRepository.getAll()})}else g.rowrLogger.debug(s.LOGGER_COMPONENTS.PLACEMENT_REFRESH,"!adConfig.visibleSeconds",null,{adConfig:i,visibleSeconds:i.visibleSeconds,placementConfig:r,allAdConfigs:d.adConfigRepository.getAll()});else g.rowrLogger.debug(s.LOGGER_COMPONENTS.PLACEMENT_REFRESH,"!adDisplayStatusUpdater.isAnyAdWasDisplayed(adConfig)",null,{adConfig:i,adStatus:i.adStatus,placementConfig:r,allAdConfigs:d.adConfigRepository.getAll()});else g.rowrLogger.debug(s.LOGGER_COMPONENTS.PLACEMENT_REFRESH,"No adConfig.",null,{placementConfig:r,allAdConfigs:d.adConfigRepository.getAll()})}}}}function v(e){var t=e.eventAdData,e=t.details.roxotPlacementId,e=l.placementConfigRepository.get(e);e.counters.tagsRequestedCount+=1,1===e.counters.tagsRequestedCount&&u.placementMarkers.markAsRequested(e,t)}function S(e){var t=e.eventAdData,e=t.details.roxotPlacementId,e=l.placementConfigRepository.get(e);e.counters.tagsRenderedCount+=1,1===e.counters.tagsRenderedCount&&u.placementMarkers.markAsRendered(e,t)}function b(e){var t=e.eventAdData,e=t.details.roxotPlacementId,e=l.placementConfigRepository.get(e);e.counters.tagsVisibleCount+=1,1===e.counters.tagsVisibleCount&&u.placementMarkers.markAsVisible(e,t)}function y(e){var t=e.eventAdData,e=t.details.roxotPlacementId,r=l.placementConfigRepository.get(e);r.counters.tagsNoAdCount+=1,r.counters.tagsNoAdCount===Object.keys(r.formatWaterfall.currentAdUnitsIds).length&&(g.rowrLogger.log(s.LOGGER_COMPONENTS.PLACEMENT_MODULE,'All current format ads returned "ad_no_server".',[r.placementTitle],{placementConfig:r,eventAdData:t}),o.errorLogger.log(r.placementTitle,'All current format ads returned "ad_no_server".',{placementConfig:r,eventAdData:t}),n.timerManagerModule.replaceTimeout("requestNextFormatAds_"+r.roxotPlacementId,function(){i.formatWaterfallModule.requestFormatAds(r,!0)},100,[r.roxotPlacementId]))}function O(e,t){var r,o,n,i=0;if(!Object.keys(t.formatWaterfall.currentAdUnitsIds).length)return(o=t.lastAdConfig)&&i<(n=p.adConfigUtils.getLimitValue(o,e))?n:i;for(r in t.formatWaterfall.currentAdUnitsIds)t.formatWaterfall.currentAdUnitsIds.hasOwnProperty(r)&&(o=d.adConfigRepository.find(r))&&i<(n=p.adConfigUtils.getLimitValue(o,e))&&(i=n);return i}a.placementModule={run:function(){r.dispatcherModule.on(s.WRAPPER_EVENTS.AD_LEVEL.REQUEST,v),r.dispatcherModule.on(s.WRAPPER_EVENTS.AD_LEVEL.RENDER,S),r.dispatcherModule.on(s.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,b),r.dispatcherModule.on(s.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,y),n.timerManagerModule.replaceInterval("checkNeedRefreshPlacement",h,1e3,["placement_module"])},buildConfig:E,resetPlacementCounters:function(e){e.counters.tagsNoAdCount=0,e.counters.tagsVisibleCount=0,e.counters.tagsRenderedCount=0,e.counters.tagsRequestedCount=0},resetPlacementTagsVisibleCounter:function(e){e.counters.tagsVisibleCount=0},getRefreshTimeSecondsLimit:function(e){e=O(c.REFRESH_TIME_SECONDS_LIMIT_NAME,e);return e||c.DEFAULT_LIMITS.all[c.REFRESH_TIME_SECONDS_LIMIT_NAME]},getNoServerTimeoutLimit:function(e){e=O(c.NO_SERVER_TIMEOUT_LIMIT_NAME,e);return e||c.DEFAULT_LIMITS.all[c.NO_SERVER_TIMEOUT_LIMIT_NAME]}}},{"../../constants/constants":49,"../../constants/limits":50,"../../utils/adConfigUtils":134,"../../utils/adDisplayStatusUpdater":135,"../../utils/utils":139,"./dispatcherModule":84,"./formatWaterfallModule":91,"./loggers/errorLoggerModule":93,"./loggers/rowrLoggerModule":97,"./markers/placementMarkers":99,"./repositories/adConfigRepository":105,"./repositories/placementConfigRepository":106,"./timerManagerModule":113}],104:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.placementSettingsModule=void 0;var i=e("../../constants/constants");r.placementSettingsModule={validateSettings:function(t,r){Object.keys(r).forEach(function(e){i.AVAILABLE_SETTINGS_KEYS.includes(e)||console.error('Unknown param "'+e+'" passed to settings. Check your settings keys.',{div:t,settings:r})})},extractPlacementSettingsFromFunction:function(e,t){var r=document.getElementById(e);if(r){var o=r.getAttribute(i.DATA_SETTINGS_FUNCTION_ATTRIBUTE_NAME);if(o){r=window[o]||!1;if(r){r=r(e,t);if("object"===n(r))return r;console.error("Data settings function must return an object.",{divId:e,placementId:t,settingsFunctionName:o,returnedValue:r})}else console.error('Data settings function with name "'+o+'" not found.',{divId:e,placementId:t})}}}}},{"../../constants/constants":49}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adConfigRepository=void 0;var o=e("../loggers/errorLoggerModule"),n={};r.adConfigRepository={add:function(e,t){if(!e){var r="ROM: can not add adConfig to repository.";throw o.errorLogger.error("AdConfigRepository",r,{adConfigs:n,id:e}),new Error(r)}n[e]=t},get:function(e){if(n[e])return n[e];var t='ROM: Ad config with id "'+e+'" not found in repository.';throw o.errorLogger.error("AdConfigRepository",t,{adConfigs:n,adUnitId:e}),new Error(t)},find:function(e){return null!==(e=n[e])&&void 0!==e?e:null},getAll:function(){return Object.values(n)},delete:function(e){delete n[e]}}},{"../loggers/errorLoggerModule":93}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.placementConfigRepository=void 0;var o=e("../loggers/errorLoggerModule"),n={};r.placementConfigRepository={add:function(e,t){n[e]=t},get:function(e){var t=n[e];if(t)return t;t='ROM: Placement config with id "'+e+'" not found in repository.';throw o.errorLogger.error("PlacementConfigRepository",t,{placementConfigs:n,roxotPlacementId:e}),new Error(t)},getAll:function(){return Object.values(n)},delete:function(e){delete n[e]}}},{"../loggers/errorLoggerModule":93}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sspRepository=void 0;var o={};r.sspRepository={add:function(e,t){o[e]=t},get:function(e){return o[e]||null},getAll:function(){return Object.values(o)}}},{}],108:[function(e,t,r){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.roxotAdPixelModule=void 0;var i=e("./loggers/errorLoggerModule"),n=o(e("axios"));function a(e){for(var t=0,r=e;t<r.length;t++)!function(t){n.default.get(t,{withCredentials:!0}).then(function(e){i.errorLogger.log("RoxotAdPixelModule","Finish request to pixel. Status: "+e.status,{url:t,r:e})})}(r[t])}r.roxotAdPixelModule={runIfNeed:function(e){if(e.enabled){a(e.urls||[]);for(var t=0,r=e.pixels;t<r.length;t++){var o=r[t],n=o.urlIncludes;n&&("*"===n&&a(o.pixelsUrls),window.location.href.includes(n)&&a(o.pixelsUrls))}i.errorLogger.log("RoxotAdPixelModule","Pixels requests sent.",{roxotAdPixelConfig:e})}}}},{"./loggers/errorLoggerModule":93,axios:1}],109:[function(e,t,r){"use strict";var o=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},n=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.roxotHostModule=void 0;var i=e("../../constants/constants"),a=e("../optional/managerConfigSetters/defineHostUtils"),s=e("./dispatcherModule"),l=e("../../constants/variables"),d=e("./loggers/romLoggerModule");function u(t){return o(this,void 0,void 0,function(){return n(this,function(e){return l.variables.romConfig.wrapperConfig.addRoxotHostToKv&&(t.settings.customKeyValues=t.settings.customKeyValues||{},t.settings.customKeyValues[i.ROXOT_HOST]=a.defineHostUtils.normalizeUrl(window.location.host),d.romLogger.log('RoxotHostModule : Placement "'+t.publisherDivId+'" : Added current host to placement settings',{divId:t.publisherDivId,placementId:t.placementId,placementSettings:t.settings})),[2]})})}r.roxotHostModule={init:function(){s.dispatcherModule.on(i.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,u,void 0,0)},addRoxotHostToKeyValuesListIfNeed:function(e){l.variables.romConfig.wrapperConfig.addRoxotHostToKv&&(e[i.ROXOT_HOST]||(e[i.ROXOT_HOST]=a.defineHostUtils.normalizeUrl(window.location.host)))}}},{"../../constants/constants":49,"../../constants/variables":51,"../optional/managerConfigSetters/defineHostUtils":123,"./dispatcherModule":84,"./loggers/romLoggerModule":96}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.roxotYaMetricModule=void 0;var o=e("./loggers/errorLoggerModule");function n(){var e=document.createElement("script");e.text='(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");',document.head.appendChild(e)}r.roxotYaMetricModule={runRoxotYaMetricModule:function(e){e.enabled&&(window.top.ym||n(),window.top.ym(e.counterId,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0}),o.errorLogger.log("RoxotYaMetricModule","RoxotYaMetric counter inited.",{roxotYaMetricConfig:e}))},runMsYaMetricModule:function(e){e.enabled&&(window.top.ym||n(),window.top.ym(e.counterId,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0}),o.errorLogger.log("RoxotYaMetricModule","MsYaMetric counter inited.",{msYaMetric:e}))}}},{"./loggers/errorLoggerModule":93}],111:[function(e,t,r){"use strict";var o=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},n=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var i=e("../../constants/variables"),a=e("./loggers/romLoggerModule"),s=e("./loggers/errorLoggerModule"),l=e("./loggers/rowrLoggerModule"),d=e("./loggers/profilerModule"),u=e("../../constants/constants"),c=e("./managerModule"),f=e("./wrapperModule"),r=e("./adTagDispatcherModule"),e=e("./roxotHostModule");s.errorLogger.init(),a.romLogger.init(),l.rowrLogger.init(),d.profilerLogger.init(),r.adTagDispatcherModule.init(),e.roxotHostModule.init(),c.managerModule.init(),f.wrapperModule.init(),function(){o(this,void 0,void 0,function(){var t,r;return n(this,function(e){switch(e.label){case 0:i.variables.rom.icmd.push=function(t){return void 0===t&&(t={}),o(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,c.managerModule.run(t)];case 1:return e.sent(),[2]}})})},t=0,r=i.variables.rom.icmd,e.label=1;case 1:return t<r.length?(r=r[t],[4,i.variables.rom.icmd.push(r)]):[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return i.variables.rom.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){a.romLogger.error("Error processing command",e),s.errorLogger.error("Manager","Error processing command",e)}else a.romLogger.error("Commands written into rom.cmd must be wrapped in a function"),s.errorLogger.error("Manager","Commands written into rom.cmd must be wrapped in a function")},i.variables.rom.cmd.forEach(function(e){return i.variables.rom.cmd.push(e)}),i.variables.rowr.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){l.rowrLogger.error(u.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Error processing command: "+e.message+".",null,e),s.errorLogger.error(u.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Error processing command: "+e.message+".",e)}else l.rowrLogger.error(u.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Commands written into rowr.cmd must be wrapped in a function."),s.errorLogger.error(u.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Commands written into rowr.cmd must be wrapped in a function.")},i.variables.rowr.cmd.forEach(function(e){return i.variables.rowr.cmd.push(e)}),[2]}})})}()},{"../../constants/constants":49,"../../constants/variables":51,"./adTagDispatcherModule":52,"./loggers/errorLoggerModule":93,"./loggers/profilerModule":95,"./loggers/romLoggerModule":96,"./loggers/rowrLoggerModule":97,"./managerModule":98,"./roxotHostModule":109,"./wrapperModule":117}],112:[function(e,t,r){"use strict";var o=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},n=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.themesManagerModule=void 0;var a=i(e("axios")),s=e("../optional/managerConfigSetters/defineHostUtils"),l=e("../../constants/variables"),d=e("./loggers/rowrLoggerModule"),u=e("../../constants/constants"),c=e("./adservers/openRtb/userIdManager"),f="Themes Manager";r.themesManagerModule={sendThemesRequest:function(){return o(this,void 0,void 0,function(){var t,r;return n(this,function(e){switch(e.label){case 0:if(!l.variables.wrapperConfig.syncThemes.enabled)return[2];t=s.defineHostUtils.normalizeUrl(window.location.href),t={url:t,m:l.variables.wrapperConfig.syncThemes.method,uid:c.userIdManager.getUserId()},d.rowrLogger.debug(u.LOGGER_COMPONENTS.THEMES_MANAGER_COMPONENT,"Feature enabled, sending request.",f,{url:t.url,method:t.m,uid:t.uid}),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a.default.post("https://rpc.skcrtxr.com/rt",t,{headers:{"Content-Type":"application/json"}})];case 2:return(r=e.sent(),200!=(t=r.status)&&204!=t)?(d.rowrLogger.error(u.LOGGER_COMPONENTS.THEMES_MANAGER_COMPONENT,"Wrong response status.",f,{response:r}),[2]):(d.rowrLogger.debug(u.LOGGER_COMPONENTS.THEMES_MANAGER_COMPONENT,"Request passed.",f,{response:r}),[3,4]);case 3:return r=e.sent(),d.rowrLogger.error(u.LOGGER_COMPONENTS.THEMES_MANAGER_COMPONENT,"Error during request.",f,{e:r}),[3,4];case 4:return[2]}})})}}},{"../../constants/constants":49,"../../constants/variables":51,"../optional/managerConfigSetters/defineHostUtils":123,"./adservers/openRtb/userIdManager":74,"./loggers/rowrLoggerModule":97,axios:1}],113:[function(e,t,l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.timerManagerModule=void 0;var d=e("./loggers/rowrLoggerModule"),u=e("./loggers/errorLoggerModule"),c=e("../../constants/constants"),f={TIMEOUT_TIMER_TYPE:"timeout",INTERVAL_TIMER_TYPE:"interval"};function n(t,r,o,n,e){if(l.timerManagerModule.hasTimer(r)){var i='Timer with id "'+r+'" already exists.';throw d.rowrLogger.error(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,i),u.errorLogger.error(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,i),i}function a(e){d.rowrLogger.debug(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,"Run timer: "+r+".","timerRun_"+s.type,{timer:s}),t===f.TIMEOUT_TIMER_TYPE&&g(r),o.call(null),e()}var s={id:r,type:t,tags:e||[],time:n,promise:null,handle:null};return s.promise=new Promise(function(e){s.handle=(t===f.TIMEOUT_TIMER_TYPE?setTimeout:setInterval)(a,n,e)}),l.timerManagerModule.timeouts[r]=s,d.rowrLogger.debug(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,"Set timer: "+r+".","timerSet",{timer:s}),s}function i(e){var t=function(e){if(l.timerManagerModule.hasTimer(e))return l.timerManagerModule.timeouts[e];e='Timer with id "'+e+'" not exists.';throw d.rowrLogger.error(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,e),u.errorLogger.error(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,e),e}(e);(t.type===f.TIMEOUT_TIMER_TYPE?clearTimeout:clearInterval)(t.handle),g(e),d.rowrLogger.debug(c.LOGGER_COMPONENTS.TIMER_MANAGER_COMPONENT,"Clear timer: "+e+".","timerClear",{timer:t})}function g(e){delete l.timerManagerModule.timeouts[e]}l.timerManagerModule={timeouts:{},setTimeout:function(e,t,r,o){return n(f.TIMEOUT_TIMER_TYPE,e,t,r,o)},clearTimerIfExists:function(e){this.hasTimer(e)&&i(e)},replaceTimeout:function(e,t,r,o){this.hasTimer(e)&&i(e),this.setTimeout(e,t,r,o)},replaceInterval:function(e,t,r,o){this.hasTimer(e)&&i(e),e=e,t=t,r=r,o=o,n(f.INTERVAL_TIMER_TYPE,e,t,r,o)},hasTimer:function(e){return this.timeouts.hasOwnProperty(e)},getAll:function(){return Object.values(this.timeouts)},clearByTag:function(e){var t;t=e,l.timerManagerModule.getAll().filter(function(e){return e.tags.includes(t)}).forEach(function(e){return i(e.id)})},buildRequestTimeoutTimerKey:function(e){return"requestTimeoutAd-"+e.adId}}},{"../../constants/constants":49,"./loggers/errorLoggerModule":93,"./loggers/rowrLoggerModule":97}],114:[function(e,t,r){"use strict";var o=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},i=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.userMetaManager=void 0;var a=e("../../constants/variables"),s=n(e("axios")),l=e("./loggers/romLoggerModule");function d(e){var t=document.createElement("iframe");t.classList.add("rse-ume"),t.style.border="0",t.style.margin="0",t.style.padding="0",t.style.width="1px",t.style.height="1px",t.style.display="inline-block",t.style.verticalAlign="top",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.overflow="hidden",t.setAttribute("scrolling","no"),t.setAttribute("seamless","seamless"),document.body.appendChild(t);var r=t.contentDocument||(null===(t=t.contentWindow)||void 0===t?void 0:t.document);setTimeout(function(){r.open(),r.write(e),r.close()})}function u(r){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,s.default.get(r,{withCredentials:!0})];case 1:return 204!==e.sent().status?[2]:[3,3];case 2:return t=e.sent(),l.romLogger.error("Cannot set dev cookie.",{userMetaUrl:r,e:t}),[2];case 3:return[2]}})})}r.userMetaManager={run:function(){var n;return o(this,void 0,void 0,function(){var t,r,o;return i(this,function(e){switch(e.label){case 0:if(null===(n=null===(n=a.variables.wrapperConfig)||void 0===n?void 0:n.uMeta)||void 0===n||!n.enabled)return[2];t=a.variables.romConfig.umeUrl,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,s.default.get(t,{withCredentials:!0})];case 2:return 204!==e.sent().status?l.romLogger.log("Successfully get user meta",{userMetaUrl:t}):(l.romLogger.log("Try to define user soc dem meta."),setTimeout(function(){return d('\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <script>window.yaContextCb = window.yaContextCb || []<\/script>\n            <script src="https://yandex.ru/ads/system/context.js" async><\/script>\n\n            <div id="adfox_169996193983747637"></div>\n            <script>\n    window.yaContextCb.push(()=>{\n        Ya.adfoxCode.create({\n            ownerId: 365599,\n            containerId: \'adfox_169996193983747637\',\n            params: {\n                p1: \'dacgk\',\n                p2: \'gzib\'\n            }\n        })\n    })\n            <\/script>\n        </body>\n        </html>\n    ')},100),setTimeout(function(){return d('\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <script>window.yaContextCb = window.yaContextCb || []<\/script>\n            <script src="https://yandex.ru/ads/system/context.js" async><\/script>\n\n            <div id="adfox_169996201684145521"></div>\n            <script>\n    window.yaContextCb.push(()=>{\n        Ya.adfoxCode.create({\n            ownerId: 365599,\n            containerId: \'adfox_169996201684145521\',\n            params: {\n                p1: \'dacgl\',\n                p2: \'gzib\'\n            }\n        })\n    })\n            <\/script>\n        </body>\n        </html>\n    ')},100),setTimeout(function(){return d('\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <script>window.yaContextCb = window.yaContextCb || []<\/script>\n            <script src="https://yandex.ru/ads/system/context.js" async><\/script>\n\n            <div id="adfox_169996196431413345"></div>\n            <script>\n    window.yaContextCb.push(()=>{\n        Ya.adfoxCode.create({\n            ownerId: 365599,\n            containerId: \'adfox_169996196431413345\',\n            params: {\n                p1: \'dacgm\',\n                p2: \'gzib\'\n            }\n        })\n    })\n            <\/script>\n        </body>\n        </html>\n    ')},100),a.variables.romConfig.umeUrl.includes("http://127.0.0.1:8099")&&(setTimeout(function(){return u("http://127.0.0.1:8099/imp?c=2733507")},100),setTimeout(function(){return u("http://127.0.0.1:8099/imp?c=2733524")},200),setTimeout(function(){return u("http://127.0.0.1:8099/imp?c=2733529")},300))),[3,4];case 3:return o=e.sent(),l.romLogger.error("Cannot get user meta.",{userMetaUrl:t,e:o}),[2];case 4:r=a.variables.romConfig.umeCryptoUrl,e.label=5;case 5:return e.trys.push([5,7,,8]),[4,s.default.get(r,{withCredentials:!0})];case 6:return 204!==e.sent().status?(l.romLogger.log("Successfully get user meta",{userMetaUrl:r}),[2]):(l.romLogger.log("Try to define user crypto meta."),d('\n    <!DOCTYPE html>\n        <html style="display: table;">\n        <head></head>\n        <body style="margin: 0;">\n            <script>window.yaContextCb = window.yaContextCb || []<\/script>\n            <script src="https://yandex.ru/ads/system/context.js" async><\/script>\n            <div id="adfox_169765545306566391"></div>\n            <script>\n                window.yaContextCb.push(()=>{\n                    Ya.adfoxCode.create({\n                        ownerId: 365599,\n                        containerId: \'adfox_169765545306566391\',\n                        params: {\n                            p1: \'czthm\',\n                            p2: \'gzib\'\n                        }\n                    })\n                })\n            <\/script>\n        </body>\n        </html>\n    '),a.variables.romConfig.umeCryptoUrl.includes("http://127.0.0.1:8099")&&u("http://127.0.0.1:8099/imp?c=2690938"),[3,8]);case 7:return o=e.sent(),l.romLogger.error("Cannot get user meta.",{userMetaUrl:r,e:o}),[2];case 8:return[2]}})})}}},{"../../constants/variables":51,"./loggers/romLoggerModule":96,axios:1}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waterfallModule=void 0;var a=e("./repositories/sspRepository"),s=e("./timerManagerModule"),l=e("../../constants/constants"),d=e("./counterModule"),u=e("./loggers/rowrLoggerModule"),c=e("./loggers/errorLoggerModule"),f=e("./markers/wrapperMarkers"),g=e("../../constants/variables"),p=e("./markers/waterfallMarkers"),m=e("../../utils/adConfigUtils"),o=e("./dispatcherModule"),n=e("../../utils/waterfallUtils"),E=e("./adservers/adServerUtil"),h=e("../../utils/adDisplayStatusUpdater"),v=e("../../constants/limits");r.waterfallModule={requestAd:function(e){s.timerManagerModule.clearByTag("ad-"+e.adId),e.adStatus=l.AD_STATUSES.REQUESTED;var t=e.waterfallConfig,r=t.sspsStack||[];if(r.length){r=r.shift();if(r){t.currentSspConfig=r,t.currentVisibleSeconds=0,t.currentCpm=0,d.counterModule.incrementAdConfigCountValue(e,l.COUNTERS.REQUEST_COUNT),d.counterModule.incrementCounterValue(e,l.COUNTERS.REQUEST_COUNT),d.counterModule.incrementTagRequestCounterValue(e,E.adServerUtil.extractTagIdentifier(r)),t.currentRoxotAdContentId=E.adServerUtil.buildAdContentId(e,d.counterModule.getAdConfigCounterValue(e,l.COUNTERS.REQUEST_COUNT)),h.adDisplayStatusUpdater.markAdAsNotDisplayed(e);var o=r.name,n=a.sspRepository.get(g.variables.wrapperConfig.isStubAdServer?"stub":o);if(!n){var i=g.variables.wrapperConfig.isStubAdServer?"stub ("+o+")":o;return u.rowrLogger.error(l.LOGGER_COMPONENTS.WATERFALL_COMPONENT,'Ad server "'+i+'" not supported.'),c.errorLogger.error(l.LOGGER_COMPONENTS.WATERFALL_COMPONENT,'Ad server "'+i+'" not supported.'),void p.waterfallMarkers.markAsEmpty(e)}i=1e3*m.adConfigUtils.getLimitValue(e,v.REQUEST_TIMEOUT_LIMIT_NAME);s.timerManagerModule.replaceTimeout(s.timerManagerModule.buildRequestTimeoutTimerKey(e),function(){n.destroyAd(e,void 0),c.errorLogger.warning("Waterfall",'Ad server "'+o+'" not responded. Timed-out.',{adConfig:e}),p.waterfallMarkers.markAsTimeout(e),p.waterfallMarkers.markAsEmpty(e)},i,["ad-"+e.adId]),t.adType=n.getAdType(),p.waterfallMarkers.markAsRequested(e),n.refreshAd(e)}}else h.adDisplayStatusUpdater.isAnyAdWasDisplayed(e)||f.wrapperMarkers.markAsNoServer(e)},refreshAd:function(e){var t;g.variables.wrapperConfig.isDisableWrapper?u.rowrLogger.debug(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Stop refreshing ad because of wrapper is disabled.",null,{adConfig:e}):(t=null===(t=e).waterfallConfig.adType)&&g.variables.wrapperConfig.enableAdFirstLoadInHiddenTab||(!t&&g.variables.wrapperConfig.enableAdRefreshInHiddenTab||g.variables.wrapperConfig.pageStatus===l.PAGE_STATUSES.ACTIVE_TAB)?e.adHtmlBlockStatus===l.AD_HTML_BLOCK_STATUSES.ACTIVE?e.adStatus===l.AD_STATUSES.READY?(n.waterfallUtils.resetWaterfallConfig(e),E.adServerUtil.destroyAllAds(e),o.dispatcherModule.dispatch(l.WRAPPER_EVENTS.AD_LEVEL.REQUEST,m.adConfigUtils.buildWrapperEventData(e)),this.requestAd(e)):u.rowrLogger.debug(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Stop refreshing ad because of ad is not ready.",null,{adConfig:e}):u.rowrLogger.debug(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Stop refreshing ad because of placement has status: "+e.adHtmlBlockStatus+".",null,{adConfig:e}):u.rowrLogger.debug(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Stop refreshing ad because of page status is: "+g.variables.wrapperConfig.pageStatus+".",null,{adConfig:e})}}},{"../../constants/constants":49,"../../constants/limits":50,"../../constants/variables":51,"../../utils/adConfigUtils":134,"../../utils/adDisplayStatusUpdater":135,"../../utils/waterfallUtils":140,"./adservers/adServerUtil":73,"./counterModule":82,"./dispatcherModule":84,"./loggers/errorLoggerModule":93,"./loggers/rowrLoggerModule":97,"./markers/waterfallMarkers":100,"./markers/wrapperMarkers":101,"./repositories/sspRepository":107,"./timerManagerModule":113}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waterfallRequestsRecords=void 0;var o=e("./dispatcherModule"),i=e("../../constants/constants"),n=e("./loggers/rowrLoggerModule"),a={};function s(e){return e.alias||e.name}function l(e,t){var r=a[e];return r||(n.rowrLogger.warning(i.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No record for tagId "+e+".",null,{records:a,method:t}),null)}function d(e,t,r){return a[e]?a[e].ssps?a[e].ssps[t]||(n.rowrLogger.warning(i.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No "+t+" in records["+e+"]['ssps']",null,{records:a,record:a[e].ssps,method:r}),null):(n.rowrLogger.warning(i.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No ssps in records["+e+"].",null,{records:a,record:a[e],method:r}),null):(n.rowrLogger.warning(i.LOGGER_COMPONENTS.WATERFALL_COMPONENT,"No record for tagId "+e+".",null,{records:a,method:r}),null)}r.waterfallRequestsRecords={find:function(e){return null!==(e=a[e])&&void 0!==e?e:null},getAll:function(){return a}},o.dispatcherModule.on(i.WRAPPER_EVENTS.AD_LEVEL.REQUEST,function(e){e=e.eventAdData.details.tagId,a[e]={},(e=a[e]).start=Date.now(),e.id=Math.floor(1e8*Math.random())}),o.dispatcherModule.on(i.WRAPPER_EVENTS.WATERFALL_LEVEL.REQUEST,function(e){var t=l(e.eventAdData.details.tagId,"recordSspRequest");t&&(e=s(e.eventAdData.adServer),t.ssps=t.ssps||{},t.ssps[e]=t.ssps[e]||{},(t=t.ssps[e]).name=e,t.start=Date.now(),t.status=i.AD_STATUSES.REQUESTED)}),o.dispatcherModule.on(i.WRAPPER_EVENTS.AD_LEVEL.RENDER,function(e){var t=e.eventAdData.details.tagId,r=s(e.eventAdData.adServer),o=e.eventAdData.size,n=l(t,"markTagAsHasAd");!n||(e=d(t,r,"markTagAsHasAd"))&&(t=Date.now(),e.finish=t,e.size=o,e.status=i.AD_STATUSES.RENDERED,n.winner=r,n.size=o,n.finish=t)}),o.dispatcherModule.on(i.WRAPPER_EVENTS.WATERFALL_LEVEL.EMPTY_AD,function(e){var t=s(e.eventAdData.adServer),r=e.eventAdData.details.tagId,e=e.eventAdData.size;(t=d(r,t,"markSspAsNoAd"))&&(t.finish=Date.now(),t.status=i.AD_STATUSES.NO_SERVER,t.size=e)}),o.dispatcherModule.on(i.WRAPPER_EVENTS.WATERFALL_LEVEL.TIMEOUT,function(e){var t=s(e.eventAdData.adServer),r=e.eventAdData.details.tagId,e=e.eventAdData.size;(t=d(r,t,"markSspAsTimeout"))&&(t.finish=Date.now(),t.status=i.AD_STATUSES.TIMEOUT,t.size=e)}),o.dispatcherModule.on(i.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,function(e){(e=l(e.eventAdData.details.tagId,"markTagAsNoAd"))&&(e.finish=Date.now())})},{"../../constants/constants":49,"./dispatcherModule":84,"./loggers/rowrLoggerModule":97}],117:[function(e,t,r){"use strict";var o=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},n=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.wrapperModule=void 0;var l=e("../../constants/constants"),i=e("../../constants/constants"),s=e("../../constants/variables"),d=e("./loggers/errorLoggerModule"),u=e("./loggers/rowrLoggerModule"),a=e("./dispatcherModule"),c=e("./timerManagerModule"),f=e("./repositories/sspRepository"),g=e("../../utils/adConfigUtils"),p=e("./repositories/adConfigRepository"),m=e("../../utils/wrapperUtils"),E=e("./adservers/YandexAdServer"),h=e("./adservers/AdFoxAdServer"),v=e("./adservers/RoxotAdFoxAdServer"),S=e("./adservers/prebid/PrebidAdServer"),b=e("./adservers/prebid/GooglePrebidAmazonAdServer"),y=e("./adservers/GoogleAdServer"),O=e("./adservers/ThirdPartyAdServer"),C=e("./adservers/VideoNowAdServer"),A=e("./adservers/StubAdServer"),_=e("./adservers/prebid/GooglePrebidAdServer"),N=e("./counterModule"),M=e("./loggers/profilerModule"),T=e("./adservers/adServerUtil"),w=e("./adservers/VideoAdServers/RoxotOutStreamAdServer"),R=e("./adservers/VideoAdServers/RoxotInOutStreamAdServer"),P=e("./roxotYaMetricModule"),L=e("./adservers/RoxotAdServers/RoxotBackupAdServer"),I=e("./adservers/RoxotAdServers/RoxotAdServer"),x=e("../../constants/limits"),k=e("../../utils/utils"),G=e("./adservers/VideoAdServers/RoxotAdfoxVideoAdServer"),D=e("./adservers/RoxotYandexAdServer"),U=e("./adservers/VideoContentPlayerAdServer"),V=e("./adservers/RoxotOpenRtbAdServer"),F=e("./adservers/GoogleFullscreenAdServer"),j=e("./adservers/openRtb/userIdManager"),B=e("./adservers/YandexFullscreenAdServer"),q=e("./themesManagerModule"),W=e("./roxotAdPixelModule"),H=e("./userMetaManager");function Y(t,r){return o(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return[4,a.dispatcherModule.dispatchAsync(l.WRAPPER_EVENTS.CONFIG_LEVEL.BEFORE_AD_INIT,{adUnitId:t,adUnitConfig:r})];case 1:return e.sent(),function(e,t){(function(e){for(var t=e.adServersConfig||[],r="",o="",n=0,i=t;n<i.length;n++){var a,s=i[n];s.name===r?o=(r=(s.alias?s.alias===o&&(a="Same SSP conflict. Same alias #"+s.alias+" for ssp #"+s.name+" in placement #"+e.details.placement,d.errorLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,a),u.rowrLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,a,null,{adUnitConfig:e})):(a="Same SSP conflict. No alias for ssp #"+s.name+" in placement #"+e.details.placement,d.errorLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,a),u.rowrLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,a,null,{adUnitConfig:e})),s.name),s.alias):(r=s.name,o=s.alias)}})(t),function(e){for(var t=e.adServersConfig||[],r=0,o=t;r<o.length;r++){var n,i=o[r];i.options&&Array.isArray(i.options)&&i.options.length&&(n='Ad server options must be an object, array given (ssp "'+i.name+'"). All ad server options will be ignored',d.errorLogger.error(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,n,{adConfig:e,options:i.options}))}}(t);t=g.adConfigUtils.generate(e,t.adServersConfig,t.options,t.details);(function(e){var t=g.adConfigUtils.getLimitValue(e,x.REFRESH_TIME_SECONDS_LIMIT_NAME);t<x.REFRESH_TIME_SECONDS_MINIMAL_VALUE?d.errorLogger.error("Wrapper","RefreshTimeSeconds must be more than "+x.REFRESH_TIME_SECONDS_MINIMAL_VALUE+" sec.",{adConfig:e}):t<x.REFRESH_TIME_SECONDS_OPTIMAL_VALUE&&d.errorLogger.warning("Wrapper","RefreshTimeSeconds should be more than "+x.REFRESH_TIME_SECONDS_OPTIMAL_VALUE+" sec.",{adConfig:e})})(t),p.adConfigRepository.add(e,t),t.sspsConfigs.forEach(function(e){var t=f.sspRepository.get(e.name);t&&(t.isInited()||t.init(e))}),u.rowrLogger.debug(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Block init successfully.",t.adId,{adConfig:t}),m.wrapperUtils.refreshActiveAdBlock(document,t)}(t,r),a.dispatcherModule.dispatch(l.WRAPPER_EVENTS.CONFIG_LEVEL.AD_INIT,{adUnitId:t,adUnitConfig:r}),[2]}})})}r.wrapperModule={init:function(){f.sspRepository.add(l.SSP_NAMES.STUB,new A.StubAdServer),f.sspRepository.add(l.SSP_NAMES.GOOGLE,new y.GoogleAdServer),f.sspRepository.add(l.SSP_NAMES.GOOGLE_FULLSCREEN,new F.GoogleFullscreenAdServer),f.sspRepository.add(l.SSP_NAMES.YANDEX,new E.YandexAdServer),f.sspRepository.add(l.SSP_NAMES.YANDEX_FULLSCREEN,new B.YandexFullscreenAdServer),f.sspRepository.add(l.SSP_NAMES.AD_FOX,new h.AdFoxAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_AD_FOX,new v.RoxotAdFoxAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_YANDEX,new D.RoxotYandexAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_AD_FOX_VIDEO,new G.RoxotAdfoxVideoAdServer),f.sspRepository.add(l.SSP_NAMES.PREBID,new S.PrebidAdServer),f.sspRepository.add(l.SSP_NAMES.GOOGLE_PREBID,new _.GooglePrebidAdServer),f.sspRepository.add(l.SSP_NAMES.AMAZON_GOOGLE_PREBID,new b.GooglePrebidAmazonAdServer),f.sspRepository.add(l.SSP_NAMES.VIDEO_NOW,new C.VideoNowAdServer),f.sspRepository.add(l.SSP_NAMES.THIRD_PARTY,new O.ThirdPartyAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_OUT_STREAM,new w.RoxotOutStreamAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_IN_OUT_STREAM,new R.RoxotInOutStreamAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT,new I.RoxotAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_BACKUP,new L.RoxotBackupAdServer),f.sspRepository.add(l.SSP_NAMES.ROXOT_OPEN_RTB,new V.RoxotOpenRtbAdServer),f.sspRepository.add(l.SSP_NAMES.VIDEO_CONTENT_PLAYER,new U.VideoContentPlayerAdServer);var e=s.variables.rowr;e.setAdsConfig=function(e){d.errorLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"rowr.setAdsConfig - check usage"),function(e){for(var t in e)e.hasOwnProperty(t)&&Y(t,e[t])}(e)},e.setAdConfig=function(e,t){Y(e,t)},e.setKeyValue=function(e,t){s.variables.wrapperConfig.keyValues[e]=t},e.timers=function(){return d.errorLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"rowr.timers - check usage"),c.timerManagerModule.getAll()},e.counters=function(){return d.errorLogger.warning(l.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"rowr.counters - check usage"),N.counterModule.adServerCounters},e.version=function(){return i.VERSION}},run:function(t){return o(this,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return a.dispatcherModule.onAllWrapperEvents(function(e){u.rowrLogger.logEvent(e),M.profilerLogger.profile(e)}),k.utils.mergeConfigs(s.variables.wrapperConfig,t),[4,j.userIdManager.setUserId()];case 1:return e.sent(),[4,j.userIdManager.preSyncBiddersIds()];case 2:return e.sent(),H.userMetaManager.run(),q.themesManagerModule.sendThemesRequest(),a.dispatcherModule.dispatch(l.WRAPPER_EVENTS.REFRESH_LEVEL.CHECK_ACTIVE_TAB,{}),a.dispatcherModule.dispatch(l.WRAPPER_EVENTS.REFRESH_LEVEL.CHECK_NEED_REFRESH,{}),P.roxotYaMetricModule.runRoxotYaMetricModule(s.variables.wrapperConfig.roxotYaMetric),P.roxotYaMetricModule.runMsYaMetricModule(s.variables.wrapperConfig.msYaMetric),W.roxotAdPixelModule.runIfNeed(s.variables.wrapperConfig.roxotAdPixel),d.errorLogger.simpleLog("Roxot wrapper init.",{wrapperConfig:Object.assign({},s.variables.wrapperConfig)}),a.dispatcherModule.dispatch(l.WRAPPER_EVENTS.CONFIG_LEVEL.INIT,{wrapperConfig:s.variables.wrapperConfig}),[2]}})})},updateIframeSize:function(e,t,r){var o=e.getElementsByTagName("html")[0],n=o.offsetWidth||1,i=o.offsetHeight||1,a=this;c.timerManagerModule.replaceTimeout(T.adServerUtil.buildUpdateIframeSizeTimerId(l.IFRAME_TIMER_PREFIX,r),function(){a.updateIframeSize(e,t,r)},100,["SSP"]),s.variables.iframeCollection[r].width===n&&s.variables.iframeCollection[r].height===i||(o=t.getElementById(r))&&(s.variables.iframeCollection[r].width=n,s.variables.iframeCollection[r].height=i,o.style.width=n+"px",o.style.height=i+"px")}}},{"../../constants/constants":49,"../../constants/limits":50,"../../constants/variables":51,"../../utils/adConfigUtils":134,"../../utils/utils":139,"../../utils/wrapperUtils":141,"./adservers/AdFoxAdServer":54,"./adservers/GoogleAdServer":55,"./adservers/GoogleFullscreenAdServer":56,"./adservers/RoxotAdFoxAdServer":57,"./adservers/RoxotAdServers/RoxotAdServer":59,"./adservers/RoxotAdServers/RoxotBackupAdServer":60,"./adservers/RoxotOpenRtbAdServer":61,"./adservers/RoxotYandexAdServer":62,"./adservers/StubAdServer":63,"./adservers/ThirdPartyAdServer":64,"./adservers/VideoAdServers/RoxotAdfoxVideoAdServer":66,"./adservers/VideoAdServers/RoxotInOutStreamAdServer":67,"./adservers/VideoAdServers/RoxotOutStreamAdServer":68,"./adservers/VideoContentPlayerAdServer":69,"./adservers/VideoNowAdServer":70,"./adservers/YandexAdServer":71,"./adservers/YandexFullscreenAdServer":72,"./adservers/adServerUtil":73,"./adservers/openRtb/userIdManager":74,"./adservers/prebid/GooglePrebidAdServer":75,"./adservers/prebid/GooglePrebidAmazonAdServer":76,"./adservers/prebid/PrebidAdServer":77,"./counterModule":82,"./dispatcherModule":84,"./loggers/errorLoggerModule":93,"./loggers/profilerModule":95,"./loggers/rowrLoggerModule":97,"./repositories/adConfigRepository":105,"./repositories/sspRepository":107,"./roxotAdPixelModule":108,"./roxotYaMetricModule":110,"./themesManagerModule":112,"./timerManagerModule":113,"./userMetaManager":114}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p=e("../../constants/constants"),g=e("../core/loggers/errorLoggerModule"),m=e("../../constants/variables"),E=e("../core/dispatcherModule"),h=e("../core/loggers/rowrLoggerModule"),v=e("../core/timerManagerModule"),S=e("../core/repositories/adConfigRepository");var b=((e={isOnAdImpressionCallbackExecuted:{},isOnAdImpressionCallbackSubscribed:{}})[p.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG]=function(e){var t,r,o,n,i,a,s,l,d,u,c,f;n=e.div,d=e.config,r=e.settings,(o=r.onAdImpression||!1)&&("function"==typeof o?(i={div:n,settings:r,callback:o,managerConfig:m.variables.romConfig},g.errorLogger.log(n,t='Detected "onAdImpression" callback.',i),r.debug&&console.log(t,i),d.onAdImpressionCallback=o):console.error("Callback onAdImpression must be a function.",{div:n,settings:r})),i=e.div,d=e.config,o=e.settings,(n=o.onAdEmpty||!1)&&("function"==typeof n?(a={div:i,settings:o,callback:n,managerConfig:m.variables.romConfig},g.errorLogger.log(i,r='Detected "onAdEmpty" callback.',a),o.debug&&console.log(r,a),d.onAdEmptyCallback=n):console.error("Callback onAdEmpty must be a function.",{div:i,settings:o})),a=e.div,d=e.config,n=e.settings,(i=n.onVideoAdImpression||!1)&&("function"==typeof i?(s={div:a,settings:n,callback:i,managerConfig:m.variables.romConfig},g.errorLogger.log(a,o='Detected "onVideoAdImpression" callback.',s),n.debug&&console.log(o,s),d.onVideoAdImpressionCallback=i):console.error("Callback onVideoAdImpression must be a function.",{div:a,settings:n})),s=e.div,d=e.config,i=e.settings,(a=i.onVideoAdStarted||!1)&&("function"==typeof a?(c={div:s,settings:i,callback:a,managerConfig:m.variables.romConfig},g.errorLogger.log(s,n='Detected "onVideoAdStarted" callback.',c),i.debug&&console.log(n,c),d.onVideoAdStartedCallback=a):console.error("Callback onVideoAdStarted must be a function.",{div:s,settings:i})),c=e.div,d=e.config,a=e.settings,(s=a.onVideoAdVideoStarted||!1)&&("function"==typeof s?(u={div:c,settings:a,callback:s,managerConfig:m.variables.romConfig},g.errorLogger.log(c,i='Detected "onVideoAdVideoStarted" callback.',u),a.debug&&console.log(i,u),d.onVideoAdVideoStartedCallback=s):console.error("Callback onVideoAdVideoStarted must be a function.",{div:c,settings:a})),u=e.div,d=e.config,s=e.settings,(c=s.onVideoAdComplete||!1)&&("function"==typeof c?(f={div:u,settings:s,callback:c,managerConfig:m.variables.romConfig},g.errorLogger.log(u,a='Detected "onVideoAdComplete" callback.',f),s.debug&&console.log(a,f),d.onVideoAdCompleteCallback=c):console.error("Callback onVideoAdComplete must be a function.",{div:u,settings:s})),f=e.div,d=e.config,c=e.settings,(u=c.onVideoAdStopped||!1)&&("function"==typeof u?(l={div:f,settings:c,callback:u,managerConfig:m.variables.romConfig},g.errorLogger.log(f,s='Detected "onVideoAdStopped" callback.',l),c.debug&&console.log(s,l),d.onVideoAdStoppedCallback=u):console.error("Callback onVideoAdStopped must be a function.",{div:f,settings:c})),l=e.div,d=e.config,u=e.settings,(f=u.onVideoAdError||!1)&&("function"==typeof f?(c={div:l,settings:u,callback:f,managerConfig:m.variables.romConfig},g.errorLogger.log(l,e='Detected "onVideoAdError" callback.',c),u.debug&&console.log(e,c),d.onVideoAdErrorCallback=f):console.error("Callback onVideoAdError must be a function.",{div:l,settings:u}))},e[p.MANAGER_EVENTS.BEFORE_AD_BLOCK_DATA_PUSH]=function(e){var o,n,i,t,r,a,s,l,d,u,c,f=e.placementConfig,g=f.casesConfig;g.onAdImpressionCallback&&(o=f,n=e.adBlockDivId,i=o.casesConfig,b.isOnAdImpressionCallbackSubscribed[o.roxotPlacementId]?h.rowrLogger.debug("callbacksModule","Skip onAdImpression callback subscribe - callback already subscribed.",[o.placementTitle,n],{adBlockDivId:n,placementConfig:o}):E.dispatcherModule.on(p.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,function(e){var t,r;e.eventAdData.adId===n&&(b.isOnAdImpressionCallbackSubscribed[o.roxotPlacementId]=!0,(t=i.onAdImpressionCallback)&&(r=S.adConfigRepository.get(e.eventAdData.adId),b.isOnAdImpressionCallbackExecuted[o.roxotPlacementId]?h.rowrLogger.debug("callbacksModule","Skip onAdImpression callback call - callback already fired (once).",[o.placementTitle,r.adId],{adConfig:r,placementConfig:o}):(h.rowrLogger.debug("callbacksModule","(Re-)Set timer to execute onAdImpression callback.",[o.placementTitle,r.details.tagTitle],{adConfig:r,placementConfig:o,time:5e3}),v.timerManagerModule.replaceTimeout("onAdImpressionCallbackTimer-"+o.roxotPlacementId,function(){h.rowrLogger.debug("callbacksModule","Timer is up. Execute onAdImpression callback.",[o.placementTitle,r.details.tagTitle],{adConfig:r,placementConfig:o}),b.isOnAdImpressionCallbackExecuted[o.roxotPlacementId]=!0,t&&t()},5e3,[r.adId]))))})),g.onAdEmptyCallback&&(t=g,r=e.adBlockDivId,E.dispatcherModule.on(p.MANAGER_EVENTS.PLACEMENT_NO_AD,function(e){e.eventAdData.adId===r&&((e=e.placementConfig).status=p.PLACEMENT_CONFIG_STATUSES.STOPPED,(e=document.querySelector('[data-roxot-placement-id="'+e.roxotPlacementId+'"]'))&&(e.innerHTML=""),t.onAdEmptyCallback&&t.onAdEmptyCallback())})),g.onVideoAdStartedCallback&&(a=f,E.dispatcherModule.on(p.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_STARTED,function(e){var t;e.placementId!==a.placementId||(t=a.casesConfig).onVideoAdStartedCallback&&t.onVideoAdStartedCallback(JSON.stringify(e))})),g.onVideoAdVideoStartedCallback&&(s=f,E.dispatcherModule.on(p.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_VIDEO_STARTED,function(e){var t;e.placementId!==s.placementId||(t=s.casesConfig).onVideoAdVideoStartedCallback&&t.onVideoAdVideoStartedCallback(JSON.stringify(e))})),g.onVideoAdImpressionCallback&&(l=f,E.dispatcherModule.on(p.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_IMPRESSION,function(e){var t;e.placementId!==l.placementId||(t=l.casesConfig).onVideoAdImpressionCallback&&t.onVideoAdImpressionCallback(JSON.stringify(e))})),g.onVideoAdCompleteCallback&&(d=f,E.dispatcherModule.on(p.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_VIDEO_COMPLETE,function(e){var t;e.placementId!==d.placementId||(t=d.casesConfig).onVideoAdCompleteCallback&&t.onVideoAdCompleteCallback(JSON.stringify(e))})),g.onVideoAdStoppedCallback&&(u=f,E.dispatcherModule.on(p.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_STOPPED,function(e){var t;e.placementId!==u.placementId||(t=u.casesConfig).onVideoAdStoppedCallback&&t.onVideoAdStoppedCallback(JSON.stringify(e))})),g.onVideoAdErrorCallback&&(c=f,E.dispatcherModule.on(p.WRAPPER_EVENTS.VIDEO_EVENTS.RP_AD_ERROR,function(e){var t;e.placementId!==c.placementId||(t=c.casesConfig).onVideoAdErrorCallback&&t.onVideoAdErrorCallback(JSON.stringify(e))}))},e);E.dispatcherModule.on(p.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG,b[p.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG]),E.dispatcherModule.on(p.MANAGER_EVENTS.BEFORE_AD_BLOCK_DATA_PUSH,b[p.MANAGER_EVENTS.BEFORE_AD_BLOCK_DATA_PUSH])},{"../../constants/constants":49,"../../constants/variables":51,"../core/dispatcherModule":84,"../core/loggers/errorLoggerModule":93,"../core/loggers/rowrLoggerModule":97,"../core/repositories/adConfigRepository":105,"../core/timerManagerModule":113}],119:[function(e,t,r){"use strict";var n=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},i=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../core/loggers/rowrLoggerModule"),o=e("../core/loggers/errorLoggerModule"),r=e("../core/dispatcherModule"),s=e("../../constants/constants"),l=e("../../constants/variables"),d=e("../core/timerManagerModule"),u={init:!1,hasAccess:null};function c(e){e.wrapperConfig=e.wrapperConfig||{},e.wrapperConfig.cmp=e.wrapperConfig.cmp||{};var t=e.wrapperConfig.cmp.vendor||!1;t&&(u.init||("quantcast"!==(e=t)?(a.rowrLogger.error("CMP",'Cmp vendor "'+e+"' not supported."),o.errorLogger.error("CMP",'Cmp vendor "'+e+"' not supported.")):(t=window,(e=function(e){if(e.__cmp)return 1;if(e.__tcfapi)return 2;return 0}(t))||(a.rowrLogger.error(s.LOGGER_COMPONENTS.CMP_COMPONENT,"Not supported version","Quantcast"),o.errorLogger.error("CMP Quantcast","Not supported version")),function(e,t){try{2===t&&e.__tcfapi("addEventListener",2,function(){f(e,t)}),1===t&&(e.__cmp("getConsentData",1,function(){f(e,t)}),e.__cmp("setConsentUiCallback",function(){f(e,t)})),u.init=!0,a.rowrLogger.debug(s.LOGGER_COMPONENTS.CMP_COMPONENT,"Init successfully","Quantcast")}catch(e){a.rowrLogger.error(s.LOGGER_COMPONENTS.CMP_COMPONENT,"Init error","Quantcast",e),o.errorLogger.error("CMP Quantcast","Init error",e)}}(t,e))))}function f(e,t){2===t?e.__tcfapi("getTCData",2,function(e,t){t&&!!(t=e.vendor)?(e=e.purpose,t=!!Object.keys(t.consents).length,g(t=!Object.keys(e.consents).length?!1:t)):g(!0)}):1===t&&e.__cmp("getGooglePersonalization",function(e,t){e=!t||!!e.googlePersonalizationData.consentValue;g(e)})}function g(e){e!==u.hasAccess&&(a.rowrLogger.debug(s.LOGGER_COMPONENTS.CMP_COMPONENT,"User change access "+u.hasAccess+"->"+e,"Quantcast"),u.hasAccess=e)}(e={})[s.WRAPPER_EVENTS.CONFIG_LEVEL.INIT]=function(e){c(e)},e[s.WRAPPER_EVENTS.CONFIG_LEVEL.BEFORE_AD_INIT]=function(o){return n(void 0,void 0,void 0,function(){var t,r;return i(this,function(e){switch(e.label){case 0:return l.variables.wrapperConfig.cmp.vendor&&null===u.hasAccess?(t=l.variables.wrapperConfig.cmp.cmpInitTimeout||500,r=d.timerManagerModule.setTimeout("cmpWait-"+o.adUnitId,function(){},t,[]),a.rowrLogger.debug(s.LOGGER_COMPONENTS.CMP_COMPONENT,"Wait init CMP "+t+" ms"),[4,r.promise]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e[s.WRAPPER_EVENTS.WATERFALL_LEVEL.REQUEST]=function(e){e.adConfig.isAnonAd=l.variables.wrapperConfig.cmp.vendor&&!u.hasAccess?1:0};r.dispatcherModule.on(s.WRAPPER_EVENTS.CONFIG_LEVEL.INIT,e[s.WRAPPER_EVENTS.CONFIG_LEVEL.INIT]),r.dispatcherModule.on(s.WRAPPER_EVENTS.CONFIG_LEVEL.BEFORE_AD_INIT,e[s.WRAPPER_EVENTS.CONFIG_LEVEL.BEFORE_AD_INIT]),r.dispatcherModule.on(s.WRAPPER_EVENTS.WATERFALL_LEVEL.REQUEST,e[s.WRAPPER_EVENTS.WATERFALL_LEVEL.REQUEST])},{"../../constants/constants":49,"../../constants/variables":51,"../core/dispatcherModule":84,"../core/loggers/errorLoggerModule":93,"../core/loggers/rowrLoggerModule":97,"../core/timerManagerModule":113}],120:[function(e,t,r){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../core/loggers/errorLoggerModule"),o=e("../core/dispatcherModule"),r=e("../../constants/constants").MANAGER_EVENTS;(e={})[r.BEFORE_DISPLAY_CONFIG]=function(e){var t,r,o,n,i;t=e.div,r=e.config,o=e.settings,(i=o.customKeyValues)&&("object"===a(i)?(s.errorLogger.log(t,n='Detected "customKeyValues" setting.',e={div:t,settings:o}),o.debug&&console.log(n,e),r.customKeyValues=i):console.error("Custom key values must be an object.",{div:t,settings:o}))},e[r.BEFORE_AD_BLOCK_DATA_PUSH]=function(e){var t;t=e.tag,e=e.placementConfig.casesConfig,t.adConfig.options=t.adConfig.options||{},t.adConfig.options.customKeyValues=e.customKeyValues||{}};o.dispatcherModule.on(r.BEFORE_DISPLAY_CONFIG,e[r.BEFORE_DISPLAY_CONFIG]),o.dispatcherModule.on(r.BEFORE_AD_BLOCK_DATA_PUSH,e[r.BEFORE_AD_BLOCK_DATA_PUSH])},{"../../constants/constants":49,"../core/dispatcherModule":84,"../core/loggers/errorLoggerModule":93}],121:[function(e,t,r){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},g=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var p=e("../../constants/variables"),m=e("../core/loggers/errorLoggerModule"),E=e("../../constants/constants"),r=e("../core/dispatcherModule"),h=e("../core/loggers/rowrLoggerModule"),v="KV Transformer";function o(u){return f(this,void 0,void 0,function(){var r,o,n,i,a,s,l,d;return g(this,function(e){switch(e.label){case 0:return(r=p.variables.romConfig.wrapperConfig.kvTransformer||{}).enabled?(u.customKeyValues=u.customKeyValues||{},"object"!==c(u.customKeyValues)?(m.errorLogger.warning(v,"Custom key values must be an object."),[2]):(o=u.customKeyValues,function(e){if(e.length)return!0;return m.errorLogger.warning(v,"KV Transformer has no transformable keys in wrapper config.",{wrapperConfig:p.variables.romConfig.wrapperConfig}),!1}(n=r.transformableKeys||[])?(t=o,!Object.keys(t).length&&(m.errorLogger.warning(v,"No customKeyValues."),1)?[2]:(n=function(e,t){for(var r=[],o=0,n=e;o<n.length;o++){var i=n[o];t.hasOwnProperty(i)&&r.push(i)}return r}(n,o),[4,function(l,d){return f(this,void 0,void 0,function(){var t,r,o,n,i,a,s;return g(this,function(e){switch(e.label){case 0:return(e.trys.push([0,3,,4]),t=function(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&(e[t].roxotValue||(r+="&keyValues[]["+e[t].publisherKeyName+"]="+t));r&&(r+="&pid="+p.variables.romConfig.publisherId);return r}(l))?(r=d.replace("__PUBLISHER_VALUES__",t),[4,fetch(r)]):[2,l];case 1:return[4,e.sent().json()];case 2:if(r=e.sent(),s=r.data||[],"200"!==r.status)return m.errorLogger.error(v,null===s?void 0:s.message,{preparedKv:l,json:r}),[2,l];if(!s)return[2,l];for(o=0,n=s;o<n.length;o++)i=n[o],a=i.publisherValue,l[a].roxotValue=i.roxotValue;return[3,4];case 3:return s=e.sent(),m.errorLogger.error(v,s.message,{preparedKv:l}),[3,4];case 4:return[2,l]}})})}(i=function(e,t){for(var r={},o=0,n=e;o<n.length;o++){var i,a=n[o];t.hasOwnProperty(a)&&(i=t[a],r[i]={roxotValue:void 0,publisherKeyName:a})}return r}(n,o),r.getRoxotValueUrlTemplate)])):[2])):[2];case 1:for(s in i=e.sent(),a=[],i)i.hasOwnProperty(s)&&(l=i[s].publisherKeyName,o.hasOwnProperty(l)&&(d=i[s].roxotValue)&&(a.push(d.toString()),delete o[l]));return a.length&&(o[r.sharedKeyName]=a),h.rowrLogger.debug(E.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Successfully transform publisher keys",null,{settings:u}),[2]}var t})})}(e={})[E.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG]=function(t){return f(void 0,void 0,void 0,function(){return g(this,function(e){switch(e.label){case 0:return[4,o(t.settings)];case 1:return e.sent(),[2]}})})};r.dispatcherModule.on(E.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,e[E.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG],void 0,1)},{"../../constants/constants":49,"../../constants/variables":51,"../core/dispatcherModule":84,"../core/loggers/errorLoggerModule":93,"../core/loggers/rowrLoggerModule":97}],122:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../core/dispatcherModule"),r=e("../../../constants/constants"),n=e("./defineHostUtils");o.dispatcherModule.on(r.MANAGER_EVENTS.NEED_DEFINE_HOST,function(e){e.hostObject.host=n.defineHostUtils.normalizeUrl(window.location.host)})},{"../../../constants/constants":49,"../../core/dispatcherModule":84,"./defineHostUtils":123}],123:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.defineHostUtils=void 0,r.defineHostUtils={normalizeUrl:function(e){return-1!==e.indexOf("www.")?e.split("www.")[1]:e}}},{}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../core/dispatcherModule"),i=e("../../../constants/constants"),o=e("../../../constants/variables"),a=e("../../core/loggers/rowrLoggerModule"),s=e("../../core/repositories/adConfigRepository"),l=e("../../core/timerManagerModule"),d=e("../../../utils/wrapperUtils"),u=e("../../../utils/adConfigUtils"),c=e("../../core/loggers/errorLoggerModule"),f=e("../../core/repositories/placementConfigRepository"),g=e("../../core/markers/placementMarkers"),p=e("../../../utils/adDisplayStatusUpdater"),m=250;function E(){if(o.variables.wrapperConfig.disableAdRefreshInNotActiveTab){if(a.rowrLogger.debug(i.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Rowr check for active tab is enabled."),top.addEventListener("focus",function(e){null!=e&&e.isTrusted?o.variables.wrapperConfig.disableAdRefreshInNotActiveTab&&(a.rowrLogger.debug(i.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"User focus page."),o.variables.wrapperConfig.pageStatus=i.PAGE_STATUSES.ACTIVE_TAB,n.dispatcherModule.dispatch(i.WRAPPER_EVENTS.SERVER_LEVEL.RUN,{}),function(){for(var e=0,t=f.placementConfigRepository.getAll();e<t.length;e++){var r=t[e],o=r.status;o!==i.PLACEMENT_CONFIG_STATUSES.INIT&&o!==i.PLACEMENT_CONFIG_STATUSES.READY||g.placementMarkers.markAsNeedRefresh(r)}}()):c.errorLogger.log("Refresh Module","Focus event from code.",{event:e})}),top.addEventListener("blur",function(e){null!=e&&e.isTrusted?o.variables.wrapperConfig.disableAdRefreshInNotActiveTab&&(a.rowrLogger.debug(i.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"User blur page."),o.variables.wrapperConfig.pageStatus=i.PAGE_STATUSES.HIDDEN_TAB,n.dispatcherModule.dispatch(i.WRAPPER_EVENTS.SERVER_LEVEL.PAUSE,{})):c.errorLogger.log("Refresh Module","Blur event from code.",{event:e})}),!top.document.hasFocus())return a.rowrLogger.debug(i.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Rowr init in no active tab."),o.variables.wrapperConfig.pageStatus=i.PAGE_STATUSES.HIDDEN_TAB,void n.dispatcherModule.dispatch(i.WRAPPER_EVENTS.SERVER_LEVEL.PAUSE,{})}else a.rowrLogger.debug(i.LOGGER_COMPONENTS.WRAPPER_COMPONENT,"Rowr check for active tab is disabled.");n.dispatcherModule.dispatch(i.WRAPPER_EVENTS.SERVER_LEVEL.RUN,{})}function h(){l.timerManagerModule.replaceInterval("wrapper__increaseVisibleTime",function(){!function(){for(var e=0,t=s.adConfigRepository.getAll();e<t.length;e++){var r=t[e];document.getElementById(r.adId)?r.adHtmlBlockStatus===i.AD_HTML_BLOCK_STATUSES.ACTIVE&&p.adDisplayStatusUpdater.isAnyAdWasDisplayed(r)&&(function(e){e=(e.waterfallConfig||{}).currentSspConfig||{};return!!v[e.name]}(r)||d.wrapperUtils.isVisibleAd(r)&&(r.visibleSeconds+=m/1e3,r.waterfallConfig.currentVisibleSeconds+=m/1e3)):u.adConfigUtils.deleteNotExistsAdTag(r)}}(),d.wrapperUtils.refreshAllActiveAdBlocks()},m,["wrapper"]),l.timerManagerModule.replaceInterval("wrapper__updateHasSeen",function(){!function(){for(var e=0,t=f.placementConfigRepository.getAll();e<t.length;e++){var r=t[e];if(r.status===i.PLACEMENT_CONFIG_STATUSES.RENDERED)for(var o in r.formatWaterfall.currentAdUnitsIds)if(r.formatWaterfall.currentAdUnitsIds.hasOwnProperty(o)){o=s.adConfigRepository.find(o);if(o&&d.wrapperUtils.isVisibleAd(o)&&!r.formatWaterfall.currentAdHaveSeenByUser){c.errorLogger.log(r.placementTitle,"Placement seen",{placementConfig:r}),r.formatWaterfall.currentAdHaveSeenByUser=!0,n.dispatcherModule.dispatch(i.MANAGER_EVENTS.PLACEMENT_SEEN,{placementConfig:r,eventAdData:u.adConfigUtils.buildWrapperEventData(o).eventAdData});break}}}}()},m,["wrapper"])}var v=((e={})[i.SSP_NAMES.VIDEO_NOW]=i.SSP_NAMES.VIDEO_NOW,e[i.SSP_NAMES.ROXOT_IN_OUT_STREAM]=i.SSP_NAMES.ROXOT_IN_OUT_STREAM,e[i.SSP_NAMES.ROXOT_OUT_STREAM]=i.SSP_NAMES.ROXOT_OUT_STREAM,e[i.SSP_NAMES.ROXOT_AD_FOX_VIDEO]=i.SSP_NAMES.ROXOT_AD_FOX_VIDEO,e);n.dispatcherModule.on(i.WRAPPER_EVENTS.REFRESH_LEVEL.CHECK_ACTIVE_TAB,function(){E()}),n.dispatcherModule.on(i.WRAPPER_EVENTS.REFRESH_LEVEL.CHECK_NEED_REFRESH,function(){h()})},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/adConfigUtils":134,"../../../utils/adDisplayStatusUpdater":135,"../../../utils/wrapperUtils":141,"../../core/dispatcherModule":84,"../../core/loggers/errorLoggerModule":93,"../../core/loggers/rowrLoggerModule":97,"../../core/markers/placementMarkers":99,"../../core/repositories/adConfigRepository":105,"../../core/repositories/placementConfigRepository":106,"../../core/timerManagerModule":113}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=e("../../../constants/variables"),d=e("../../core/loggers/rowrLoggerModule"),o=e("../../core/dispatcherModule"),u=e("../../../constants/constants"),c=e("../../core/loggers/errorLoggerModule"),f=e("../../../utils/utils"),s=e("../../core/waterfallRequestsDataModule"),g=e("./statsUtils");function n(e){if(e.eventAdData){var t=e.eventAdData.monetizationStatsIntegration,r=g.statsUtils.getSampleCoefficient(t,"request"),o=e.eventAdData.details.tagId,n=s.waterfallRequestsRecords.find(o);if(!n)return d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,'buildRequestData, No waterfall record with id "'+o+'".',null,{records:s.waterfallRequestsRecords.getAll()}),null;g.statsUtils.isWaterfallRecordForAuction(n)?i("request",a(e,r,0,0,t),r,t):d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,"buildRequestData, Invalid waterfall record.",null,{waterfallRecord:n})}else c.errorLogger.error(u.LOGGER_COMPONENTS.MS_COMPONENT,"Can not send PlacementRequest data because eventAdData is null",{data:e})}function i(e,t,r,o){var n,i,a,s=f.utils.randomInteger(1,r);d.rowrLogger.debug(u.LOGGER_COMPONENTS.MS_COMPONENT,"sendData - built data",null,{monetizationStatsData:t,sampleCoefficient:r,seed:s}),g.statsUtils.checkNeedToSend(o,"monetizationStatsIntegration",e)?s===r&&(n=t,i=l.variables.romConfig.monetizationStatsUrl,a=new XMLHttpRequest,t=JSON.stringify(n),a.open("POST",i),a.onload=function(){200<=a.status&&a.status<300||304===a.status?d.rowrLogger.debug(u.LOGGER_COMPONENTS.MS_COMPONENT,"Success Ajax request to "+i+". Status: "+a.status+": "+a.statusText,null,n):c.errorLogger.error(u.LOGGER_COMPONENTS.MS_COMPONENT,"Error Ajax request to "+i+". Status: "+a.status+": "+a.statusText)},a.onerror=function(){c.errorLogger.error(u.LOGGER_COMPONENTS.MS_COMPONENT,"Error Ajax request to "+i+". Status: "+a.status+": "+a.statusText)},a.send(t)):d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,"Sending "+e+" is disabled.",null,{monetizationStatsIntegration:l.variables.wrapperConfig.monetizationStatsIntegration})}function a(e,t,r,o,n){var i=e.placementConfig,a=e.eventAdData,e=function(e,t){var r,e=e.details.tagId,o=s.waterfallRequestsRecords.find(e).ssps,n=[];for(r in o)o.hasOwnProperty(r)&&(0!==t&&o[r].status!==u.AD_STATUSES.RENDERED||n.push(r));return n}(a,r);return{timestamp:Date.now(),publisher:l.variables.romConfig.publisher,site:l.variables.wrapperConfig.host,placement:i.placementTitle,format:a.details.formatTitle,bidders:e,request:t,impression:r,url:g.statsUtils.checkNeedToSend(n,"monetizationStatsIntegration","url")?window.location.href:"",referrer:g.statsUtils.checkNeedToSend(n,"monetizationStatsIntegration","referrer")?document.referrer:"",visible_impression:o,cpm:0,revenue:r?a.adServer.cpm/1e3*r:0}}function p(e){var t=e.eventAdData.monetizationStatsIntegration,r=g.statsUtils.getSampleCoefficient(t,"impression"),o=e.eventAdData.details.tagId,n=s.waterfallRequestsRecords.find(o);n?g.statsUtils.isWaterfallRecordValidForImpression(n)?(i("impression",a(e,0,r,0,t),r,t),(t=l.variables.wrapperConfig.msYaMetric||{}).enabled&&(e=e.placementConfig,window.ym(t.counterId,"reachGoal","imp",{placement:e.placementId}),d.rowrLogger.debug(u.LOGGER_COMPONENTS.MS_COMPONENT,'Send MsYaMetric event "imp".',null,{placementConfig:e}))):d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,"buildImpressionData, Invalid waterfall record.",null,{waterfallRecord:n}):d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,'buildImpressionData, No waterfall record with id "'+o+'".',null,{records:s.waterfallRequestsRecords.getAll()})}function m(e){var t=e.eventAdData.monetizationStatsIntegration,r=g.statsUtils.getSampleCoefficient(t,"visibleImpression"),o=e.eventAdData.details.tagId,n=s.waterfallRequestsRecords.find(o);n?g.statsUtils.isWaterfallRecordValidForImpression(n)?(i("visibleImpression",a(e,0,0,r,t),r,t),(t=l.variables.wrapperConfig.msYaMetric||{}).enabled&&(e=e.placementConfig,window.ym(t.counterId,"reachGoal","visibleimp",{placement:e.placementId}),d.rowrLogger.debug(u.LOGGER_COMPONENTS.MS_COMPONENT,'Send MsYaMetric event "visibleimp".',null,{placementConfig:e}))):d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,"buildVisibleImpressionData, Invalid waterfall record.",null,{waterfallRecord:n}):d.rowrLogger.warning(u.LOGGER_COMPONENTS.MS_COMPONENT,'buildVisibleImpressionData, No waterfall record with id "'+o+'".',null,{records:s.waterfallRequestsRecords.getAll()})}o.dispatcherModule.on(u.WRAPPER_EVENTS.CONFIG_LEVEL.INIT,function(){l.variables.wrapperConfig.monetizationStatsIntegration.enabled&&(d.rowrLogger.log(u.LOGGER_COMPONENTS.MS_COMPONENT,"Monetization Stats init",null),o.dispatcherModule.on(u.MANAGER_EVENTS.PLACEMENT_RENDER,n),o.dispatcherModule.on(u.MANAGER_EVENTS.PLACEMENT_NO_AD,n),o.dispatcherModule.on(u.MANAGER_EVENTS.PLACEMENT_VISIBLE,p),o.dispatcherModule.on(u.MANAGER_EVENTS.PLACEMENT_SEEN,m))})},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../../core/dispatcherModule":84,"../../core/loggers/errorLoggerModule":93,"../../core/loggers/rowrLoggerModule":97,"../../core/waterfallRequestsDataModule":116,"./statsUtils":127}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p=e("../../../constants/variables"),m=e("../../core/loggers/rowrLoggerModule"),o=e("../../core/dispatcherModule"),E=e("../../../constants/constants"),l=e("../../core/loggers/errorLoggerModule"),n=e("../../../utils/utils"),s=e("../../core/waterfallRequestsDataModule"),h=e("../../core/roxotHostModule"),v=e("./statsUtils"),d="pa.rxthdr.com/v3",a=((e={})[E.AD_STATUSES.RENDERED]="bid",e[E.AD_STATUSES.NO_SERVER]="noBid",e[E.AD_STATUSES.TIMEOUT]="timeout",e),u=((e={})[E.AD_STATUSES.RENDERED]=1,e[E.AD_STATUSES.NO_SERVER]=0,e[E.AD_STATUSES.TIMEOUT]=-1,e),c=((e={})[E.AD_STATUSES.RENDERED]="banner",e[E.AD_STATUSES.NO_SERVER]="-",e[E.AD_STATUSES.TIMEOUT]="-",e);function i(e,t){var r=new XMLHttpRequest,o=JSON.stringify(t);r.open("POST",e),r.onload=function(){200<=r.status&&r.status<300||304===r.status?m.rowrLogger.debug(E.LOGGER_COMPONENTS.PA_COMPONENT,"Success Ajax request to "+e+". Status: "+r.status+": "+r.statusText,null,t):l.errorLogger.error(E.LOGGER_COMPONENTS.PA_COMPONENT,"Error Ajax request to "+e+". Status: "+r.status+": "+r.statusText)},r.onerror=function(){l.errorLogger.error(E.LOGGER_COMPONENTS.PA_COMPONENT,"Error Ajax request to "+e+". Status: "+r.status+": "+r.statusText)},r.send(o)}function f(e){var t,r,o,n=e.eventAdData.prebidAnalyticsIntegration,i=v.statsUtils.getSampleCoefficient(n,"auction"),a=v.statsUtils.getSampleCoefficient(n,"impression"),o=(r=i,o=a,a=(t=e).eventAdData,e=a.details.tagId,t=O(a.details),a=1e3*a.requestTimeout,b(e,t,a,r,o));o?S(o,n,i):m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"No tag auction data",null,{buildedData:o})}function g(e){var t,r,o,n,i,a,s;e.eventAdData?(t=e.eventAdData.prebidAnalyticsIntegration,r=v.statsUtils.getSampleCoefficient(t,"auction"),s=v.statsUtils.getSampleCoefficient(t,"impression"),(i=(n=r,i=s,a=(o=e).eventAdData,s=o.placementConfig,o=a.details.tagId,s=C(s.placementTitle),a=1e3*a.requestTimeout,b(o,s,a,n,i)))?S(i,t,r):m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"No placement auction data",null,{buildedData:i})):l.errorLogger.error(E.LOGGER_COMPONENTS.PA_COMPONENT,"Can not build placementAuction data because eventAdData is null",{data:e})}function S(e,t,r){var o=n.utils.randomInteger(1,r);m.rowrLogger.debug(E.LOGGER_COMPONENTS.PA_COMPONENT,"sendAuction - build data",null,{prebidAnalyticsData:e,sampleCoefficient:r,seed:o}),v.statsUtils.checkNeedToSend(t,"prebidAnalyticsIntegration","auction")?o===r&&i(w(e,"a"),e):m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"Auction requests is disabled.",null,{prebidAnalyticsIntegration:p.variables.wrapperConfig.prebidAnalyticsIntegration})}function b(e,t,r,o,n){var i=p.variables.wrapperConfig.prebidAnalyticsIntegration.publisherId,a=s.waterfallRequestsRecords.find(e);return a?v.statsUtils.isWaterfallRecordForAuction(a)?{event:"a",eventName:"Auction",options:{options:{publisherIds:[i]},publisherId:i,adUnits:[],server:d,configServer:d,utmTagData:{utm_source:"",utm_medium:"",utm_campaign:"",utm_term:"",utm_content:""},host:p.variables.wrapperConfig.host,device:p.variables.wrapperConfig.device,serverConfig:{a:1,i:1,bat:0,s:{a:o,i:n,bat:1}}},data:{id:a.id,start:a.start,timeout:r,adUnits:((n={})[t]={adUnit:t,start:a.start,timeout:r,finish:a.finish,status:"finished",bidders:y(a)},n),finish:a.finish}}:void m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"buildAuctionData, Invalid waterfall record.",null,{waterfallRecord:a}):(m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,'buildAuctionData, No waterfall record with id "'+e+'".',null,{records:s.waterfallRequestsRecords.getAll()}),null)}function y(e){var t,r,o,n=e.ssps,i={};for(t in n)n.hasOwnProperty(t)&&(o=(r=n[t]).status,i[t]={bidder:t,isAfterTimeout:0,start:r.start,source:"client",finish:r.finish,status:a[o],cpm:u[o],mediaType:c[o],size:r.size});return i}function O(e){return"plus__"+e.placement+"__"+e.tagId}function C(e){return"plus__placement__"+e}function A(e){var t,r,o,n=e.eventAdData.prebidAnalyticsIntegration,i=v.statsUtils.getSampleCoefficient(n,"auction"),a=v.statsUtils.getSampleCoefficient(n,"impression"),o=(r=i,o=a,i=(t=e).eventAdData,e=i.details.tagId,t=O(i.details),i=1e3*i.requestTimeout,T(e,t,i,r,o));o?M(o,n,a):m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"No tag impression data",null,{buildedData:o})}function _(e){var t,r,o,n=e.eventAdData.prebidAnalyticsIntegration,i=v.statsUtils.getSampleCoefficient(n,"auction"),a=v.statsUtils.getSampleCoefficient(n,"impression"),o=(r=i,o=a,i=(t=e).eventAdData.details.tagId,e=C(t.placementConfig.placementTitle),t=1e3*t.eventAdData.requestTimeout,T(i,e,t,r,o));o?M(o,n,a):m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"No placement impression data",null,{buildedData:o})}function N(e){var t=e.eventAdData.customKeyValues||{};if(h.roxotHostModule.addRoxotHostToKeyValuesListIfNeed(t),Object.keys(t)){var r=p.variables.wrapperConfig.prebidAnalyticsIntegration.keyValues||[];if(Object.keys(r))for(var o,n,i,a=e.eventAdData.prebidAnalyticsIntegration,s=v.statsUtils.getSampleCoefficient(a,"auction"),l=v.statsUtils.getSampleCoefficient(a,"kv"),d=0,u=r;d<u.length;d++){var c=u[d];if(t[c]){var f=t[c],g=(o=s,g=l,n=c,i=f,c=void 0,c=(f=e).eventAdData.details.tagId,i=function(e,t,r){return"plus__kv__placement__"+e+"?"+(t+"="+r)}(f.placementConfig.placementTitle,n,i),f=1e3*f.eventAdData.requestTimeout,T(c,i,f,o,g));if(!g)return void m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"No kv impression data",null,{buildedData:g});M(g,a,l)}}}}function M(e,t,r){var o=n.utils.randomInteger(1,r);m.rowrLogger.debug(E.LOGGER_COMPONENTS.PA_COMPONENT,"sendImpression - build data",null,{prebidAnalyticsData:e,sampleCoefficient:r,seed:o}),v.statsUtils.checkNeedToSend(t,"prebidAnalyticsIntegration","impression")?o===r&&i(w(e,"i"),e):m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"Impression requests is disabled.",null,{prebidAnalyticsIntegration:p.variables.wrapperConfig.prebidAnalyticsIntegration})}function T(e,t,r,o,n){var i=p.variables.wrapperConfig.prebidAnalyticsIntegration.publisherId,a=s.waterfallRequestsRecords.find(e);if(a){if(v.statsUtils.isWaterfallRecordValidForImpression(a))return{event:"i",eventName:"Bid won",options:{options:{publisherIds:[i]},publisherId:i,adUnits:[],server:d,configServer:d,utmTagData:{utm_source:"",utm_medium:"",utm_campaign:"",utm_term:"",utm_content:""},host:p.variables.wrapperConfig.host,device:p.variables.wrapperConfig.device,serverConfig:{a:1,i:1,bat:0,s:{a:o,i:n,bat:1}}},data:{isNew:0,auction:{adUnit:t,start:a.start,timeout:r,finish:a.finish,status:"finished",bidders:y(a)},adUnit:t,bidder:a.winner,cpm:1,size:{width:a.size.width,height:a.size.height},mediaType:"banner",source:"client"}};m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,"buildImpressionData, Invalid waterfall record.",null,{waterfallRecord:a})}else m.rowrLogger.warning(E.LOGGER_COMPONENTS.PA_COMPONENT,'buildImpressionData, No waterfall record with id "'+e+'".',null,{records:s.waterfallRequestsRecords.getAll()})}function w(e,t){e="https://"+d+"/"+t+"?publisherId="+e.options.publisherId+"&host="+e.options.host;return m.rowrLogger.debug(E.LOGGER_COMPONENTS.PA_COMPONENT,"buildUrl - build url",null,{url:e}),e}o.dispatcherModule.on(E.WRAPPER_EVENTS.CONFIG_LEVEL.INIT,function(){var e;(e=p.variables.wrapperConfig.prebidAnalyticsIntegration).enabled&&(e.publisherId?(m.rowrLogger.log(E.LOGGER_COMPONENTS.PA_COMPONENT,"Prebid Analytics init",null,{prebidAnalyticsIntegration:e}),o.dispatcherModule.on(E.WRAPPER_EVENTS.AD_LEVEL.RENDER,f),o.dispatcherModule.on(E.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,f),o.dispatcherModule.on(E.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,A),o.dispatcherModule.on(E.MANAGER_EVENTS.PLACEMENT_RENDER,g),o.dispatcherModule.on(E.MANAGER_EVENTS.PLACEMENT_NO_AD,g),o.dispatcherModule.on(E.MANAGER_EVENTS.PLACEMENT_VISIBLE,_),o.dispatcherModule.on(E.MANAGER_EVENTS.PLACEMENT_VISIBLE,N,void 0,1)):m.rowrLogger.error(E.LOGGER_COMPONENTS.PA_COMPONENT,"No publisher Id in wrapper config.",null,{prebidAnalyticsIntegration:e}))})},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../../core/dispatcherModule":84,"../../core/loggers/errorLoggerModule":93,"../../core/loggers/rowrLoggerModule":97,"../../core/roxotHostModule":109,"../../core/waterfallRequestsDataModule":116,"./statsUtils":127}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.statsUtils=void 0;var n=e("../../../constants/variables"),i=e("../../core/loggers/rowrLoggerModule"),a=e("../../../constants/constants");r.statsUtils={getSampleCoefficient:function(e,t){var r=e&&e[t+"Settings"]||{},o=r.sampleCoefficient;return void 0===(o=o||(n.variables.wrapperConfig.prebidAnalyticsIntegration[t+"Settings"]||{}).sampleCoefficient)?1:0===o?(i.rowrLogger.warning(a.LOGGER_COMPONENTS.MS_COMPONENT,t+" sample coefficient should not be 0. Default value 1 will use instead.",null,{prebidAnalyticsIntegration:e}),1):null!=o?o:1},checkNeedToSend:function(e,t,r){var o=e[r+"Settings"]||{},e=o.isNeedToSend;return void 0===(e=void 0===e?(n.variables.wrapperConfig[t][r+"Settings"]||{}).isNeedToSend:e)?"visibleImpression"!==r&&("url"!==r&&"referrer"!==r):null!=e&&e},isWaterfallRecordForAuction:function(e){return e.start?!!e.finish||(i.rowrLogger.warning(a.LOGGER_COMPONENTS.PA_COMPONENT,"Invalid finish in waterfallRecord",null,{waterfallRecord:e}),!1):(i.rowrLogger.warning(a.LOGGER_COMPONENTS.PA_COMPONENT,"Invalid start in waterfallRecord",null,{waterfallRecord:e}),!1)},isWaterfallRecordValidForImpression:function(e){return!!this.isWaterfallRecordForAuction(e)&&(!!e.winner||(i.rowrLogger.warning(a.LOGGER_COMPONENTS.PA_COMPONENT,"Invalid winner in waterfallRecord",null,{waterfallRecord:e}),!1))}}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../core/loggers/rowrLoggerModule":97}],128:[function(e,t,r){"use strict";var i=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},a=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../core/loggers/romLoggerModule"),l=e("../../../constants/constants"),d=e("../../../utils/utils"),u=e("../../../constants/variables"),c=e("../../core/dispatcherModule"),f=e("../../core/placementSettingsModule");u.variables.rom.displayGoogleFullscreenPlacement=function(o,n){return i(this,void 0,void 0,function(){var t,r;return a(this,function(e){switch(e.label){case 0:return d.utils.isCorrectPlacementId(o)?(n=n||{},t=d.utils.deepClone(n),f.placementSettingsModule.validateSettings("GoogleFullScreen",t),[4,c.dispatcherModule.dispatchAsync(l.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,{event:l.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,publisherDivId:"googleFullScreen",placementId:o,settings:t})]):[2];case 1:return e.sent(),[4,d.utils.getPlacementConfigUrl(o,u.variables.romConfig.gfsPlacementOptionsTemplate)];case 2:return r=e.sent(),s.romLogger.log("Load placement config for full screen placement",{placement:o,settings:t,url:r,managerConfig:u.variables.romConfig}),d.utils.jsonAjax(r,function(e){c.dispatcherModule.dispatch(l.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG,{event:l.MANAGER_EVENTS.BEFORE_DISPLAY_CONFIG,placement:o,div:"googleFullscreen",config:e,settings:t}),function(e){var t=e.options.googleFullscreen,r=d.utils.getOptionFromConfigs(l.GOOGLE_FULLSCREEN_OPTIONS_NAMES.AD_TAG,[t],null),e=d.utils.getOptionFromConfigs(l.GOOGLE_FULLSCREEN_OPTIONS_NAMES.STATIC_AD_TAG,[t],null),o=d.utils.getOptionFromConfigs(l.GOOGLE_FULLSCREEN_OPTIONS_NAMES.CLOSE_LINKS,[t],[]),n=d.utils.getOptionFromConfigs(l.GOOGLE_FULLSCREEN_OPTIONS_NAMES.OPEN_LINKS,[t],[]);if(r&&e){var i='<div id=\'rxt-gfs-adblock\' style="width: 1px; height: 1px;"></div>\n    <div class="rxt-content">\n<span id="rxt-link"></span>\n      <p>\n';if(o)for(var a in o)i+='<a data-google-interstitial="false" href="'+o[a]+'"></a>';if(n)for(var a in n)i+='<a data-google-interstitial="true" href="'+n[a]+'"></a>';i+="</p>\n    </div>",document.body.insertAdjacentHTML("beforeend",i);t=document.createElement("script");t.src="https://securepubads.g.doubleclick.net/tag/js/gpt.js",document.head.appendChild(t);t=document.createElement("script");t.insertAdjacentHTML("beforeend",'window.googletag = window.googletag || {cmd: []};\n\n      var interstitialSlot, staticSlot;\n\n      googletag.cmd.push(function() {\n        interstitialSlot = googletag.defineOutOfPageSlot(\n"'+r+"\" ,            googletag.enums.OutOfPageFormat.INTERSTITIAL);\n\n        if (interstitialSlot) {\n          interstitialSlot.addService(googletag.pubads());\n\n          googletag.pubads().addEventListener('slotOnload', function(event) {\n            if (interstitialSlot === event.slot) {\n              document.getElementById('rxt-link').style.display = 'block';\n            }\n          });\n        }\n\n        staticSlot = googletag.defineSlot(\n\""+e+"\", [1, 1], 'rxt-gfs-adblock')\n          .addService(googletag.pubads());\n\n        googletag.pubads().disableInitialLoad();\n        googletag.pubads().enableSingleRequest();\n        googletag.enableServices();\n      });\n"),document.head.appendChild(t),document.head.insertAdjacentHTML("beforeend","<style>\n      #rxt-link {\n        display: none;\n      }\n\n      div.rxt-content {\n        position: fixed;\n        top: 50%;\n      }\n    </style>");t=document.createElement("script");t.insertAdjacentHTML("beforeend","googletag.cmd.push(function() {\n                  googletag.display('rxt-gfs-adblock');\n                  googletag.pubads().refresh([staticSlot,interstitialSlot]);\n                });"),document.body.appendChild(t)}else console.error("Settings are not correct. Check adTag and staticAdTag in placement options.")}(e)}),[2]}})})}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../../core/dispatcherModule":84,"../../core/loggers/romLoggerModule":96,"../../core/placementSettingsModule":104}],129:[function(e,t,r){"use strict";var s=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},l=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var d,u,c,f,o,g=e("../../../utils/utils"),p=e("../../core/placementSettingsModule"),m=e("../../../constants/variables"),E=e("../../core/loggers/errorLoggerModule"),h=e("../../core/loggers/rowrLoggerModule"),v=e("../../../constants/constants"),S=e("../../core/dispatcherModule"),e=m.variables.rom,b={},y="INSTREAM AD",O="INSTREAM AD",C=1e3;function A(e,t,r,o){var n,i,a;window.google?(n=e,e=t,(d=document.getElementById(e))?(u=document.getElementById(n))?(c=new window.google.ima.AdDisplayContainer(d,u),(f=new window.google.ima.AdsLoader(c)).addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,N,!1),f.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,M,!1),h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"IMA inited",O)):E.errorLogger.error(y,"Can not found Publisher Video Element with id "+n+"."):E.errorLogger.error(y,"Can not found Publisher Ad Container with id "+e+"."),d&&u&&((t=function(e){var t,r=[],o=null===(t=null===(t=null==e?void 0:e.cases[0])||void 0===t?void 0:t.experiments[0])||void 0===t?void 0:t.tags;if(!o.length)return E.errorLogger.error(y,"No tags configs",{tagsConfigs:o,config:e}),r;h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Tags Configs",O,{tagsConfigs:o});for(var n=0,i=o;n<i.length;n++){var a=i[n],s=null===(l=null===(s=null==a?void 0:a.adConfig)||void 0===s?void 0:s.details)||void 0===l?void 0:l.tagTitle;s||h.rowrLogger.error(v.LOGGER_COMPONENTS.SSP_COMPONENT,"No tag title.",O,{tagConfig:a,tagsConfigs:o});var l=null===(l=null===(l=null==a?void 0:a.adConfig)||void 0===l?void 0:l.adServersConfig[0])||void 0===l?void 0:l.adTagUrl;l||h.rowrLogger.error(v.LOGGER_COMPONENTS.SSP_COMPONENT,"No adTagUrl",O,{tagConfig:a,tagsConfigs:o}),s&&l&&r.push({adTagTitle:s,adTagUrl:l})}return h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Create adTags",O,{createdAdTags:r}),r}(o)).length?(function(e){for(var t in e)e.hasOwnProperty(t)&&f.requestAds(e[t],{adTagTitle:t});h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Send ads requests.",O)}(function(e){for(var t={},r=0,o=e;r<o.length;r++){var n=o[r],i=new window.google.ima.AdsRequest;i.adTagUrl=n.adTagUrl,t[n.adTagTitle]=i}return h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Create ads requests.",O,{requests:t}),t}(t)),e=(e=null===(e=null===(e=null===(e=null===(e=null===(e=null===(e=null==(n=o)?void 0:n.cases[0])||void 0===e?void 0:e.experiments[0])||void 0===e?void 0:e.tags[0])||void 0===e?void 0:e.adConfig)||void 0===e?void 0:e.options)||void 0===e?void 0:e.limits)||void 0===e?void 0:e.requestTimeout)?(h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,'Request timeout "'+e+'"',O,{placementConfig:n}),1e3*e):(E.errorLogger.warning(y,"Cannot found ad response timeout, use default.",{defaultDisplayTimeout:C}),C),i=o,a=t,setTimeout(function(){try{var e=u.clientWidth,t=u.clientHeight,r=function(e,t){for(var r=[],o=0,n=t;o<n.length;o++){var i=n[o];r.push(i.adTagTitle)}return h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Build priority tags list.",O,{tagsPriorityList:r,placementConfig:e}),r}(i,a);c.initialize();var o=function(e){if(!Object.keys(b).length)return E.errorLogger.error(y,"Cannot found any adsManagers in rpAdsManagers.",{adsManagers:b}),null;for(var t=0,r=e;t<r.length;t++){var o=r[t];if(b[o]){var n=b[o];return E.errorLogger.log(y,'Successfully get adsManager with tag title "'+o+'" from priority list.',{tagTitle:o,tagsPriorityList:e}),n}}return E.errorLogger.error(y,"Can not found any adsManger in tagsPriorityList",{adTagsPriorityList:e,adsManagers:b}),null}(r);if(!o)return;o.init(e,t,window.google.ima.ViewMode.NORMAL),o.start(),o.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,_)}catch(e){E.errorLogger.error(y,"AdsManager could not be started.",{adError:e}),u.play()}},e)):E.errorLogger.error(y,"Can  not create adTags.",{placementConfig:o}))):E.errorLogger.error(y,"No IMA SDK.")}function _(){for(var e in b)b.hasOwnProperty(e)&&b[e].destroy();b={},h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Destroy all adsManagers.",O,{rpAdsManagers:b})}function N(e){var t,r;h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Ads Manager Loaded",O,{adsManagerLoadedEvent:e,userRequestContext:e.getUserRequestContext()}),o=e.getAdsManager(u),t=o,r=e.getUserRequestContext(),(e=r.adTagTitle)?(b[e]=t,h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,'Register adsManager with tagName "'+e+'".',O,{rpAdsManagers:b})):h.rowrLogger.warning(v.LOGGER_COMPONENTS.SSP_COMPONENT,"No adTagTitle in userRequestContext.",O,{userRequestContext:r}),o.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,M),o.addEventListener(window.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,n),o.addEventListener(window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,i)}function M(e){h.rowrLogger.error(v.LOGGER_COMPONENTS.SSP_COMPONENT,e.getError(),O),o&&o.destroy()}function n(){h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Event onContentPauseRequested",O),u.pause()}function i(){h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Event onContentResumeRequested",O),u.play()}e.displayInStreamPlacement=function(o,n,i,a){return s(this,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:return a=a||{},t=g.utils.deepClone(a),p.placementSettingsModule.validateSettings(i,t),[4,S.dispatcherModule.dispatchAsync(v.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,{event:v.MANAGER_EVENTS.BEFORE_LOAD_PLACEMENT_CONFIG,publisherDivId:n,placementId:i,settings:t})];case 1:return e.sent(),[4,g.utils.getPlacementConfigUrl(i)];case 2:return r=e.sent(),h.rowrLogger.debug(v.LOGGER_COMPONENTS.SSP_COMPONENT,"Load placement config for inStream placement",O,{videoElementId:o,adContainerId:n,placementId:i,settings:t,url:r,managerConfig:m.variables.romConfig}),g.utils.jsonAjax(r,function(e){A(o,n,0,e)}),[2]}})})}},{"../../../constants/constants":49,"../../../constants/variables":51,"../../../utils/utils":139,"../../core/dispatcherModule":84,"../../core/loggers/errorLoggerModule":93,"../../core/loggers/rowrLoggerModule":97,"../../core/placementSettingsModule":104}],130:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.ROXOT_PLACEHOLDER_CLASS=void 0;var r=e("../core/dispatcherModule"),l=e("../../constants/constants"),o=e("../../constants/variables"),d=e("../../utils/adBlockBuilder"),u=e("../core/adservers/adServerUtil"),c=e("../core/loggers/errorLoggerModule"),f=e("../core/loggers/rowrLoggerModule"),n=e("../../utils/utils"),g="#F1F1F1",p="rgba(196, 196, 196, 0.1)",m="#C4C4C4",E="загрузка рекламы...",h="#777777",v="14px",S="data-ad-container-min-width",b="data-ad-container-min-height",y="data-ad-container-position",O="data-ad-container-vertical-align";function i(e,t){var r=e.adConfig,o=function(e){if(function(e){e=null===(e=null===(e=null==e?void 0:e.waterfallConfig)||void 0===e?void 0:e.currentSspConfig)||void 0===e?void 0:e.sizes;return!!e&&!(e[0]||[])[0]}(e))return{width:"100%",height:"100%"};var t=u.adServerUtil.getStaticSizes(e);if(!t)return null;e=t.fix||null;e=e||(t.min||null);return{width:e[0]+"px",height:e[1]+"px"}}(r);if(!o){var n="Can not get sizes for placeholder.";return c.errorLogger.warning(l.LOGGER_COMPONENTS.UNIVERSAL_COMPONENT,n,{adConfig:r}),void f.rowrLogger.error(l.LOGGER_COMPONENTS.UNIVERSAL_COMPONENT,n,null,{adConfig:r})}var i,a=function(e,t,r){var o=l.PLACEHOLDER_ID_PREFIX+e;if(document.getElementById(o))return null;e=document.createElement("div");e.setAttribute("id",o),e.style.width=t.width,e.style.height=t.height,e.style.display="inline-block",e.style.overflow="auto",e.style.position="absolute",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.verticalAlign="middle",e.style.backgroundSize="cover",e.style.backgroundPosition="center center",e.style.backgroundRepeat="no-repeat";r=r.placeHolderContainerConfig||{};e.style.backgroundColor=function(e){return e.backgroundColor||g}(r),r.backgroundImage&&(e.style.backgroundImage="url("+r.backgroundImage+")");return e}(r.adId,o,t);a&&(a.classList.add(s.ROXOT_PLACEHOLDER_CLASS),e=a,null!==(o=(n=t).placeHolderContainerConfig)&&void 0!==o&&o.imageBlock&&((o=document.createElement("img")).setAttribute("src",n.placeHolderContainerConfig.imageBlock.src),o.style.width=n.placeHolderContainerConfig.imageBlock.width,o.style.height=n.placeHolderContainerConfig.imageBlock.height,e.style.backgroundImage="none",o.style.position="absolute",o.style.top="50%",o.style.left="50%",o.style.transform="translate(-50%, -50%)",e.insertAdjacentElement("afterbegin",o)),e=a,null!==(t=(o=t).placeHolderContainerConfig)&&void 0!==t&&t.backgroundImage||null!==(i=o.placeHolderContainerConfig)&&void 0!==i&&i.imageBlock||(i=function(e){var t=document.createElement("div"),e=e.noticeContainerConfig||{};return t.style.backgroundColor=function(e){return e.backgroundColor||p}(e),t.style.borderWidth="1px",t.style.borderStyle="solid",t.style.borderColor=function(e){return e.backgroundBorderColor||m}(e),t.style.borderRadius="7px",t.style.textAlign="center",t.style.minWidth="100px",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.padding="5px",t}(o),o=function(e){var t=document.createElement("span"),e=e.noticeMessageConfig||{};return t.innerText=function(e){return e.text||E}(e),t.style.color=function(e){return e.color||h}(e),t.style.fontSize=function(e){return e.fontSize||v}(e),t.style.lineHeight="22px",t}(o),i.insertAdjacentElement("afterbegin",o),e.insertAdjacentElement("afterbegin",i)),(o=d.adBlockBuilder.getRoxotAdContainerBlock(r))&&(e=o,(i=a).setAttribute(S,e.style.minWidth),i.setAttribute(b,e.style.minHeight),i.setAttribute(y,e.style.position),i.setAttribute(O,e.style.verticalAlign),e.style.minWidth=i.style.width,e.style.minHeight=i.style.height,e.style.position="relative",e.style.verticalAlign="top",o.insertAdjacentElement("afterbegin",a),A.placeholders[r.adId]=a))}function a(e){e=e.enabled;return e=void 0===e?!0:e}function C(e){var t=n.utils.safeMergeConfigs(t={},o.variables.wrapperConfig.universalPlaceHolder);return t=n.utils.safeMergeConfigs(t,e.options.universalPlaceHolder||{})}s.ROXOT_PLACEHOLDER_CLASS="roxot-placeholder";var A={placeholders:{}};r.dispatcherModule.on(l.WRAPPER_EVENTS.WATERFALL_LEVEL.REQUEST,function(e){var t=C(e.adConfig);a(t)&&(A.placeholders[e.adConfig.adId]||(f.rowrLogger.debug(l.LOGGER_COMPONENTS.UNIVERSAL_COMPONENT,"Create placeholder for tag",e.adConfig.adId,{adConfig:e.adConfig,placeHolderConfig:t}),i(e,t)))}),r.dispatcherModule.on(l.WRAPPER_EVENTS.AD_LEVEL.NO_SERVER,function(e){var t,r,o,n;a(n=C(e.adConfig))&&(t=e.eventAdData.adId,(r=A.placeholders[t])&&(f.rowrLogger.debug(l.LOGGER_COMPONENTS.UNIVERSAL_COMPONENT,"Delete placeholder for tag",e.adConfig.adId,{adConfig:e.adConfig,placeHolderConfig:n}),o=r,n=e.eventAdData,(e=d.adBlockBuilder.getRoxotAdContainerBlock(n))&&((n=o.getAttribute(S))?e.style.minWidth=n:e.style.removeProperty("min-width"),(n=o.getAttribute(b))?e.style.minHeight=n:e.style.removeProperty("min-height"),(n=o.getAttribute(O))?e.style.verticalAlign=n:e.style.removeProperty("vertical-align"),(o=o.getAttribute(y))?e.style.position=o:e.style.removeProperty("position")),r.remove(),delete A.placeholders[t]))})},{"../../constants/constants":49,"../../constants/variables":51,"../../utils/adBlockBuilder":133,"../../utils/utils":139,"../core/adservers/adServerUtil":73,"../core/dispatcherModule":84,"../core/loggers/errorLoggerModule":93,"../core/loggers/rowrLoggerModule":97}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../constants/variables"),n=e("../core/loggers/rowrLoggerModule"),i=e("../core/dispatcherModule"),a=e("../../constants/constants"),s=e("../core/loggers/errorLoggerModule");function l(){var e,t=o.variables.wrapperConfig.yandexMetricIntegration;t.enabled&&(((e=t).counterId?e.events?!e.events.ad_visible&&(n.rowrLogger.error(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,d("yandexMetricIntegration.ad_visible"),null,{yandexEventSenderSettings:e}),s.errorLogger.error(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,d("yandexMetricIntegration.ad_visible"),{yandexEventSenderSettings:e}),1):(n.rowrLogger.error(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,d("yandexMetricIntegration.events"),null,{yandexEventSenderSettings:e}),s.errorLogger.error(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,d("yandexMetricIntegration.events"),{yandexEventSenderSettings:e}),1):(n.rowrLogger.error(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,d("yandexMetricIntegration.counterId"),null,{yandexEventSenderSettings:e}),s.errorLogger.error(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,d("yandexMetricIntegration.counterId"),{yandexEventSenderSettings:e}),1))||(n.rowrLogger.log(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,"Yandex metric event sender init",null,{yandexMetricIntegration:t}),window.ym||function(e,t,r,o){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=+new Date,r=t.createElement("script"),o=t.getElementsByTagName("script")[0],r.async=1,r.src="https://mc.yandex.ru/metrika/tag.js",o.parentNode.insertBefore(r,o)}(window,document),i.dispatcherModule.on(a.WRAPPER_EVENTS.AD_LEVEL.VISIBLE,function(){!function(e,t){window.ym(e,"reachGoal",t);var r="Event sent - window.ym("+e+", 'reachGoal', "+t+")";n.rowrLogger.debug(a.LOGGER_COMPONENTS.YANDEX_EVENT_SENDER_COMPONENT,r,null,{counterId:e,eventId:t})}(t.counterId,t.events.ad_visible)})))}function d(e){return'yandexMetricIntegration is enabled for company, but property "'+e+'" not found in company wrapper config.'}i.dispatcherModule.on(a.WRAPPER_EVENTS.CONFIG_LEVEL.INIT,function(){l()})},{"../../constants/constants":49,"../../constants/variables":51,"../core/dispatcherModule":84,"../core/loggers/errorLoggerModule":93,"../core/loggers/rowrLoggerModule":97}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.POST_MESSAGE_EVENTS=r.RSE_DOMAIN=r.UN_FRIENDLY_IFRAME=r.FRIENDLY_IFRAME=r.PAYMENT_MODEL_TYPES=r.CUSTOM_EVENT_NAMES=r.EVENT_NAMES=r.AD_BLOCK_CLASS_NAME=r.CONTAINER_CLASS_NAME=r.HTML_CREATIVE_TYPE=r.VIDEO_CREATIVE_TYPE=r.BANNER_CREATIVE_TYPE=r.RS_VERSION=void 0,r.RS_VERSION="1.18.02",r.BANNER_CREATIVE_TYPE="banner",r.VIDEO_CREATIVE_TYPE="video",r.HTML_CREATIVE_TYPE="html",r.CONTAINER_CLASS_NAME="rse-container",r.AD_BLOCK_CLASS_NAME="rse-block",r.EVENT_NAMES={IMPRESSION:"impression",VISIBLE_IMPRESSION:"visible_impression",CLICK:"click",DYNAMIC_IMPRESSION:"dynamic_impression",VIDEO_START:"video_start",VIDEO_25:"viewed25",VIDEO_50:"viewed50",VIDEO_75:"viewed75",VIDEO_100:"viewed100",IMS:"ims"},r.CUSTOM_EVENT_NAMES={IMPRESSION:"onImpression",CLICK:"onClick",START:"onStart",VIDEO_25:"onViewed25",VIDEO_50:"onViewed50",VIDEO_75:"onViewed75",VIDEO_100:"onViewed100"},r.PAYMENT_MODEL_TYPES={CPM:"cpm",CPC:"cpc"},r.FRIENDLY_IFRAME="friendly",r.UN_FRIENDLY_IFRAME="unFriendly",r.RSE_DOMAIN="rse",r.POST_MESSAGE_EVENTS={SKIP:"skip",REFRESH:"refresh"}},{}],133:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adBlockBuilder=void 0;var s=e("../constants/constants"),l=e("../constants/variables"),d=e("../modules/core/loggers/errorLoggerModule"),u=e("./wrapperUtils"),c=e("../modules/core/loggers/romLoggerModule"),f=e("../modules/core/adservers/adServerUtil"),g=e("../modules/core/counterModule");function o(e){var t=f.adServerUtil.buildIframeId(e),t=document.getElementById(t);if(t)return t;e=document.getElementById(e);return e||null}r.adBlockBuilder={getRoxotAdContainerBlock:function(e){return document.querySelector('.roxotAdContainer[data-roxot-ad-container="'+e.adId+'"]')},getRoxotAdContentBlock:function(e){return o(e.waterfallConfig.currentRoxotAdContentId)},getRoxotAdContentBlockPrevious:function(e){var t=g.counterModule.getAdConfigCounterValue(e,s.COUNTERS.REQUEST_COUNT);return o(f.adServerUtil.buildAdContentId(e,t-1))},createAdHtmlBlocks:function(e,t,r){var o,n,i,a=(o=t,n=r,(i=document.createElement("div")).setAttribute("class",s.ROXOT_CLASSES.ROXOT_AD_CONTAINER),i.style.textAlign="center",i.style.verticalAlign="top",i.style.width="100%",i.style.lineHeight="0",i.dataset.roxotAdContainer=n,o.insertAdjacentElement("beforeend",i));a?(function(e,t){var r=t.style||{};for(n in r)r.hasOwnProperty(n)&&(e.style[n]=r[n]);var o=t.attributes||{};for(n in o)o.hasOwnProperty(n)&&e.setAttribute(n,o[n]);var n,i=t.data||{};for(n in i)i.hasOwnProperty(n)&&(e.dataset[n]=i[n])}(a,e),n=r,(i=(o=e).classes||[]).push(s.ROXOT_CLASSES.ROXOT_AD),(o=document.createElement("div")).setAttribute("class",i.join(" ")),o.setAttribute("id",n),o.style.minWidth="1px",o.style.minHeight="1px",o.style.position="relative",o.style.overflowX="hidden",o.style.verticalAlign="top",l.variables.wrapperConfig.isInlineBlock&&(o.style.display="inline-block"),a.appendChild(o),function(e,t,r){var o=t.placeholder;if(o){e.style.overflow="hidden";var t=o.label||"",n=document.createElement("div");n.setAttribute("class","roxotAdPlaceholder"),n.dataset.roxotAdPlaceholder=r,n.innerText=t,n.style.width="100%",n.style.textAlign="center",n.style.padding="5px";var i,a=o.style||{};for(i in a)a.hasOwnProperty(i)&&(n.style[i]=a[i]);o=o.insertPosition||"beforeend";e.insertAdjacentElement(o,n)}}(a,e,r)):d.errorLogger.error("Wrapper","Failed to ad roxotAdContainer to page.",{publisherPlacement:t,tag:e,adUnitId:r})},createRoxotAdContentBlock:function(e,t,r){var o=e.waterfallConfig.currentSspConfig,n=e.waterfallConfig.currentRoxotAdContentId,i=document.createElement("div");i.setAttribute("id",n),i.setAttribute("data-ad-id",e.adId),i.setAttribute("data-request-info",o.name+"-"+g.counterModule.getAdServerCounterValue(e,s.COUNTERS.REQUEST_COUNT)),i.style.overflow="hidden",i.style.position=r?"relative":"absolute",i.style.left="0",i.style.top="0";var a,o=o.classes||"";for(a in i.setAttribute("class","roxotAdContent "+o),t)i.style[a]=t[a];return i},deleteOldRoxotAdContentBlocks:function(e){var t=u.wrapperUtils.getRoxotAdBlock(document,e);if(t)for(var r,o,n,i=e.waterfallConfig.currentRoxotAdContentId,a=f.adServerUtil.buildIframeId(i),s=0,l=u.wrapperUtils.getChildren(t);s<l.length;s++){var d=l[s];o=i,n=a,(r=d).getAttribute("id")!==o&&r.getAttribute("id")!==n&&d.remove()}else c.romLogger.error("Div roxotAd not found. Can not delete old roxotAdContent blocks",{adConfig:e})},setPositionToCurrentSspAdContentBlock:function(e){var t=r.adBlockBuilder.getRoxotAdContentBlock(e);t?t.style.position="relative":c.romLogger.error("Ad content block not found. Can not set position relative.",{adConfig:e})}}},{"../constants/constants":49,"../constants/variables":51,"../modules/core/adservers/adServerUtil":73,"../modules/core/counterModule":82,"../modules/core/loggers/errorLoggerModule":93,"../modules/core/loggers/romLoggerModule":96,"./wrapperUtils":141}],134:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.adConfigUtils=void 0;var s=e("../constants/variables"),n=e("../constants/constants"),r=e("../modules/core/repositories/sspRepository"),i=e("../modules/core/timerManagerModule"),a=e("../modules/core/repositories/adConfigRepository"),l=e("../modules/core/loggers/rowrLoggerModule"),d=e("./placementConfigUtils"),u=e("../constants/limits");function c(e){return e&&e.sizes&&e.sizes[0]&&e.sizes[0][0]&&e.sizes[0][1]?{width:e.sizes[0][0],height:e.sizes[0][1]}:null}function f(e){var t=e.waterfallConfig.currentSspConfig||{},r=t.options||{},r={adId:e.adId,placementStatus:e.adHtmlBlockStatus,details:e.details,adStatus:e.adStatus,adServer:{name:t.name||void 0,alias:t.alias||void 0,points:r.points||0,kvPoints:r.kvPoints||0,cpm:e.waterfallConfig.currentCpm},size:o.adConfigUtils.getFirstSizes(e)};return s.variables.wrapperConfig.prebidAnalyticsIntegration.enabled&&(r.requestTimeout=o.adConfigUtils.getLimitValue(e,u.REQUEST_TIMEOUT_LIMIT_NAME),r.prebidAnalyticsIntegration=e.options.prebidAnalyticsIntegration||{},r.customKeyValues=e.options.customKeyValues||{}),s.variables.wrapperConfig.monetizationStatsIntegration.enabled&&(r.monetizationStatsIntegration=e.options.monetizationStatsIntegration||{}),r}o.adConfigUtils={buildWrapperExtendedEventData:function(e){return{eventAdData:f(e),adConfig:e}},buildWrapperEventData:function(e){return{eventAdData:f(e)}},buildEventAdDataForPlacement:function(e){return e?f(e):null},generate:function(e,t,r,o){return{adId:e,adUnitId:e,adStatus:n.AD_STATUSES.READY,sspsConfigs:t,options:r,details:o,adHtmlBlockStatus:n.AD_HTML_BLOCK_STATUSES.NOT_EXISTS,isAnonAd:0,isNeedRefresh:!1,displayedAds:{},visibleSeconds:0,waterfallConfig:{sspsStack:[],currentSspConfig:null,currentRoxotAdContentId:e,currentVisibleSeconds:0,currentCpm:0,adType:null}}},getLimitValue:function(e,t){var r,o=null===(o=null===(o=null===(o=e.waterfallConfig.currentSspConfig)||void 0===o?void 0:o.options)||void 0===o?void 0:o.limits)||void 0===o?void 0:o[t];if(void 0!==o)return o;for(var n=0,i=Object.keys(e.options.limits||{});n<i.length;n++){var a=i[n];if(a===(null===(r=e.waterfallConfig.currentSspConfig)||void 0===r?void 0:r.name)){a=null===(r=e.options.limits)||void 0===r?void 0:r[a][t];if(void 0!==a)return a}}var o=null===(o=null===(o=e.options.limits)||void 0===o?void 0:o.all)||void 0===o?void 0:o[t];if(void 0!==o)return o;o=null===(o=e.options.limits)||void 0===o?void 0:o[t];return void 0!==o?o:s.variables.wrapperConfig.limits.all[t]},getFirstSizes:function(e){var t=c(e.waterfallConfig.currentSspConfig);return(t=t||function(e){for(var t=0,r=e;t<r.length;t++){var o=c(r[t]);if(o)return o}return null}(e.waterfallConfig.sspsStack))?t:{width:0,height:0}},deleteNotExistsAdTag:function(t){r.sspRepository.getAll().forEach(function(e){e.destroyAd(t)}),i.timerManagerModule.clearByTag("ad-"+t.adUnitId);var e=(t.details||{}).roxotPlacementId;document.querySelector('[data-roxot-placement-id="'+e+'"]')||d.placementConfigUtils.deleteNotExistPlacement(e),a.adConfigRepository.delete(t.adUnitId),l.rowrLogger.debug(n.LOGGER_COMPONENTS.WATERFALL_COMPONENT,'Delete not exists ad tag "'+t.adUnitId+'"',null,{adConfigs:a.adConfigRepository.getAll()})}}},{"../constants/constants":49,"../constants/limits":50,"../constants/variables":51,"../modules/core/loggers/rowrLoggerModule":97,"../modules/core/repositories/adConfigRepository":105,"../modules/core/repositories/sspRepository":107,"../modules/core/timerManagerModule":113,"./placementConfigUtils":138}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.adDisplayStatusUpdater=void 0,r.adDisplayStatusUpdater={markAdAsDisplayed:function(e){e.displayedAds[e.waterfallConfig.currentRoxotAdContentId]=!0},markAdAsNotDisplayed:function(e){e.displayedAds[e.waterfallConfig.currentRoxotAdContentId]=!1},isAnyAdWasDisplayed:function(e){for(var t=0,r=Object.values(e.displayedAds);t<r.length;t++)if(r[t])return!0;return!1}}},{}],136:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatUtils=void 0;var n=e("../modules/core/adservers/adServerUtil"),s=e("../modules/core/timerManagerModule");function l(e){return"close-content-"+e.id}function d(e,t){var r=l(e);r=r,null!=(r=document.getElementById(r))&&r.remove(),e.insertAdjacentHTML("beforeend",t)}function u(e,t,r,o){e.onclick=function(){var e;return o?o():(e=document.getElementById(t))&&e.remove(),n.adServerUtil.onAdClose(r),!1}}function c(e,t){e.style.background="#000",d(e,'<span id="'+l(e)+'"  style="line-height: 1.3em; color: #fff; font-size: 0.7em;" >'+t+"</span>")}r.formatUtils={runCloseButtonTimer:function(t,r,o,n,i){void 0===i&&(i=void 0),c(t,r);var a="closeButtonTimer-"+o;s.timerManagerModule.replaceInterval(a,function(){return 0==r?(d(e=t,'<svg id="'+l(e)+'" width="100%" height="100%" viewBox="0 0 58 50" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g transform="matrix(1,0,0,1,-483,-91)"><g><g transform="matrix(1,0,0,1,-269,0)"><rect x="752" y="91" width="58" height="50"/></g><g transform="matrix(1,0,0,1,-269,2.09746)"><g transform="matrix(0.951795,-0.951272,0.768809,0.769231,-46.5914,761.139)"><rect x="773" y="104" width="4" height="26" style="fill:white;"/></g><g transform="matrix(0.951272,0.951795,-0.769231,0.768809,133.764,-713.689)"><rect x="773" y="104" width="4" height="26" style="fill:white;"/></g></g></g></g></svg>'),u(t,o,n,i),void s.timerManagerModule.clearTimerIfExists(a)):(c(t,r),void r--);var e},1e3,[])},buildCloseWithStyles:function(e){var t=document.createElement("div");return t.style.cursor="pointer",t.style.color="#000",t.style.background="#000",t.style.lineHeight="0px",t.style.height=e+"px",t.style.width=e+"px",t.style.display="block",t.style.position="absolute",t.style.textAlign="center",t.style.fontSize="21px",t.style.zIndex="100001",t.style.right="0",t}}},{"../modules/core/adservers/adServerUtil":73,"../modules/core/timerManagerModule":113}],137:[function(e,t,r){"use strict";var o=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},i=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.geoSpecificUtils=void 0;var a=e("../constants/variables"),s=e("../constants/constants"),l=e("../modules/core/loggers/rowrLoggerModule");r.geoSpecificUtils={defineRegion:function(){var e=this;return l.rowrLogger.debug(s.LOGGER_COMPONENTS.GEO_SPECIFIC,"Request geo","",{}),new Promise(function(n){return o(e,void 0,void 0,function(){var o;return i(this,function(e){switch(e.label){case 0:return[4,fetch(a.variables.romConfig.geoSpecificUrl)];case 1:return[4,e.sent().json()];case 2:return o=e.sent(),t=o.data.region,localStorage&&(localStorage.setItem(s.LOCAL_STORAGE_KEYS.SPECIFIC.GEO_SPECIFIC,t),r=new Date,(t=new Date).setDate(r.getDate()+1),localStorage.setItem(s.LOCAL_STORAGE_KEYS.SPECIFIC.GEO_SPECIFIC_TIME,t.getTime().toString())),l.rowrLogger.debug(s.LOGGER_COMPONENTS.GEO_SPECIFIC,"Geo response: "+o.data.region,"",{}),n(o.data.region),[2]}var t,r})})})},getCacheRegion:function(){if(!localStorage)return null;var e=localStorage.getItem(s.LOCAL_STORAGE_KEYS.SPECIFIC.GEO_SPECIFIC_TIME);if(!e)return null;var t=new Date;if(Number(e)<t.getTime())return null;t=localStorage.getItem(s.LOCAL_STORAGE_KEYS.SPECIFIC.GEO_SPECIFIC);return t?(l.rowrLogger.debug(s.LOGGER_COMPONENTS.GEO_SPECIFIC,"Geo cache region: "+t,"",{}),t):null}}},{"../constants/constants":49,"../constants/variables":51,"../modules/core/loggers/rowrLoggerModule":97}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.placementConfigUtils=void 0;var o=e("../modules/core/repositories/placementConfigRepository"),n=e("../modules/core/loggers/rowrLoggerModule"),i=e("../constants/constants");r.placementConfigUtils={deleteNotExistPlacement:function(e){o.placementConfigRepository.delete(e),n.rowrLogger.debug(i.LOGGER_COMPONENTS.WATERFALL_COMPONENT,'Delete not exists placement "'+e+'"',null,{placementConfigs:o.placementConfigRepository.getAll()})},findLastAdConfig:function(e){return e.lastAdConfig},saveLastAdConfig:function(e,t){e.lastAdConfig=t}}},{"../constants/constants":49,"../modules/core/loggers/rowrLoggerModule":97,"../modules/core/repositories/placementConfigRepository":106}],139:[function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(e,a,s,l){return new(s=s||Promise)(function(r,t){function o(e){try{i(l.next(e))}catch(e){t(e)}}function n(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(o,n)}i((l=l.apply(e,a||[])).next())})},l=function(r,o){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=o.call(r,s)}catch(e){t=[6,e],i=0}finally{n=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(i,"__esModule",{value:!0}),i.utils=void 0;var d=e("../constants/variables"),n=e("../modules/core/loggers/romLoggerModule"),u=e("../modules/core/loggers/errorLoggerModule"),r=e("../constants/constants"),c=e("./geoSpecificUtils"),o=e("uuid");function f(e,t){var r,o,n=!1,i=2,a=!1,s=!1;function l(){--i||(n=!a&&s)}"function"==typeof t&&(e+="?ch=*&rn=*",r=11*Math.random(),(o=new Image).onload=l,o.onerror=function(){a=!0,l()},o.src=e.replace(/\*/,String(1)).replace(/\*/,String(r)),(o=new Image).onload=l,o.onerror=function(){s=!0,l()},o.src=e.replace(/\*/,String(2)).replace(/\*/,String(r)),function e(t,r){0==i||1e3<r?t(0==i&&n):setTimeout(function(){e(t,2*r)},2*r)}(t,250))}i.utils={isSupportEventType:function(e,t){return-1!==t.indexOf(e.event)},isCorrectPlacementId:function(e){return!!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(e)||(console.error('rom.displayPlacement: Placement id "'+e+'" is invalid. Correct placement id format: "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".'),!1)},loadScript:function(e,t){void 0===t&&(t=null);var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=function(){t&&t.call(null)};e=document.getElementsByTagName("head")[0];e.insertBefore(r,e.firstChild)},loadCss:function(e,t){void 0===t&&(t=null);var r=document.createElement("link");r.rel="stylesheet",r.crossOrigin="anonymous",r.referrerPolicy="no-referrer",r.href=e,r.onload=function(){t&&t.call(null)};e=document.getElementsByTagName("head")[0];e.insertBefore(r,e.firstChild)},generateUuid:function(){return o.v4()},generateId:function(e){return e+Math.floor(1e5*Math.random())},getRandomNumber:function(e){return 1+Math.floor(Math.random()*e)},getPlacementConfigUrl:function(o,n){return void 0===n&&(n=void 0),s(this,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:return n=n||d.variables.romConfig.placementConfigTemplate,[4,function(o){return s(this,void 0,void 0,function(){var t=this;return l(this,function(e){return[2,new Promise(function(r){return s(t,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return(d.variables.romConfig.isLanguageSpecific&&(o=i.utils.addQueryParam(o,"lng",decodeURIComponent(d.variables.romConfig.language))),d.variables.romConfig.isBrowserSpecific&&(o=i.utils.addQueryParam(o,"browser",decodeURIComponent(d.variables.romConfig.browser))),d.variables.romConfig.isOsSpecific&&(o=i.utils.addQueryParam(o,"os",decodeURIComponent(d.variables.romConfig.os))),d.variables.romConfig.isDeviceTypeSpecific&&(o=i.utils.addQueryParam(o,"device",decodeURIComponent(d.variables.romConfig.device))),d.variables.romConfig.isGeoSpecific)?c.geoSpecificUtils.getCacheRegion()?(t=c.geoSpecificUtils.getCacheRegion(),[3,3]):[3,1]:[3,4];case 1:return[4,c.geoSpecificUtils.defineRegion()];case 2:t=e.sent(),e.label=3;case 3:o=i.utils.addQueryParam(o,"geo",t),e.label=4;case 4:return d.variables.romConfig.isGetParamSpecific&&(t=new URLSearchParams(window.location.search),o=i.utils.addQueryParam(o,"getParam",null!==(t=t.get("getParam"))&&void 0!==t?t:"")),r(o),[2]}})})})]})})}(t=n.replace("__PLACEMENT_ID__",o))];case 1:return t=e.sent(),d.variables.romConfig.isAcceptableAdsEnabled?[4,i.utils.checkAdBlockPlus()]:[3,3];case 2:r=e.sent(),t=i.utils.addQueryParam(t,"isABPUser",String(r)),e.label=3;case 3:return[2,t]}})})},jsonAjax:function(t,r){var o=new XMLHttpRequest;o.open("GET",t),o.onload=function(){if(200!==o.status)return n.romLogger.error("Error Ajax request to "+t+". Status: "+o.status+": "+o.statusText),void u.errorLogger.error("Manager","Error Ajax request to "+t+". Status: "+o.status+": "+o.statusText);var e=null;try{e=JSON.parse(o.response)}catch(e){return n.romLogger.error("Error: Ajax request to "+t+". Status: "+o.status+": "+o.statusText+". Cannot parse response. "+e.message),void u.errorLogger.error("Manager","Error: Cannot parse Ajax response from "+t+". Status: "+o.status+": "+o.statusText)}r(e)},o.onerror=function(){n.romLogger.error("Error Ajax request to "+t+". Status: "+o.status+": "+o.statusText),u.errorLogger.error("Manager","Error Ajax request to "+t+". Status: "+o.status+": "+o.statusText)},o.send()},getOptionFromConfigs:function(e,t,r){for(var o=0,n=t;o<n.length;o++){var i=n[o];if(i.hasOwnProperty(e))return i[e]}return r},isCorrectScreenWidth:function(e){return!!(e&&window.innerWidth<=e)},isCorrectTimeout:function(e,t){return t+60*e*1e3<=Date.now()},isEventMatchesPlacement:function(e,t){return e.eventAdData.details.placementId===t},safeMergeConfigs:function(e,t){var r=this.deepClone(e),e=this.deepClone(t),t={};return this.mergeConfigs(t,r),this.mergeConfigs(t,e),t},mergeConfigs:function(e,t){for(var r=0,o=Object.keys(t);r<o.length;r++){var n=o[r];!e.hasOwnProperty(n)||"object"!==a(t[n])||Array.isArray(t[n])?e[n]=t[n]:this.mergeConfigs(e[n],t[n])}},deepCloneJson:function(e){return JSON.parse(JSON.stringify(e))},deepClone:function(e){var t,r={};for(t in e)"object"!==a(e[t])?r[t]=e[t]:r[t]=this.deepClone(e[t]);return r},randomInteger:function(e,t){e+=Math.random()*(t+1-e);return Math.floor(e)},checkAdBlockPlus:function(){return new Promise(function(t){n.romLogger.log("Acceptable Ads enabled. Checking for adBlockPlus...",{managerConfig:d.variables.romConfig}),f("//"+(window.location.host===r.DEV_HOST?r.DEV_HOST:r.PROD_HOST)+r.AD_BLOCK_PIXEL_PATH,function(e){n.romLogger.log("Ad Block is "+(e?"enabled":"disabled or site not included in Exception list")+". Get param added to placement config url."),t(e)})})},addQueryParam:function(e,t,r){return e+=-1===e.indexOf("?")?"?":"&",e+=t+"="+r},replaceAll:function(e,t,r){return e.replace(new RegExp(t,"g"),r)}}},{"../constants/constants":49,"../constants/variables":51,"../modules/core/loggers/errorLoggerModule":93,"../modules/core/loggers/romLoggerModule":96,"./geoSpecificUtils":137,uuid:33}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waterfallUtils=void 0;var s=e("../modules/core/counterModule"),l=e("../modules/core/adservers/adServerUtil"),d=e("../modules/core/loggers/rowrLoggerModule");r.waterfallUtils={resetWaterfallConfig:function(e){var t=e.sspsConfigs.slice(0);e.waterfallConfig.sspsStack=this.filterSspsStack(e,t),e.waterfallConfig.currentSspConfig=null,e.waterfallConfig.currentRoxotAdContentId=e.adId,e.waterfallConfig.currentVisibleSeconds=0,e.waterfallConfig.adType=null},filterSspsStack:function(i,e){var a=[];return e.forEach(function(e,t){return t+=1,(e.options||{}).group?void(!function(e,t){for(var r=t.options||{},o=0,n=e;o<n.length;o++)if((n[o].options||{}).group===r.group)return 1}(a,e)?(r=i,(n=(o=e).options||{}).requestLimit&&n.requestLimit<=s.counterModule.getTagRequestCounterValue(r,o.name,l.adServerUtil.extractTagIdentifier(o))?d.rowrLogger.debug("waterfallUtils - Group",'Config "'+e.name+"-"+t+'" have been removed from sspsStack - is over request limit',[i.details.formatTitle],{result:a,sspConfig:e}):(d.rowrLogger.debug("waterfallUtils - Group",'Config "'+e.name+"-"+t+'" have been added to sspsStack - group checks passed successfully.',[i.details.formatTitle],{result:a,sspConfig:e}),a.push(e))):d.rowrLogger.debug("waterfallUtils - Group",'Config "'+e.name+"-"+t+'" have been removed from sspsStack - already exists config from the same group',[i.details.formatTitle],{result:a,sspConfig:e})):(d.rowrLogger.debug("waterfallUtils - Group",'Config "'+e.name+"-"+t+'" have been added to sspsStack - has no group.',[i.details.formatTitle],{result:a,sspConfig:e}),void a.push(e));var r,o,n}),a}}},{"../modules/core/adservers/adServerUtil":73,"../modules/core/counterModule":82,"../modules/core/loggers/rowrLoggerModule":97}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wrapperUtils=void 0;var o=e("./adConfigUtils"),n=e("../constants/constants"),i=e("../modules/core/dispatcherModule"),a=e("../modules/core/markers/wrapperMarkers"),s=e("../modules/core/repositories/adConfigRepository"),l=e("../constants/limits");r.wrapperUtils={getRoxotAdBlock:function(e,t){return e.getElementById(t.adId)},getChildren:function(e){for(var t=[],r=0;r<e.children.length;r++)t.push(e.children[r]);return t},isVisibleAd:function(e){return this.calculateVisibleInfo(e).visiblePercentage>=o.adConfigUtils.getLimitValue(e,l.VISIBLE_PERCENTAGE_LIMIT_NAME)},calculateVisibleInfo:function(e){var t=window.pageYOffset,r=t+window.innerHeight,o=window.pageXOffset,n=o+window.innerWidth,i=document.getElementById(e.adId);if(!i)return{screenTop:t,screenBottom:r,screenLeft:o,screenRight:n,adTop:0,adBottom:0,adLeft:0,adRight:0,visibleHeight:0,visibleWidth:0,visibleSqr:0,adSqr:0,visiblePercentage:0};var a=i.getBoundingClientRect(),s=a.height,l=a.width,d=t+a.top,u=r+a.bottom,c=a.left,f=a.right,e=Math.min(u,r)-Math.max(d,t),i=Math.min(f,n)-Math.max(c,o),a=e*i,s=s*l,l=Math.abs(s?a/s:0);return{screenTop:t,screenBottom:r,screenLeft:o,screenRight:n,adTop:d,adBottom:u,adLeft:c,adRight:f,visibleHeight:e,visibleWidth:i,visibleSqr:a,adSqr:s,visiblePercentage:l=e<0||i<0?-l:l}},refreshAllActiveAdBlocks:function(){for(var e=0,t=s.adConfigRepository.getAll();e<t.length;e++){var r=t[e];this.refreshActiveAdBlock(document,r)}},refreshActiveAdBlock:function(e,t){this.updateAdBlockStatus(e,t)&&a.wrapperMarkers.markAsNeedRefresh(t)},updateAdBlockStatus:function(e,t){e=this.getRoxotAdBlock(e,t);return e?e.hidden?(t.adHtmlBlockStatus===n.AD_HTML_BLOCK_STATUSES.HIDDEN||(t.adHtmlBlockStatus=n.AD_HTML_BLOCK_STATUSES.HIDDEN,i.dispatcherModule.dispatch(n.WRAPPER_EVENTS.PLACEMENT_LEVEL.HIDDEN,o.adConfigUtils.buildWrapperEventData(t))),!1):t.adHtmlBlockStatus!==n.AD_HTML_BLOCK_STATUSES.ACTIVE&&(t.adHtmlBlockStatus=n.AD_HTML_BLOCK_STATUSES.ACTIVE,i.dispatcherModule.dispatch(n.WRAPPER_EVENTS.PLACEMENT_LEVEL.ACTIVE,o.adConfigUtils.buildWrapperEventData(t)),!0):(t.adHtmlBlockStatus===n.AD_HTML_BLOCK_STATUSES.NOT_EXISTS||(t.adHtmlBlockStatus=n.AD_HTML_BLOCK_STATUSES.NOT_EXISTS,i.dispatcherModule.dispatch(n.WRAPPER_EVENTS.PLACEMENT_LEVEL.NOT_EXISTS,o.adConfigUtils.buildWrapperEventData(t))),!1)}}},{"../constants/constants":49,"../constants/limits":50,"../modules/core/dispatcherModule":84,"../modules/core/markers/wrapperMarkers":101,"../modules/core/repositories/adConfigRepository":105,"./adConfigUtils":134}]},{},[84,128,129,118,120,119,126,125,121,130,131,124,122,111]);