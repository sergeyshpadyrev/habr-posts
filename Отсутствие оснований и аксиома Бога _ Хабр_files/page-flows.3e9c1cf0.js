"use strict";(self["webpackChunkhabr_web"]=self["webpackChunkhabr_web"]||[]).push([[1231],{65913:(t,e,s)=>{s.d(e,{Z:()=>h});var a=s(66252),i=s(56612);const r={class:"tm-companies-rating"},n=["innerHTML"],o={class:"tm-companies-rating__rating"};function l(t,e,s,l,u,m){const p=(0,a.up)("TMEntityImage"),_=(0,a.up)("router-link"),g=(0,a.up)("TMBlock");return(0,a.wg)(),(0,a.j4)(g,{title:t.msg("TOP_COMPANIES_BLOCK_TITLE")},{default:(0,a.w5)((()=>[(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.companies,((e,s)=>((0,a.wg)(),(0,a.j4)(_,{key:s,class:"tm-companies-rating__item",to:{name:"ARTICLES_LIST_BY_COMPANY",params:{name:e.alias,hl:t.$route.params.hl}}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{alias:e.alias,class:"tm-companies-rating__avatar",image:e.imageUrl,size:36,type:"company"},null,8,["alias","image"]),(0,a._)("span",{class:"tm-companies-rating__name",innerHTML:e.titleHtml},null,8,n),(0,a._)("span",o,(0,i.zw)(e.statistics.rating),1)])),_:2},1032,["to"])))),128))])])),footer:(0,a.w5)((()=>[(0,a.Wm)(_,{class:"tm-block-extralink",to:{name:"COMPANIES"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.msg("COMPANIES_ALL")),1)])),_:1})])),_:1},8,["title"])}var u=s(68829),m=s(67216);const p={name:"TMCompaniesRatingBlock",components:{TMBlock:u.Z,TMEntityImage:m.Z},props:{companies:{type:Array,default:null}}};var _=s(83744);const g=(0,_.Z)(p,[["render",l]]),h=g},71593:(t,e,s)=>{s.d(e,{Z:()=>D});var a=s(66252),i=s(56612);const r=["innerHTML"],n={key:0,class:"tm-hubs-list__sorting-panel"},o={class:"tm-hubs-list"},l={class:"tm-hubs-list__hub"},u={class:"tm-hubs-list__hub-rating"},m={class:"tm-hubs-list__hub-subscribers"};function p(t,e,s,p,_,g){const h=(0,a.up)("TMPlaceholder"),c=(0,a.up)("TMEmptyPlaceholder"),S=(0,a.up)("TMNavigationSorting"),T=(0,a.up)("TMHubSnippet"),d=(0,a.up)("TMSvgImg"),b=(0,a.up)("TMPagination");return(0,a.wg)(),(0,a.iD)("div",null,[t.isLoading?((0,a.wg)(),(0,a.j4)(h,{key:0,class:"tm-hubs-list__placeholder",times:7,type:"categories"})):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[t.showEmptyPlaceholder?((0,a.wg)(),(0,a.j4)(c,{key:0},{default:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"empty",{},(()=>[(0,a._)("span",{innerHTML:t.msg("SEARCH_EMPTY_HUBS")},null,8,r)]))])),_:3})):(0,a.kq)("",!0),t.showEmptyPlaceholder?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[t.isDesktop&&t.sortingOptions.length?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(S,{options:t.sortingOptions,sort:t.defaultSort},null,8,["options","sort"])])):(0,a.kq)("",!0),(0,a._)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.currentHubsList,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"tm-hubs-list__category-wrapper"},[(0,a._)("div",l,[(0,a.Wm)(T,{hub:e,"show-common-tags":t.isDesktop},null,8,["hub","show-common-tags"]),(0,a._)("div",u,[t.isMobile?((0,a.wg)(),(0,a.j4)(d,{key:0,id:"rating",class:"tm-hubs-list__hub-icon tm-hubs-list__hub-icon_rating"})):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,i.zw)(e.statistics.rating),1)]),(0,a._)("div",m,[t.isMobile?((0,a.wg)(),(0,a.j4)(d,{key:0,id:"subscribers",class:"tm-hubs-list__hub-icon tm-hubs-list__hub-icon_subscribers"})):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,i.zw)(t.abbreviateNumber(e.statistics.subscribersCount)),1)])])])))),128))]),(0,a.Wm)(b,{"route-name":t.paginationRouteName,"total-pages":t.currentPagesCount},null,8,["route-name","total-pages"])],64))],64))])}var _=s(59810);const g={class:"tm-hub"},h={class:"tm-hub__info"},c=["innerHTML"],S=["title"],T=["innerHTML"],d={key:0,class:"tm-hubs-list__hub-tags"};function b(t,e,s,r,n,o){const l=(0,a.up)("TMEntityImage"),u=(0,a.up)("TMHubLink"),m=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(u,{class:"tm-hub__userpic-link",hub:s.hub},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{alias:s.hub.alias,image:s.hub.imageUrl,type:"hub"},null,8,["alias","image"])])),_:1},8,["hub"]),(0,a._)("div",h,[(0,a._)("div",null,[(0,a.Wm)(u,{class:(0,i.C_)(["tm-hub__title",{"tm-hub__title_subscribed":s.hub.relatedData&&s.hub.relatedData.isSubscribed}]),hub:s.hub},{default:(0,a.w5)((()=>[(0,a._)("span",{innerHTML:s.hub.titleHtml},null,8,c)])),_:1},8,["class","hub"]),s.hub.isProfiled?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"tm-hub__profiled",title:t.msg("PROFILED_HUB")}," * ",8,S)):(0,a.kq)("",!0)]),(0,a._)("div",{class:"tm-hub__description",innerHTML:s.hub.descriptionHtml},null,8,T),s.showCommonTags&&s.hub.commonTags&&s.hub.commonTags.length?((0,a.wg)(),(0,a.iD)("div",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.hub.commonTags,(t=>((0,a.wg)(),(0,a.j4)(m,{key:t,class:"tm-hubs-list__hub-tag",to:o.searchTagRoute(t)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t),1)])),_:2},1032,["to"])))),128))])):(0,a.kq)("",!0)])])}var L=s(67216),w=s(92994);const A={name:"TMHubSnippet",components:{TMHubLink:w.Z,TMEntityImage:L.Z},props:{hub:{type:Object,required:!0},showCommonTags:{type:Boolean}},methods:{searchTagRoute(t){return{name:"SEARCH_QUERY_RESULTS",query:{q:`[${t}]`,target_type:"posts",order:"relevance"}}}}};var E=s(83744);const O=(0,E.Z)(A,[["render",b]]),N=O;var k=s(97018),v=s(17542),I=s(45151),y=s(31976),P=s(84183),R=s(72073),C=s(85725),M=s(87934);const f={name:"TMHubsListPresenter",components:{TMEmptyPlaceholder:_.Z,TMHubSnippet:N,TMNavigationSorting:k.Z,TMPagination:v.Z,TMPlaceholder:I.Z,TMSvgImg:y.Z},props:{sortingOptions:{type:Array,default:()=>[]},defaultSort:{type:String,default:"rating"}},data(){return{routeKey:(0,C.Z)(this.$route)}},computed:{isMobile(){return(0,P.s)().isMobile},isDesktop(){return(0,P.s)().isDesktop},isLoading(){return(0,R.X)().isLoading},currentHubsList(){return(0,R.X)().getCurrentHubsList(this.routeKey)},currentPagesCount(){return(0,R.X)().pagesCount[this.routeKey]},paginationRouteName(){return-1!==this.$route.name.indexOf("_PAGES")?this.$route.name:`${this.$route.name}_PAGES`},showEmptyPlaceholder(){return this.currentHubsList&&!this.currentHubsList.length||!this.currentHubsList}},methods:{abbreviateNumber(t){return(0,M.O)(t)}}},H=(0,E.Z)(f,[["render",p]]),D=H},34634:(t,e,s)=>{s.d(e,{Z:()=>p});var a=s(66252),i=s(56612);const r={class:"tm-navigation-panel"},n={key:0,class:"tm-navigation-panel__title"};function o(t,e,s,o,l,u){return(0,a.wg)(),(0,a.iD)("div",r,[s.title?((0,a.wg)(),(0,a.iD)("div",n,(0,i.zw)(s.title),1)):(0,a.kq)("",!0),(0,a.WI)(t.$slots,"default")])}const l={name:"TMNavigationPanel",props:{title:{type:String,default:null}}};var u=s(83744);const m=(0,u.Z)(l,[["render",o]]),p=m},36518:(t,e,s)=>{s.r(e),s.d(e,{default:()=>R});var a=s(66252),i=s(56612);const r={class:"tm-page__top","data-test-id":"page-top"},n={key:0,class:"tm-suggest-button",href:"https://tmtm.ru/services/corpblog/"},o={key:0,class:"tm-navigation-filter"};function l(t,e,s,l,u,m){const p=(0,a.up)("TMAdfoxBanner"),_=(0,a.up)("router-link"),g=(0,a.up)("TMSectionName"),h=(0,a.up)("TMTabs"),c=(0,a.up)("TMRssButton"),S=(0,a.up)("TMNavigationFilters"),T=(0,a.up)("TMNavigationPanel"),d=(0,a.up)("TMNavigationSearch"),b=(0,a.up)("router-view"),L=(0,a.up)("TMPage");return(0,a.wg)(),(0,a.j4)(L,null,{default:(0,a.w5)((()=>[l.userShowAdv&&m.isMobile?((0,a.wg)(),(0,a.j4)(p,{key:0,"adfox-id":"169815559787254866","div-id":"topBanner",params:{pp:"g",ps:"fnps",p2:"iqny"},variant:"narrow"})):(0,a.kq)("",!0),(0,a._)("div",r,[(0,a.Wm)(g,{name:t.msg("NAV_FLOWS_ALL")},{default:(0,a.w5)((()=>[m.showSuggestCompanyButton?((0,a.wg)(),(0,a.iD)("a",n,(0,i.zw)(t.msg("SUGGEST_COMPANY")),1)):(0,a.kq)("",!0),m.showSuggestHubButton?((0,a.wg)(),(0,a.j4)(_,{key:1,class:"tm-suggest-button",to:m.suggestHubRoute},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.msg("SUGGEST_HUB")),1)])),_:1},8,["to"])):(0,a.kq)("",!0)])),_:1},8,["name"]),(0,a.Wm)(h,{class:"tm-tabs_page-header",tabs:m.tabs},null,8,["tabs"]),m.isArticleFilterShown?((0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(S,{"extra-options":m.filterExtraOptions,options:m.filterOptions,onApplyFilter:m.saveFlowFilter},{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1},8,["extra-options","options","onApplyFilter"])])):!m.isArticleFilterShown&&m.hasRss?((0,a.wg)(),(0,a.j4)(T,{key:1,title:t.msg("NAV_TITLE_LATEST")},{default:(0,a.w5)((()=>[(0,a.Wm)(c)])),_:1},8,["title"])):(0,a.kq)("",!0),m.showNavigationSearch?((0,a.wg)(),(0,a.j4)(d,{key:2})):(0,a.kq)("",!0)]),(0,a.Wm)(b)])),sidebar:(0,a.w5)((()=>[(0,a.Wm)(b,{name:"sidebar"})])),_:1})}var u=s(22201),m=s(67476),p=s(82590),_=s(76418),g=s(34634),h=s(13067),c=s(97521),S=s(30373),T=s(22062),d=s(46736),b=s(89554),L=s(36134),w=s(29612),A=s(84183),E=s(71197),O=s(73833),N=s(44383),k=s(68171),v=s(88447);const I={components:{TMAdfoxBanner:p.Z,TMNavigationFilters:_.Z,TMNavigationPanel:g.Z,TMNavigationSearch:h.Z,TMPage:c.Z,TMSectionName:T.Z,TMTabs:d.Z,TMRssButton:S.Z},setup(){const t=(0,u.yj)(),e=(0,b.f)(),s=(0,w.g)(),i=(0,E.q)(),{langOptions:r}=(0,L.Q)(),{user:n,userShowAdv:o}=(0,m.Jk)(i),l=(0,a.Fl)((()=>{if(!n.value)return"ARTICLES_LIST_TOP_PERIOD"!==t.name&&"ARTICLES_LIST_ALL_SCORE"!==t.name;const s=(0,v.buildCookieName)({flowName:"all"}),a=e.get(s);return!a||"/articles/"===a})),p=(0,a.Fl)((()=>{if(!n.value)return"NEWS_LIST_TOP_PERIOD"!==t.name&&"NEWS_LIST_ALL_SCORE"!==t.name;const s=(0,v.buildCookieName)({flowName:"all",isNews:!0}),a=e.get(s);return!a||"/news/"===a})),{updates:_}=(0,m.Jk)(s);return{user:n,userShowAdv:o,isShowCountNewNews:p,isShowCountNewArticles:l,updates:_,langOptions:r}},computed:{isMobile(){return(0,A.s)().isMobile},isFlEnglish(){return"en"===this.langOptions.fl},showSuggestCompanyButton(){return-1!==["COMPANIES","COMPANIES_PAGES"].indexOf(this.$route.name)},showSuggestHubButton(){return-1!==["HUBS","HUBS_PAGES"].indexOf(this.$route.name)},suggestHubRoute(){return{name:"FEEDBACK",query:{type:8}}},hasRss(){return Boolean(this.$route.meta.rssLink)},isNewsRoute(){return this.$route.matched.some((t=>t.name&&t.name.startsWith("NEWS")))},isPostsRoute(){return this.$route.matched.some((t=>t.name&&t.name.startsWith("POSTS")))},isShowCountNewPosts(){return!0},filterOptions(){return this.isPostsRoute?this.postsFilterOptions:this.isNewsRoute?this.newsFilterOptions:this.articlesFilterOptions},addExtraOptions(){return!this.isNewsRoute&&!this.isPostsRoute},filterExtraOptions(){return this.addExtraOptions?(0,O.r)(this.msg):[]},articlesFilterOptions(){return[{label:this.msg("NAV_NEW"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_RATING"),children:[{label:this.msg("NAV_ALL"),value:"ARTICLES_LIST_ALL",params:{}},{label:"≥0",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"0"}},{label:"≥10",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"10"}},{label:"≥25",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"25"}},{label:"≥50",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"50"}},{label:"≥100",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"100"}}]},{label:this.msg("NAV_BEST"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_PERIOD"),children:[{label:this.msg("NAV_DAY"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"daily"}},{label:this.msg("NAV_WEEK"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"weekly"}},{label:this.msg("NAV_MONTH"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"monthly"}},{label:this.msg("NAV_YEAR"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"yearly"}},{label:this.msg("NAV_ALLTIME"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"alltime"}}]}]},newsFilterOptions(){return[{label:this.msg("NAV_NEW"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_RATING"),children:[{label:this.msg("NAV_ALL"),value:"NEWS_LIST_ALL",params:{}},{label:"≥0",value:"NEWS_LIST_ALL_SCORE",params:{score:"0"}},{label:"≥10",value:"NEWS_LIST_ALL_SCORE",params:{score:"10"}},{label:"≥25",value:"NEWS_LIST_ALL_SCORE",params:{score:"25"}},{label:"≥50",value:"NEWS_LIST_ALL_SCORE",params:{score:"50"}},{label:"≥100",value:"NEWS_LIST_ALL_SCORE",params:{score:"100"}}]},{label:this.msg("NAV_BEST"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_PERIOD"),children:[{label:this.msg("NAV_DAY"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"daily"}},{label:this.msg("NAV_WEEK"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"weekly"}},{label:this.msg("NAV_MONTH"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"monthly"}},{label:this.msg("NAV_YEAR"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"yearly"}},{label:this.msg("NAV_ALLTIME"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"alltime"}}]}]},postsFilterOptions(){return[{label:this.msg("NAV_NEW"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_RATING"),children:[{label:this.msg("NAV_ALL"),value:"POSTS_ALL",params:{}},{label:"≥0",value:"POSTS_ALL_SCORE",params:{score:"0"}},{label:"≥10",value:"POSTS_ALL_SCORE",params:{score:"10"}},{label:"≥25",value:"POSTS_ALL_SCORE",params:{score:"25"}},{label:"≥50",value:"POSTS_ALL_SCORE",params:{score:"50"}},{label:"≥100",value:"POSTS_ALL_SCORE",params:{score:"100"}}]},{label:this.msg("NAV_BEST"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_PERIOD"),children:[{label:this.msg("NAV_DAY"),value:"POSTS_TOP_PERIOD",params:{period:"daily"}},{label:this.msg("NAV_WEEK"),value:"POSTS_TOP_PERIOD",params:{period:"weekly"}},{label:this.msg("NAV_MONTH"),value:"POSTS_TOP_PERIOD",params:{period:"monthly"}},{label:this.msg("NAV_YEAR"),value:"POSTS_TOP_PERIOD",params:{period:"yearly"}},{label:this.msg("NAV_ALLTIME"),value:"POSTS_TOP_PERIOD",params:{period:"alltime"}}]}]},showNavigationSearch(){return this.$route.meta.hasSearch},tabs(){const t="ru"!==this.$route.params.hl||this.isFlEnglish?[]:[{title:this.msg("NAV_COMPANIES"),route:{name:"COMPANIES"}}];return[{title:this.msg("NAV_ARTICLES"),route:{name:"ARTICLES_LIST_ALL"},children:(0,N.nz)(this.articlesFilterOptions),countNew:this.isShowCountNewArticles?this.updates.countPosts:0},{title:this.msg("NAV_POSTS"),route:{name:"POSTS_ALL"},children:(0,N.nz)(this.postsFilterOptions),countNew:this.isShowCountNewPosts?this.updates.countThreads:0},{title:this.msg("NAV_NEWS"),route:{name:"NEWS_LIST_ALL"},children:(0,N.nz)(this.newsFilterOptions),countNew:this.isShowCountNewNews?this.updates.countNews:0},{title:this.msg("NAV_HUBS"),route:{name:"HUBS"}},{title:this.msg("NAV_AUTHORS"),route:{name:"USERS"}},...t]},isArticleFilterShown(){return!0===this.$route.meta.showFilter},needSaveHomePage(){return["ARTICLES_LIST","NEWS_LIST","POSTS"].some((t=>this.$route.name.startsWith(t)))&&!this.$route.name.endsWith("_PAGES")}},mounted(){this.saveHomePage(),Object.keys(this.updates).length||(0,w.g)().loadUpdates()},methods:{saveHomePage(){this.needSaveHomePage&&(0,k.qV)(this.$route)},saveFlowFilter(t){(0,k.YL)({route:this.$router.resolve(t),flowName:"all",isNews:this.isNewsRoute,isPosts:this.isPostsRoute})}}};var y=s(83744);const P=(0,y.Z)(I,[["render",l]]),R=P},40801:(t,e,s)=>{s.r(e),s.d(e,{default:()=>S});var a=s(66252);function i(t,e,s,i,r,n){const o=(0,a.up)("TMCompaniesRatingBlock"),l=(0,a.up)("TMMostReadingBlock"),u=(0,a.up)("TMLayoutSidebar");return i.isDesktop?((0,a.wg)(),(0,a.j4)(u,{key:0,"show-adv":!0},{default:(0,a.w5)((()=>["ru"===t.$route.params.hl&&!n.isFlEnglish&&i.companiesTopRating&&i.companiesTopRating.length?((0,a.wg)(),(0,a.j4)(o,{key:0,companies:i.companiesTopRating},null,8,["companies"])):(0,a.kq)("",!0),(0,a.Wm)(l,{"ga-type":"feed",layout:"sidebar"})])),_:1})):(0,a.kq)("",!0)}var r=s(67476),n=s(65913),o=s(9185),l=s(663),u=s(21805),m=s(36134),p=s(10107),_=s(84183);const g={components:{TMMostReadingBlock:l.Z,TMCompaniesRatingBlock:n.Z,TMLayoutSidebar:o.Z},setup(){const t=(0,p.l)(),e=(0,_.s)(),{isDesktop:s}=(0,r.Jk)(e),{companiesTopRating:a}=(0,r.Jk)(t),{langOptions:i}=(0,m.Q)(),n=(0,u.w)((()=>s.value?t.loadTopCompanies():Promise.resolve(!0)));return{...n,companiesTopRating:a,isDesktop:s,langOptions:i}},computed:{isFlEnglish(){return"en"===this.langOptions.fl}}};var h=s(83744);const c=(0,h.Z)(g,[["render",i]]),S=c},32505:(t,e,s)=>{s.r(e),s.d(e,{default:()=>M});var a=s(66252),i=s(56612);const r=["textContent"];function n(t,e,s,n,o,l){const u=(0,a.up)("TMDescriptionList"),m=(0,a.up)("TMBlock"),p=(0,a.up)("TMKarmagraph"),_=(0,a.up)("TMLayoutSidebar");return n.isDesktop?((0,a.wg)(),(0,a.j4)(_,{key:0,"show-adv":!1},{default:(0,a.w5)((()=>[n.statistics?((0,a.wg)(),(0,a.j4)(m,{key:0,title:t.msg("STATISTICS_BLOCK_TITLE")},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.items,(t=>((0,a.wg)(),(0,a.j4)(u,{key:t.title,title:t.title,variant:"columns-numbers"},{default:(0,a.w5)((()=>[(0,a._)("span",{textContent:(0,i.zw)(t.value)},null,8,r)])),_:2},1032,["title"])))),128))])),_:1},8,["title"])):(0,a.kq)("",!0),n.karmaStats&&n.karmaStats.length?((0,a.wg)(),(0,a.j4)(p,{key:1,"karma-stats":n.karmaStats},null,8,["karma-stats"])):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)}var o=s(67476),l=s(68829),u=s(44420);const m={id:"xGrid",class:"karmagraph__grid karmagraph__grid_x"},p=["y1","y2"],_={class:"karmagraph__labels karmagraph__labels_y"},g=["y"],h={id:"yGrid",class:"karmagraph__grid karmagraph__grid_y"},c=["x1","x2","y2"],S={class:"karmagraph__labels karmagraph__labels_x"},T=["x","y"],d={class:"karmagraph__bars"},b=["height","width","x","y"],L=["innerHTML"];function w(t,e,s,r,n,o){const l=(0,a.up)("TMBlock");return(0,a.wg)(),(0,a.j4)(l,{title:t.msg("TITLE_BLOCK_KARMAGRAPH")},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.iD)("svg",{class:"karmagraph",style:(0,i.j5)({height:o.graphHeight+28+"px"}),xmlns:"http://www.w3.org/2000/svg"},[(0,a._)("g",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.stepsY,((t,e)=>((0,a.wg)(),(0,a.iD)("line",{key:`line-x-${t}`,x1:"23",x2:"260",y1:o.stepYHeight*e+5,y2:o.stepYHeight*e+5},null,8,p)))),128))]),(0,a._)("g",_,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.stepsY,((t,e)=>((0,a.wg)(),(0,a.iD)("text",{key:`step${t}`,x:"10",y:o.stepYHeight*e+10},(0,i.zw)(t),9,g)))),128))]),(0,a._)("g",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.stepsX,((t,e)=>((0,a.wg)(),(0,a.iD)("line",{key:`line-y-${t}`,x1:o.stepXWidth*e+n.xPadding,x2:o.stepXWidth*e+n.xPadding,y1:"5",y2:o.graphHeight+5},null,8,c)))),128))]),(0,a._)("g",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.stepsX,((t,e)=>((0,a.wg)(),(0,a.iD)("text",{key:`step${t}`,x:o.stepXWidth*e+n.xPadding,y:o.graphHeight+20},(0,i.zw)(t),9,T)))),128))]),(0,a._)("g",d,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.karmaStats,((t,e)=>((0,a.wg)(),(0,a.iD)("rect",{key:`bar-${t.d}-${t.count}`,class:(0,i.C_)(`karmagraph__bars_${t.type}`),height:o.getBarHeight(t),width:o.barWidth,x:o.barWidth*e+n.xPadding,y:"plus"===t.type?o.zeroPos-o.getBarHeight(t):o.zeroPos},null,10,b)))),128))])],4)),(0,a._)("div",{class:"karmagraph__description",innerHTML:t.msg("KARMAGRAPH_BLOCK_DESCRIPTION")},null,8,L)])),_:1},8,["title"])}const A={components:{TMBlock:l.Z},props:{karmaStats:{type:Array,required:!0}},data(){return{height:268,width:255,periodsCountPerDay:24.5,xPadding:30}},computed:{maxValue(){let t=0;return this.karmaStats.forEach((e=>{e.count>t&&(t=e.count)})),t},minValue(){let t=0;return this.karmaStats.forEach((e=>{e.count<t&&(t=e.count)})),t},stepsCountY(){return Math.ceil((this.maxValue-this.minValue)/10)+2},stepYHeight(){return Math.ceil(this.height/this.stepsCountY)},stepXWidth(){return 2*this.barWidth*this.periodsCountPerDay},zeroPos(){return this.stepsY.findIndex((t=>0===t))*this.stepYHeight+5},stepsY(){let t=10*Math.ceil(this.maxValue/10);const e=[];for(let s=0;s<this.stepsCountY;s+=1)e.push(t),t-=10;return e},stepsX(){return[...new Set(this.karmaStats.map((t=>t.date)))]},barWidth(){return(this.width-this.xPadding)/this.karmaStats.length},graphHeight(){return this.stepYHeight*(this.stepsCountY-1)+5}},methods:{getBarHeight(t){const e=Math.abs(this.stepsY[0])+Math.abs(this.stepsY[this.stepsY.length-1]);return Math.abs(t.count)*this.graphHeight/e}}};var E=s(83744);const O=(0,E.Z)(A,[["render",w]]),N=O;var k=s(9185),v=s(21805),I=s(36134),y=s(84183),P=s(68970);const R={components:{TMDescriptionList:u.Z,TMBlock:l.Z,TMKarmagraph:N,TMLayoutSidebar:k.Z},setup(){const t=(0,P.UJ)(),e=(0,y.s)(),{langOptions:s}=(0,I.Q)(),{isDesktop:a}=(0,o.Jk)(e),i=(0,v.w)((()=>a.value?Promise.all([t.loadUsersStatistics(),t.loadKarmaStats()]).catch((()=>Promise.resolve())):Promise.resolve(!0))),{statistics:r,karmaStats:n}=(0,o.Jk)(t);return{...i,statistics:r,karmaStats:n,isDesktop:a,langOptions:s}},computed:{items(){const t=new Intl.NumberFormat(this.langOptions.hl),e=e=>t.format(e),{msg:s}=this,{total:a,male:i,female:r,other:n}=this.statistics;return[{title:s("STATISTICS_TOTAL"),value:e(a)},{title:s("STATISTICS_MALE"),value:e(i)},{title:s("STATISTICS_FEMALE"),value:e(r)},{title:s("STATISTICS_NOT_SPECIFIED"),value:e(n)}]}}},C=(0,E.Z)(R,[["render",n]]),M=C},64106:(t,e,s)=>{s.r(e),s.d(e,{default:()=>N});var a=s(66252);function i(t,e,s,i,r,n){const o=(0,a.up)("TMCompaniesFilter"),l=(0,a.up)("TMLayoutSidebar");return i.isDesktop?((0,a.wg)(),(0,a.j4)(l,{key:0,"show-adv":!1},{default:(0,a.w5)((()=>[i.companiesCategories&&i.companiesCategories.length?((0,a.wg)(),(0,a.j4)(o,{key:0,categories:i.companiesCategories,"total-count":i.companiesCategoriesTotalCount},null,8,["categories","total-count"])):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)}var r=s(23002),n=s(67476),o=s(56612);const l={class:"tm-companies-filter"},u={class:"tm-companies-filter__label"},m={class:"tm-companies-filter__counter"},p={class:"tm-companies-filter__label"},_={class:"tm-companies-filter__counter"};function g(t,e,s,i,r,n){const g=(0,a.up)("router-link"),h=(0,a.up)("TMBlock");return(0,a.wg)(),(0,a.j4)(h,{title:t.msg("FILTERS")},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.Wm)(g,{class:"tm-companies-filter__item","exact-active-class":"tm-companies-filter__item_active",to:{name:"COMPANIES"}},{default:(0,a.w5)((()=>[(0,a._)("span",u,(0,o.zw)(t.msg("ALL")),1),(0,a._)("span",m,(0,o.zw)(s.totalCount),1)])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.categories,(t=>((0,a.wg)(),(0,a.j4)(g,{key:t.alias,"active-class":"tm-companies-filter__item_active",class:"tm-companies-filter__item",to:{name:"COMPANIES_CATEGORIES",params:{categoryAlias:t.alias}}},{default:(0,a.w5)((()=>[(0,a._)("span",p,(0,o.zw)(t.title),1),(0,a._)("span",_,(0,o.zw)(t.stats.companiesCount),1)])),_:2},1032,["to"])))),128))])])),_:1},8,["title"])}var h=s(68829);const c={name:"TMCompaniesFilter",components:{TMBlock:h.Z},props:{categories:{type:Array,default:null},totalCount:{type:Number,default:0}}};var S=s(83744);const T=(0,S.Z)(c,[["render",g]]),d=T;var b=s(9185),L=s(21805),w=s(10107),A=s(84183);const E={components:{TMLayoutSidebar:b.Z,TMCompaniesFilter:d},setup(){const t=(0,r.pm)(),e=(0,w.l)(),s=(0,A.s)(),{isDesktop:a}=(0,n.Jk)(s),{companiesCategories:i,companiesCategoriesTotalCount:o}=(0,n.Jk)(e),l=(0,L.w)((()=>e.loadCompaniesCategories().catch((e=>{t.error(e.message),console.error(e)}))));return{...l,companiesCategories:i,companiesCategoriesTotalCount:o,isDesktop:a}}},O=(0,S.Z)(E,[["render",i]]),N=O},3110:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var a=s(66252);function i(t,e,s,i,r,n){const o=(0,a.up)("TMHubsList");return(0,a.wg)(),(0,a.j4)(o,{"sorting-options":n.sortingOptions},null,8,["sorting-options"])}var r=s(22201),n=s(71593),o=s(21805),l=s(36134),u=s(72073);const m={components:{TMHubsList:n.Z},setup(){const t=(0,r.yj)(),e=(0,u.X)(),{msg:s}=(0,l.Q)(),a=(0,o.w)((()=>e.loadHubs(t)));return{...a,msg:s}},data(){return{loadingFlows:!0}},computed:{i18n(){return{shortInfoPlaceholder:this.msg("HUB")}},sortingOptions(){return[{label:this.msg("NAV_SORTING_ABC"),title:this.msg("NAV_SORTING_ABC_TITLE"),id:"title",isSortable:!0},{label:this.msg("NAV_SORTING_RATING"),title:this.msg("NAV_SORTING_RATING_TITLE"),id:"rating",isSortable:!0},{label:this.msg("NAV_SORTING_SUBSCRIBERS"),title:this.msg("NAV_SORTING_SUBSCRIBERS_TITLE"),id:"subscribers",isSortable:!0}]}}};var p=s(83744);const _=(0,p.Z)(m,[["render",i]]),g=_}}]);
//# sourceMappingURL=page-flows.3e9c1cf0.js.map