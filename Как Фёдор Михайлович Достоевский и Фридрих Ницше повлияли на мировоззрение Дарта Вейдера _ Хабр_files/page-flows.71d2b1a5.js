"use strict";(self["webpackChunkhabr_web"]=self["webpackChunkhabr_web"]||[]).push([[1231],{98921:(e,t,s)=>{s.d(t,{Z:()=>h});var a=s(70942);const o={class:"tm-companies-rating"},r=["innerHTML"],n={class:"tm-companies-rating__rating"};function l(e,t,s,l,i,c){const m=(0,a.resolveComponent)("TMEntityImage"),u=(0,a.resolveComponent)("router-link"),p=(0,a.resolveComponent)("TMBlock");return(0,a.openBlock)(),(0,a.createBlock)(p,{title:e.msg("TOP_COMPANIES_BLOCK_TITLE")},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",o,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(s.companies,((t,s)=>((0,a.openBlock)(),(0,a.createBlock)(u,{key:s,class:"tm-companies-rating__item",to:{name:"ARTICLES_LIST_BY_COMPANY",params:{name:t.alias,hl:e.$route.params.hl}}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{alias:t.alias,class:"tm-companies-rating__avatar",image:t.imageUrl,size:36,type:"company"},null,8,["alias","image"]),(0,a.createElementVNode)("span",{class:"tm-companies-rating__name",innerHTML:t.titleHtml},null,8,r),(0,a.createElementVNode)("span",n,(0,a.toDisplayString)(t.statistics.rating),1)])),_:2},1032,["to"])))),128))])])),footer:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{class:"tm-block-extralink",to:{name:"COMPANIES"}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.msg("COMPANIES_ALL")),1)])),_:1})])),_:1},8,["title"])}var i=s(11493),c=s(82598);const m={name:"TMCompaniesRatingBlock",components:{TMBlock:i.Z,TMEntityImage:c.Z},props:{companies:{type:Array,default:null}}};var u=s(83744);const p=(0,u.Z)(m,[["render",l]]),h=p},67493:(e,t,s)=>{s.d(t,{Z:()=>w});var a=s(70942);const o=["innerHTML"],r={key:0,class:"tm-hubs-list__sorting-panel"},n={class:"tm-hubs-list"},l={class:"tm-hubs-list__hub"},i={class:"tm-hubs-list__hub-rating"},c={class:"tm-hubs-list__hub-subscribers"};function m(e,t,s,m,u,p){const h=(0,a.resolveComponent)("TMPlaceholder"),_=(0,a.resolveComponent)("TMEmptyPlaceholder"),d=(0,a.resolveComponent)("TMNavigationSorting"),g=(0,a.resolveComponent)("TMHubSnippet"),S=(0,a.resolveComponent)("TMSvgImg"),T=(0,a.resolveComponent)("TMPagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0,class:"tm-hubs-list__placeholder",times:7,type:"categories"})):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[e.showEmptyPlaceholder?((0,a.openBlock)(),(0,a.createBlock)(_,{key:0},{default:(0,a.withCtx)((()=>[(0,a.renderSlot)(e.$slots,"empty",{},(()=>[(0,a.createElementVNode)("span",{innerHTML:e.msg("SEARCH_EMPTY_HUBS")},null,8,o)]))])),_:3})):(0,a.createCommentVNode)("",!0),e.showEmptyPlaceholder?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[e.isDesktop&&e.sortingOptions.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createVNode)(d,{options:e.sortingOptions,sort:e.defaultSort},null,8,["options","sort"])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",n,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.currentHubsList,(t=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t.id,class:"tm-hubs-list__category-wrapper"},[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(g,{hub:t,"show-common-tags":e.isDesktop},null,8,["hub","show-common-tags"]),(0,a.createElementVNode)("div",i,[e.isMobile?((0,a.openBlock)(),(0,a.createBlock)(S,{key:0,id:"rating",class:"tm-hubs-list__hub-icon tm-hubs-list__hub-icon_rating"})):(0,a.createCommentVNode)("",!0),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(t.statistics.rating),1)]),(0,a.createElementVNode)("div",c,[e.isMobile?((0,a.openBlock)(),(0,a.createBlock)(S,{key:0,id:"subscribers",class:"tm-hubs-list__hub-icon tm-hubs-list__hub-icon_subscribers"})):(0,a.createCommentVNode)("",!0),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.abbreviateNumber(t.statistics.subscribersCount)),1)])])])))),128))]),(0,a.createVNode)(T,{"route-name":e.paginationRouteName,"total-pages":e.currentPagesCount},null,8,["route-name","total-pages"])],64))],64))])}var u=s(33907),p=s(17490);const h={class:"tm-hub"},_={class:"tm-hub__info"},d=["innerHTML"],g=["title"],S=["innerHTML"],T={key:0,class:"tm-hubs-list__hub-tags"};function b(e,t,s,o,r,n){const l=(0,a.resolveComponent)("TMEntityImage"),i=(0,a.resolveComponent)("TMHubLink"),c=(0,a.resolveComponent)("router-link");return(0,a.openBlock)(),(0,a.createElementBlock)("div",h,[(0,a.createVNode)(i,{class:"tm-hub__userpic-link",hub:s.hub},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l,{alias:s.hub.alias,image:s.hub.imageUrl,type:"hub"},null,8,["alias","image"])])),_:1},8,["hub"]),(0,a.createElementVNode)("div",_,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(i,{class:(0,a.normalizeClass)(["tm-hub__title",{"tm-hub__title_subscribed":s.hub.relatedData&&s.hub.relatedData.isSubscribed}]),hub:s.hub},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",{innerHTML:s.hub.titleHtml},null,8,d)])),_:1},8,["class","hub"]),s.hub.isProfiled?((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:0,class:"tm-hub__profiled",title:e.msg("PROFILED_HUB")}," * ",8,g)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",{class:"tm-hub__description",innerHTML:s.hub.descriptionHtml},null,8,S),s.showCommonTags&&s.hub.commonTags&&s.hub.commonTags.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",T,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(s.hub.commonTags,(e=>((0,a.openBlock)(),(0,a.createBlock)(c,{key:e,class:"tm-hubs-list__hub-tag",to:n.searchTagRoute(e),textContent:(0,a.toDisplayString)(e)},null,8,["to","textContent"])))),128))])):(0,a.createCommentVNode)("",!0)])])}var k=s(82598),N=s(59933);const E={name:"TMHubSnippet",components:{TMHubLink:N.Z,TMEntityImage:k.Z},props:{hub:{type:Object,required:!0},showCommonTags:{type:Boolean}},computed:{...(0,u.Se)("i18n",["langOptions"])},methods:{searchTagRoute(e){return{name:"SEARCH_QUERY_RESULTS",query:{q:`[${e}]`,target_type:"posts",order:"relevance"}}}}};var C=s(83744);const L=(0,C.Z)(E,[["render",b]]),v=L;var A=s(90662),B=s(12475),O=s(79063),y=s(46206),I=s(85725),P=s(87934);const V={name:"TMHubsListPresenter",components:{TMEmptyPlaceholder:p.Z,TMHubSnippet:v,TMNavigationSorting:A.Z,TMPagination:B.Z,TMPlaceholder:O.Z,TMSvgImg:y.Z},props:{sortingOptions:{type:Array,default:()=>[]},defaultSort:{type:String,default:"rating"}},data(){return{routeKey:(0,I.Z)(this.$route)}},computed:{...(0,u.rn)("hubs",["hubRefs","hubIds","pagesCount","isLoading"]),...(0,u.Se)("global",["isMobile","isDesktop"]),currentHubsList(){const e=this.hubIds[this.routeKey];return e&&Array.isArray(e)?e.map((e=>this.hubRefs[e])):[]},currentPagesCount(){return this.pagesCount[this.routeKey]},paginationRouteName(){return-1!==this.$route.name.indexOf("_PAGES")?this.$route.name:`${this.$route.name}_PAGES`},showEmptyPlaceholder(){return this.currentHubsList&&!this.currentHubsList.length||!this.currentHubsList}},methods:{abbreviateNumber(e){return(0,P.O)(e)}}},R=(0,C.Z)(V,[["render",m]]),w=R},40603:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(70942);const o={class:"tm-navigation-panel"},r={key:0,class:"tm-navigation-panel__title"};function n(e,t,s,n,l,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",o,[s.title?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,(0,a.toDisplayString)(s.title),1)):(0,a.createCommentVNode)("",!0),(0,a.renderSlot)(e.$slots,"default")])}const l={name:"TMNavigationPanel",props:{title:{type:String,default:null}}};var i=s(83744);const c=(0,i.Z)(l,[["render",n]]),m=c},29091:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(70942);const o={class:"tm-page__top","data-test-id":"page-top"},r={key:0,class:"tm-suggest-button",href:"https://tmtm.ru/services/corpblog/"},n={key:0,class:"tm-navigation-filter"};function l(e,t,s,l,i,c){const m=(0,a.resolveComponent)("TMAdfoxBanner"),u=(0,a.resolveComponent)("router-link"),p=(0,a.resolveComponent)("TMSectionName"),h=(0,a.resolveComponent)("TMTabs"),_=(0,a.resolveComponent)("TMRssButton"),d=(0,a.resolveComponent)("TMNavigationFilters"),g=(0,a.resolveComponent)("TMNavigationPanel"),S=(0,a.resolveComponent)("TMNavigationSearch"),T=(0,a.resolveComponent)("router-view"),b=(0,a.resolveComponent)("TMPage");return(0,a.openBlock)(),(0,a.createBlock)(b,null,{default:(0,a.withCtx)((()=>[e.userShowAdv?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"adfox-id":"169815559787254866","div-id":"topBanner",params:{pp:"g",ps:"fnps",p2:"iqny"},variant:"narrow"})):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",o,[(0,a.createVNode)(p,{name:e.msg("NAV_FLOWS_ALL")},{default:(0,a.withCtx)((()=>[c.showSuggestCompanyButton?((0,a.openBlock)(),(0,a.createElementBlock)("a",r,(0,a.toDisplayString)(e.msg("SUGGEST_COMPANY")),1)):(0,a.createCommentVNode)("",!0),c.showSuggestHubButton?((0,a.openBlock)(),(0,a.createBlock)(u,{key:1,class:"tm-suggest-button",to:c.suggestHubRoute},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.msg("SUGGEST_HUB")),1)])),_:1},8,["to"])):(0,a.createCommentVNode)("",!0)])),_:1},8,["name"]),(0,a.createVNode)(h,{class:"tm-tabs_page-header",tabs:c.tabs},null,8,["tabs"]),c.isArticleFilterShown?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(d,{"extra-options":c.filterExtraOptions,options:c.filterOptions,onApplyFilter:c.saveFlowFilter},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_)])),_:1},8,["extra-options","options","onApplyFilter"])])):!c.isArticleFilterShown&&c.hasRss?((0,a.openBlock)(),(0,a.createBlock)(g,{key:1,title:e.msg("NAV_TITLE_LATEST")},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_)])),_:1},8,["title"])):(0,a.createCommentVNode)("",!0),c.showNavigationSearch?((0,a.openBlock)(),(0,a.createBlock)(S,{key:2})):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(T)])),sidebar:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{name:"sidebar"})])),_:1})}var i=s(33907),c=s(10819),m=s(51029),u=s(40603),p=s(71759),h=s(77839),_=s(49303),d=s(94675),g=s(62978),S=s(73833),T=s(44383),b=s(68171),k=s(70953),N=s(88447);const E={components:{TMAdfoxBanner:c.Z,TMNavigationFilters:m.Z,TMNavigationPanel:u.Z,TMNavigationSearch:p.Z,TMPage:h.Z,TMSectionName:d.Z,TMTabs:g.Z,TMRssButton:_.Z},computed:{...(0,i.Se)("global",["isDesktop"]),...(0,i.rn)("flows",["updates"]),...(0,i.rn)("me",["user"]),...(0,i.Se)("me",["userShowAdv"]),...(0,i.Se)("i18n",["langOptions"]),isFlEnglish(){return"en"===this.langOptions.fl},showSuggestCompanyButton(){return-1!==["COMPANIES","COMPANIES_PAGES"].indexOf(this.$route.name)},showSuggestHubButton(){return-1!==["HUBS","HUBS_PAGES"].indexOf(this.$route.name)},suggestHubRoute(){return{name:"FEEDBACK",query:{type:8,subj:"suggest_hub"}}},hasRss(){return Boolean(this.$route.meta.rssLink)},isNewsRoute(){return this.$route.matched.some((e=>e.name&&e.name.startsWith("NEWS")))},isPostsRoute(){return this.$route.matched.some((e=>e.name&&e.name.startsWith("POSTS")))},isShowCountNewArticles(){if(!this.user)return"ARTICLES_LIST_TOP_PERIOD"!==this.$route.name&&"ARTICLES_LIST_ALL_SCORE"!==this.$route.name;if(!(0,k.h2)())return!1;const e=(0,N.buildCookieName)({flowName:"all"});return!(0,k.ej)(e)||"/articles/"===(0,k.ej)(e)},isShowCountNewNews(){if(!this.user)return"NEWS_LIST_TOP_PERIOD"!==this.$route.name&&"NEWS_LIST_ALL_SCORE"!==this.$route.name;if(!(0,k.h2)())return!1;const e=(0,N.buildCookieName)({flowName:"all",isNews:!0});return!(0,k.ej)(e)||"/news/"===(0,k.ej)(e)},isShowCountNewPosts(){return!0},filterOptions(){return this.isPostsRoute?this.postsFilterOptions:this.isNewsRoute?this.newsFilterOptions:this.articlesFilterOptions},addExtraOptions(){return!this.isNewsRoute&&!this.isPostsRoute},filterExtraOptions(){return this.addExtraOptions?(0,S.r)(this.msg):[]},articlesFilterOptions(){return[{label:this.msg("NAV_NEW"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_RATING"),children:[{label:this.msg("NAV_ALL"),value:"ARTICLES_LIST_ALL",params:{}},{label:"≥0",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"0"}},{label:"≥10",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"10"}},{label:"≥25",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"25"}},{label:"≥50",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"50"}},{label:"≥100",value:"ARTICLES_LIST_ALL_SCORE",params:{score:"100"}}]},{label:this.msg("NAV_BEST"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_PERIOD"),children:[{label:this.msg("NAV_DAY"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"daily"}},{label:this.msg("NAV_WEEK"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"weekly"}},{label:this.msg("NAV_MONTH"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"monthly"}},{label:this.msg("NAV_YEAR"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"yearly"}},{label:this.msg("NAV_ALLTIME"),value:"ARTICLES_LIST_TOP_PERIOD",params:{period:"alltime"}}]}]},newsFilterOptions(){return[{label:this.msg("NAV_NEW"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_RATING"),children:[{label:this.msg("NAV_ALL"),value:"NEWS_LIST_ALL",params:{}},{label:"≥0",value:"NEWS_LIST_ALL_SCORE",params:{score:"0"}},{label:"≥10",value:"NEWS_LIST_ALL_SCORE",params:{score:"10"}},{label:"≥25",value:"NEWS_LIST_ALL_SCORE",params:{score:"25"}},{label:"≥50",value:"NEWS_LIST_ALL_SCORE",params:{score:"50"}},{label:"≥100",value:"NEWS_LIST_ALL_SCORE",params:{score:"100"}}]},{label:this.msg("NAV_BEST"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_PERIOD"),children:[{label:this.msg("NAV_DAY"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"daily"}},{label:this.msg("NAV_WEEK"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"weekly"}},{label:this.msg("NAV_MONTH"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"monthly"}},{label:this.msg("NAV_YEAR"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"yearly"}},{label:this.msg("NAV_ALLTIME"),value:"NEWS_LIST_TOP_PERIOD",params:{period:"alltime"}}]}]},postsFilterOptions(){return[{label:this.msg("NAV_NEW"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_RATING"),children:[{label:this.msg("NAV_ALL"),value:"POSTS_ALL",params:{}},{label:"≥0",value:"POSTS_ALL_SCORE",params:{score:"0"}},{label:"≥10",value:"POSTS_ALL_SCORE",params:{score:"10"}},{label:"≥25",value:"POSTS_ALL_SCORE",params:{score:"25"}},{label:"≥50",value:"POSTS_ALL_SCORE",params:{score:"50"}},{label:"≥100",value:"POSTS_ALL_SCORE",params:{score:"100"}}]},{label:this.msg("NAV_BEST"),rootLabel:this.msg("NAV_SHOW_FIRST"),mainLabel:this.msg("NAV_SHOW_BY_PERIOD"),children:[{label:this.msg("NAV_DAY"),value:"POSTS_TOP_PERIOD",params:{period:"daily"}},{label:this.msg("NAV_WEEK"),value:"POSTS_TOP_PERIOD",params:{period:"weekly"}},{label:this.msg("NAV_MONTH"),value:"POSTS_TOP_PERIOD",params:{period:"monthly"}},{label:this.msg("NAV_YEAR"),value:"POSTS_TOP_PERIOD",params:{period:"yearly"}},{label:this.msg("NAV_ALLTIME"),value:"POSTS_TOP_PERIOD",params:{period:"alltime"}}]}]},showNavigationSearch(){return this.$route.meta.hasSearch},tabs(){const e="ru"!==this.$route.params.hl||this.isFlEnglish?[]:[{title:this.msg("NAV_COMPANIES"),route:{name:"COMPANIES"}}];return[{title:this.msg("NAV_ARTICLES"),route:{name:"ALL_FLOWS"},children:(0,T.nz)(this.articlesFilterOptions),countNew:this.isShowCountNewArticles?this.updates.countPosts:0},{title:this.msg("NAV_POSTS"),route:{name:"POSTS_ALL"},children:(0,T.nz)(this.postsFilterOptions),countNew:this.isShowCountNewPosts?this.updates.countThreads:0},{title:this.msg("NAV_NEWS"),route:{name:"NEWS_LIST_ALL"},children:(0,T.nz)(this.newsFilterOptions),countNew:this.isShowCountNewNews?this.updates.countNews:0},{title:this.msg("NAV_HUBS"),route:{name:"HUBS"}},{title:this.msg("NAV_AUTHORS"),route:{name:"USERS"}},...e]},isArticleFilterShown(){return!0===this.$route.meta.showFilter},needSaveHomePage(){return["ARTICLES_LIST","NEWS_LIST","POSTS"].some((e=>this.$route.name.startsWith(e)))&&!this.$route.name.endsWith("_PAGES")}},mounted(){this.saveHomePage(),Object.keys(this.updates).length||this.loadUpdates()},methods:{...(0,i.nv)("flows",["loadUpdates"]),saveHomePage(){this.needSaveHomePage&&(0,b.qV)(this.$route)},saveFlowFilter(e){(0,b.YL)({route:this.$router.resolve(e),flowName:"all",isNews:this.isNewsRoute,isPosts:this.isPostsRoute})}}};var C=s(83744);const L=(0,C.Z)(E,[["render",l]]),v=L},39955:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var a=s(70942);function o(e,t,s,o,r,n){const l=(0,a.resolveComponent)("TMCompaniesRatingBlock"),i=(0,a.resolveComponent)("TMMostReadingBlock"),c=(0,a.resolveComponent)("TMLayoutSidebar");return e.isDesktop?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,"show-adv":!0},{default:(0,a.withCtx)((()=>["ru"===e.$route.params.hl&&!n.isFlEnglish&&e.companiesTopRating&&e.companiesTopRating.length?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0,companies:e.companiesTopRating},null,8,["companies"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(i,{"ga-type":"feed",layout:"sidebar"})])),_:1})):(0,a.createCommentVNode)("",!0)}var r=s(33907),n=s(98921),l=s(80918),i=s(5254),c=s(21805);const m={components:{TMMostReadingBlock:i.Z,TMCompaniesRatingBlock:n.Z,TMLayoutSidebar:l.Z},setup(){return(0,c.w)((({store:e})=>{const t=e.getters["global/isDesktop"];return t?Promise.all([e.dispatch("companies/loadTopCompanies")]):Promise.resolve(!0)}))},computed:{...(0,r.Se)("companies",["companiesTopRating"]),...(0,r.Se)("global",["isDesktop"]),...(0,r.Se)("i18n",["langOptions"]),isFlEnglish(){return"en"===this.langOptions.fl}}};var u=s(83744);const p=(0,u.Z)(m,[["render",o]]),h=p},69873:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(70942);const o=["textContent"];function r(e,t,s,r,n,l){const i=(0,a.resolveComponent)("TMDescriptionList"),c=(0,a.resolveComponent)("TMBlock"),m=(0,a.resolveComponent)("TMKarmagraph"),u=(0,a.resolveComponent)("TMLayoutSidebar");return e.isDesktop?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,"show-adv":!1},{default:(0,a.withCtx)((()=>[e.statistics?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,title:e.msg("STATISTICS_BLOCK_TITLE")},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.items,(e=>((0,a.openBlock)(),(0,a.createBlock)(i,{key:e.title,title:e.title,variant:"columns-numbers"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",{textContent:(0,a.toDisplayString)(e.value)},null,8,o)])),_:2},1032,["title"])))),128))])),_:1},8,["title"])):(0,a.createCommentVNode)("",!0),e.karmaStats&&e.karmaStats.length?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,"karma-stats":e.karmaStats},null,8,["karma-stats"])):(0,a.createCommentVNode)("",!0)])),_:1})):(0,a.createCommentVNode)("",!0)}var n=s(33907),l=s(11493),i=s(44446);const c={id:"xGrid",class:"karmagraph__grid karmagraph__grid_x"},m=["y1","y2"],u={class:"karmagraph__labels karmagraph__labels_y"},p=["y"],h={id:"yGrid",class:"karmagraph__grid karmagraph__grid_y"},_=["x1","x2","y2"],d={class:"karmagraph__labels karmagraph__labels_x"},g=["x","y"],S={class:"karmagraph__bars"},T=["height","width","x","y"],b=["innerHTML"];function k(e,t,s,o,r,n){const l=(0,a.resolveComponent)("TMBlock");return(0,a.openBlock)(),(0,a.createBlock)(l,{title:e.msg("TITLE_BLOCK_KARMAGRAPH")},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(),(0,a.createElementBlock)("svg",{class:"karmagraph",style:(0,a.normalizeStyle)({height:n.graphHeight+28+"px"}),xmlns:"http://www.w3.org/2000/svg"},[(0,a.createElementVNode)("g",c,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.stepsY,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("line",{key:`line-x-${e}`,x1:"23",x2:"260",y1:n.stepYHeight*t+5,y2:n.stepYHeight*t+5},null,8,m)))),128))]),(0,a.createElementVNode)("g",u,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.stepsY,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("text",{key:`step${e}`,x:"10",y:n.stepYHeight*t+10},(0,a.toDisplayString)(e),9,p)))),128))]),(0,a.createElementVNode)("g",h,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.stepsX,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("line",{key:`line-y-${e}`,x1:n.stepXWidth*t+r.xPadding,x2:n.stepXWidth*t+r.xPadding,y1:"5",y2:n.graphHeight+5},null,8,_)))),128))]),(0,a.createElementVNode)("g",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.stepsX,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("text",{key:`step${e}`,x:n.stepXWidth*t+r.xPadding,y:n.graphHeight+20},(0,a.toDisplayString)(e),9,g)))),128))]),(0,a.createElementVNode)("g",S,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(s.karmaStats,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("rect",{key:`bar-${e.d}-${e.count}`,class:(0,a.normalizeClass)(`karmagraph__bars_${e.type}`),height:n.getBarHeight(e),width:n.barWidth,x:n.barWidth*t+r.xPadding,y:"plus"===e.type?n.zeroPos-n.getBarHeight(e):n.zeroPos},null,10,T)))),128))])],4)),(0,a.createElementVNode)("div",{class:"karmagraph__description",innerHTML:e.msg("KARMAGRAPH_BLOCK_DESCRIPTION")},null,8,b)])),_:1},8,["title"])}const N={components:{TMBlock:l.Z},props:{karmaStats:{type:Array,required:!0}},data(){return{height:268,width:255,periodsCountPerDay:24.5,xPadding:30}},computed:{maxValue(){let e=0;return this.karmaStats.forEach((t=>{t.count>e&&(e=t.count)})),e},minValue(){let e=0;return this.karmaStats.forEach((t=>{t.count<e&&(e=t.count)})),e},stepsCountY(){return Math.ceil((this.maxValue-this.minValue)/10)+2},stepYHeight(){return Math.ceil(this.height/this.stepsCountY)},stepXWidth(){return 2*this.barWidth*this.periodsCountPerDay},zeroPos(){return this.stepsY.findIndex((e=>0===e))*this.stepYHeight+5},stepsY(){let e=10*Math.ceil(this.maxValue/10);const t=[];for(let s=0;s<this.stepsCountY;s+=1)t.push(e),e-=10;return t},stepsX(){const e=[...new Set(this.karmaStats.map((e=>e.date)))];return e},barWidth(){return(this.width-this.xPadding)/this.karmaStats.length},graphHeight(){return this.stepYHeight*(this.stepsCountY-1)+5}},methods:{getBarHeight(e){const t=Math.abs(this.stepsY[0])+Math.abs(this.stepsY[this.stepsY.length-1]);return Math.abs(e.count)*this.graphHeight/t}}};var E=s(83744);const C=(0,E.Z)(N,[["render",k]]),L=C;var v=s(80918),A=s(21805);const B={components:{TMDescriptionList:i.Z,TMBlock:l.Z,TMKarmagraph:L,TMLayoutSidebar:v.Z},setup(){return(0,A.w)((({store:e})=>{const t=e.getters["global/isDesktop"];return t?Promise.all([e.dispatch("users/loadUsersStatistics"),e.dispatch("users/loadKarmaStats")]).catch((()=>Promise.resolve())):Promise.resolve(!0)}))},computed:{...(0,n.rn)("users",["statistics","karmaStats"]),...(0,n.Se)("global",["isDesktop"]),...(0,n.Se)("i18n",["langOptions"]),items(){const e=new Intl.NumberFormat(this.langOptions.hl),t=t=>e.format(t),{msg:s}=this,{total:a,male:o,female:r,other:n}=this.statistics;return[{title:s("STATISTICS_TOTAL"),value:t(a)},{title:s("STATISTICS_MALE"),value:t(o)},{title:s("STATISTICS_FEMALE"),value:t(r)},{title:s("STATISTICS_NOT_SPECIFIED"),value:t(n)}]}}},O=(0,E.Z)(B,[["render",r]]),y=O},8715:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var a=s(70942);function o(e,t,s,o,r,n){const l=(0,a.resolveComponent)("TMCompaniesFilter"),i=(0,a.resolveComponent)("TMLayoutSidebar");return e.isDesktop?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0,"show-adv":!1},{default:(0,a.withCtx)((()=>[e.companiesCategories&&e.companiesCategories.length?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0,categories:e.companiesCategories,"total-count":e.companiesCategoriesTotalCount},null,8,["categories","total-count"])):(0,a.createCommentVNode)("",!0)])),_:1})):(0,a.createCommentVNode)("",!0)}var r=s(23002),n=s(33907);const l={class:"tm-companies-filter"},i={class:"tm-companies-filter__label"},c={class:"tm-companies-filter__counter"},m={class:"tm-companies-filter__label"},u={class:"tm-companies-filter__counter"};function p(e,t,s,o,r,n){const p=(0,a.resolveComponent)("router-link"),h=(0,a.resolveComponent)("TMBlock");return(0,a.openBlock)(),(0,a.createBlock)(h,{title:e.msg("FILTERS")},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(p,{class:"tm-companies-filter__item","exact-active-class":"tm-companies-filter__item_active",to:{name:"COMPANIES"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",i,(0,a.toDisplayString)(e.msg("ALL")),1),(0,a.createElementVNode)("span",c,(0,a.toDisplayString)(s.totalCount),1)])),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(s.categories,(e=>((0,a.openBlock)(),(0,a.createBlock)(p,{key:e.alias,"active-class":"tm-companies-filter__item_active",class:"tm-companies-filter__item",to:{name:"COMPANIES_CATEGORIES",params:{categoryAlias:e.alias}}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",m,(0,a.toDisplayString)(e.title),1),(0,a.createElementVNode)("span",u,(0,a.toDisplayString)(e.stats.companiesCount),1)])),_:2},1032,["to"])))),128))])])),_:1},8,["title"])}var h=s(11493);const _={name:"TMCompaniesFilter",components:{TMBlock:h.Z},props:{categories:{type:Array,default:null},totalCount:{type:Number,default:0}}};var d=s(83744);const g=(0,d.Z)(_,[["render",p]]),S=g;var T=s(80918),b=s(21805);const k={components:{TMLayoutSidebar:T.Z,TMCompaniesFilter:S},setup(){const e=(0,r.pm)();return(0,b.w)((({store:t})=>t.dispatch("companies/loadCompaniesCategories").catch((t=>{e.error(t.message),console.error(t)}))))},computed:{...(0,n.rn)("companies",["companiesCategories","companiesCategoriesTotalCount"]),...(0,n.Se)("global",["isDesktop"])}},N=(0,d.Z)(k,[["render",o]]),E=N},56315:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(70942);function o(e,t,s,o,r,n){const l=(0,a.resolveComponent)("TMHubsList");return(0,a.openBlock)(),(0,a.createBlock)(l,{"sorting-options":n.sortingOptions},null,8,["sorting-options"])}var r=s(22201),n=s(33907),l=s(67493),i=s(21805);const c={components:{TMHubsList:l.Z},setup(){const e=(0,r.yj)();return(0,i.w)((({store:t})=>t.dispatch("hubs/loadHubs",{route:e})))},data(){return{loadingFlows:!0}},computed:{...(0,n.rn)("flows",["flows"]),...(0,n.Se)("i18n",["msg","pageTitle","langOptions"]),i18n(){return{shortInfoPlaceholder:this.msg("HUB")}},sortingOptions(){return[{label:this.msg("NAV_SORTING_ABC"),title:this.msg("NAV_SORTING_ABC_TITLE"),id:"title",isSortable:!0},{label:this.msg("NAV_SORTING_RATING"),title:this.msg("NAV_SORTING_RATING_TITLE"),id:"rating",isSortable:!0},{label:this.msg("NAV_SORTING_SUBSCRIBERS"),title:this.msg("NAV_SORTING_SUBSCRIBERS_TITLE"),id:"subscribers",isSortable:!0}]}},mounted(){0===this.flows.length&&this.loadFlows().then((()=>{this.loadingFlows=!1}))},methods:{...(0,n.nv)("flows",["loadFlows"]),...(0,n.nv)("hubs",["loadHubs"])}};var m=s(83744);const u=(0,m.Z)(c,[["render",o]]),p=u}}]);
//# sourceMappingURL=page-flows.71d2b1a5.js.map